"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[4769],{17297:function(e,r,t){t.d(r,{KR:function(){return s},nX:function(){return n},wO:function(){return o}});const n=()=>!0,o=()=>!0,s=()=>!0},27193:function(e,r,t){t.d(r,{z7:function(){return S},VE:function(){return A}});var n=t(17729),o=t(67122),s=t(82328),i=t(67699),a=t(42346),u=t(74702),c=t(34939),l=t(72670),d=t(2844),p=t(50211),f=t(9133),h=t(50111),g=t(31014),m=t(37523),E=t(13062);var v={name:"1739oy8",styles:"z-index:1"};function y({tooltipMessage:e,...r}){const t=v;return(0,h.Y)(m.LegacyTooltip,{title:e,children:(0,h.Y)(E.B,{componentId:"codegen_web-shared_src_snippet_actions_snippetactionbutton.tsx_33",...r,css:t})})}var N=t(96950),w=t(6958),T=t(88464);function A({copyText:e,onClick:r,...t}){const{actionIcon:n,tooltipMessage:o,copy:s}=function(e,r,t){const n=(0,T.A)(),o=r||n.formatMessage({id:"hBAhI8",defaultMessage:"Copy"}),s=n.formatMessage({id:"g4hHzO",defaultMessage:"Copied"}),i=(0,N.useClipboard)(),a=(0,g.useRef)(),[u,c]=(0,g.useState)(!1),[l,d]=(0,g.useState)(!1);return(0,g.useEffect)((()=>()=>{window.clearTimeout(a.current)}),[]),{actionIcon:u?(0,h.Y)(w.C,{}):(0,h.Y)(m.CopyIcon,{}),tooltipMessage:u?s:o,copy:()=>{i.copy(e),window.clearTimeout(a.current),c(!0),null===t||void 0===t||t(),a.current=window.setTimeout((()=>{c(!1)}),3e3)},copied:u,ariaLabel:o,tooltipOpen:l||u,handleTooltipOpenChange:d}}(e);return(0,h.Y)(y,{tooltipMessage:o,icon:n,onClick:e=>{s(),null===r||void 0===r||r(e)},...t})}n.A.registerLanguage("sql",l.A),n.A.registerLanguage("java",s.A),n.A.registerLanguage("python",u.A),n.A.registerLanguage("go",o.A),n.A.registerLanguage("javascript",i.A),n.A.registerLanguage("yaml",c.A),n.A.registerLanguage("json",a.A);const R="24px",M={light:p.A,duotoneDark:d.A};function S({theme:e="light",language:r,actions:t,style:o,children:s,showLineNumbers:i,lineNumberStyle:a,wrapLongLines:u,wrapLines:c,PreTag:l}){const d={border:"none",borderRadius:0,margin:0,padding:R,...o};return(0,h.Y)(n.A,{showLineNumbers:i,lineNumberStyle:a,language:r,style:M[e],customStyle:d,codeTagProps:{style:(0,f.pick)(o,"backgroundColor")},wrapLongLines:u,wrapLines:c,PreTag:l,children:s})}},30576:function(e,r,t){t.r(r),t.d(r,{CodeSnippetRenderMode:function(){return a.cC},INFERENCE_TABLE_RESPONSE_COLUMN_KEY:function(){return a.O5},INFERENCE_TABLE_TRACE_COLUMN_KEY:function(){return a.So},MLFLOW_TRACE_SCHEMA_VERSION_KEY:function(){return a.jQ},ModelIconType:function(){return a.Dy},ModelSpanType:function(){return a.UG},ModelTraceExplorer:function(){return n.a},ModelTraceExplorerOSSNotebookRenderer:function(){return o.$},ModelTraceSpanType:function(){return a.VZ},getIsMlflowTraceUIEnabled:function(){return i.KR},getModelTraceId:function(){return s.MF},getModelTraceSpanEndTime:function(){return s.jE},getModelTraceSpanId:function(){return s.wH},getModelTraceSpanParentId:function(){return s.cp},getModelTraceSpanStartTime:function(){return s.CR},getTraceArtifact:function(){return u.g},isModelTrace:function(){return s.Lq},isV3ModelTraceSpan:function(){return s.UZ}});var n=t(8409),o=t(87956),s=t(46932),i=t(17297),a=t(48563),u=t(75060)},39416:function(e,r,t){t.d(r,{a$:function(){return u}});var n=t(88443);let o=function(e){return e.UserInputError="UserInputError",e.UnexpectedSystemStateError="UnexpectedSystemStateError",e.ServerError="ServerError",e.SessionError="SessionError",e.NetworkError="NetworkError",e.ApplicationError="ApplicationError",e.UnknownError="UnknownError",e}({}),s=function(e){return e.BadRequestError="BadRequestError",e.DatasetRunNotFoundError="DatasetRunNotFoundError",e.FormValidationError="FormInputError",e.GenericNetworkRequestError="GenericNetworkRequestError",e.GraphQLGenericError="GraphQLGenericError",e.InternalServerError="InternalServerError",e.NotFoundError="NotFoundError",e.PermissionError="PermissionError",e.RateLimitedError="RateLimitedError",e.RouteNotFoundError="RouteNotFoundError",e.ServiceUnavailableError="ServiceUnavailableError",e.UnauthorizedError="UnauthorizedError",e.UnknownError="UnknownError",e}({});var i=t(50111);class a extends Error{constructor(e,r){super(e),this.errorLogType=void 0,this.errorName=void 0,this.displayMessage=void 0,this.isUserError=!1}}const u=e=>e instanceof a?e:e instanceof Error&&("networkError"in e||"graphQLErrors"in e)?c(e):e instanceof Response?l(e):new w(e);const c=e=>{return"networkError"in e&&((r=e.networkError)instanceof Error&&r.hasOwnProperty("response"))?l(e.networkError.response,e.networkError):new f(e);var r},l=(e,r)=>{const t=d.getNetworkRequestErrorDetailsFromResponse(e);switch(e.status){case 400:return new h(t,r);case 401:return new N(t,r);case 403:return new E(t,r);case 404:return new m(t,r);case 429:return new v(t,r);case 500:return new g(t,r);case 503:return new y(t,r);default:return new p(t,r)}};class d extends a{constructor(e,r,t){super(e,t),this.status=void 0,this.response=void 0,this.status=r.status,this.response=r.response}}d.getNetworkRequestErrorDetailsFromResponse=e=>({status:e.status});class p extends d{constructor(e,r){super("A network error occurred.",e,r),this.errorLogType=o.ServerError,this.errorName=s.GenericNetworkRequestError,this.displayMessage=(0,i.Y)(n.A,{id:"/CaNq/",defaultMessage:"A network error occurred."})}}class f extends a{constructor(e){super("A GraphQL error occurred.",e),this.errorLogType=o.ApplicationError,this.errorName=s.GraphQLGenericError,this.displayMessage=(0,i.Y)(n.A,{id:"PPPbd+",defaultMessage:"A GraphQL error occurred."})}}class h extends d{constructor(e,r){super("The request was invalid.",e,r),this.errorLogType=o.UserInputError,this.errorName=s.BadRequestError,this.displayMessage=(0,i.Y)(n.A,{id:"Id2mFI",defaultMessage:"The request was invalid."})}}class g extends d{constructor(e,r){super("Internal server error",e,r),this.errorLogType=o.ServerError,this.errorName=s.InternalServerError,this.displayMessage=(0,i.Y)(n.A,{id:"nY1YrF",defaultMessage:"Internal server error"})}}class m extends d{constructor(e,r){super("The requested resource was not found.",e,r),this.errorLogType=o.UserInputError,this.errorName=s.NotFoundError,this.displayMessage=(0,i.Y)(n.A,{id:"R3Lb6z",defaultMessage:"The requested resource was not found."}),this.isUserError=!0}}class E extends d{constructor(e,r){super("You do not have permission to access this resource.",e,r),this.errorLogType=o.UnexpectedSystemStateError,this.errorName=s.PermissionError,this.displayMessage=(0,i.Y)(n.A,{id:"G6IQTa",defaultMessage:"You do not have permission to access this resource."}),this.isUserError=!0}}class v extends d{constructor(e,r){super("This request exceeds the maximum queries per second limit. Please wait and try again.",e,r),this.errorLogType=o.ServerError,this.errorName=s.RateLimitedError,this.displayMessage=(0,i.Y)(n.A,{id:"5PlfiT",defaultMessage:"This request exceeds the maximum queries per second limit. Please wait and try again."})}}class y extends d{constructor(e,r){super("Internal server error",e,r),this.errorLogType=o.ServerError,this.errorName=s.InternalServerError,this.displayMessage=(0,i.Y)(n.A,{id:"/XlqZA",defaultMessage:"Service unavailable error"})}}class N extends d{constructor(e,r){super("This request exceeds the maximum queries per second limit. Please wait and try again.",e,r),this.errorLogType=o.SessionError,this.errorName=s.UnauthorizedError,this.displayMessage=(0,i.Y)(n.A,{id:"gqfk5C",defaultMessage:"User is not authorized."})}}class w extends a{constructor(e){super("An unknown error occurred.",e),this.errorLogType=o.UnknownError,this.errorName=s.UnknownError,this.displayMessage=(0,i.Y)(n.A,{id:"bKSd3c",defaultMessage:"An unknown error occurred."})}}},39771:function(e,r,t){t(31014)},46932:function(e,r,t){t.d(r,{CL:function(){return V},CR:function(){return R},HW:function(){return l},Hq:function(){return W},I$:function(){return K},LS:function(){return f},Lq:function(){return b},MF:function(){return S},N7:function(){return Y},OS:function(){return x},PC:function(){return P},Q0:function(){return D},UZ:function(){return w},W0:function(){return C},ZI:function(){return Q},bn:function(){return G},cp:function(){return A},f7:function(){return E},g_:function(){return O},h8:function(){return q},ij:function(){return d},in:function(){return B},jE:function(){return M},jW:function(){return L},tC:function(){return p},vL:function(){return m},vl:function(){return k},wH:function(){return T},x0:function(){return j}});var n=t(89555),o=t(9133),s=t(48563),i=t(86494),a=t(18739),u=t(79912),c=t(50111);const l=()=>"User",d=e=>{};function p(e){switch(e){case s.UG.LLM:return s.Dy.MODELS;case s.UG.CHAIN:return s.Dy.CHAIN;case s.UG.AGENT:return s.Dy.AGENT;case s.UG.TOOL:return s.Dy.WRENCH;case s.UG.CHAT_MODEL:return s.Dy.MODELS;case s.UG.RETRIEVER:return s.Dy.SEARCH;case s.UG.PARSER:return s.Dy.CODE;case s.UG.EMBEDDING:return s.Dy.NUMBERS;case s.UG.RERANKER:return s.Dy.SORT;case s.UG.FUNCTION:return s.Dy.FUNCTION;case s.UG.UNKNOWN:return s.Dy.UNKNOWN;default:return s.Dy.FUNCTION}}function f(e){switch(e){case s.UG.LLM:return"LLM";case s.UG.CHAIN:return"Chain";case s.UG.AGENT:return"Agent";case s.UG.TOOL:return"Tool";case s.UG.CHAT_MODEL:return"Chat model";case s.UG.RETRIEVER:return"Retriever";case s.UG.PARSER:return"Parser";case s.UG.EMBEDDING:return"Embedding";case s.UG.RERANKER:return"Reranker";case s.UG.FUNCTION:return"Function";case s.UG.UNKNOWN:return"Unknown";default:return e}}function h(e){try{return JSON.parse(e)}catch(r){return e}}const g=(e,r)=>{if(!r)return[];const t=[],n={inputs:null===e||void 0===e?void 0:e.inputs,outputs:null===e||void 0===e?void 0:e.outputs,attributes:null===e||void 0===e?void 0:e.attributes,events:null===e||void 0===e?void 0:e.events};return(0,o.map)(n,((n,o)=>{if("events"===o)return void t.push(...((e,r)=>{const t=e.events;if(!t)return[];const n=[];return t.forEach(((t,o)=>{const s=t.attributes;s&&Object.keys(s).forEach((i=>{const a=i.toLowerCase().includes(r),u=D(t.name,o,i);a&&n.push({span:e,section:"events",key:u,isKeyMatch:!0,matchIndex:0});const c=JSON.stringify(s[i]).toLowerCase().split(r).length-1;for(let r=0;r<c;r++)n.push({span:e,section:"events",key:u,isKeyMatch:!1,matchIndex:r})}))})),n})(e,r));O(n).forEach((n=>{n.key.toLowerCase().includes(r)&&t.push({span:e,section:o,key:n.key,isKeyMatch:!0,matchIndex:0});const s=n.value.toLowerCase().split(r).length-1;for(let r=0;r<s;r++)t.push({span:e,section:o,key:n.key,isKeyMatch:!1,matchIndex:r})}))})),t};function m(e,r,t){var n,o;const s=r.toLowerCase().trim(),i=Object.values(t.spanTypeDisplayState).every((e=>e));if(""===s&&i)return{filteredTreeNodes:[e],matches:[]};const a=null!==(n=e.children)&&void 0!==n?n:[],u=[],c=[];a.forEach((e=>{const{filteredTreeNodes:r,matches:n}=m(e,s,t);u.push(...r),c.push(...n)}));const l=(null!==(o=e.title)&&void 0!==o?o:"").toLowerCase(),d=g(e,s),p=d.length>0||l.includes(s),f=!e.type||t.spanTypeDisplayState[e.type],h=p&&f,E=u.length>0,v=Y(e)>0;return h||t.showParents&&E||t.showExceptions&&v?{filteredTreeNodes:[{...e,children:u}],matches:d.concat(c)}:{filteredTreeNodes:u,matches:c}}function E(e,r){var t;if((0,o.isNil)(r)||(0,o.isNil)(e))return;if(e.key===r)return e;const n=null!==(t=e.children)&&void 0!==t?t:[];for(const o of n){const e=E(o,r);if(e)return e}}const v=(e,r,t,n,s,a)=>{var u,l,d,f,g,m;const E=h(null===(u=e.attributes)||void 0===u?void 0:u["mlflow.spanType"]),v=h(null===(l=e.attributes)||void 0===l?void 0:l["mlflow.spanInputs"]),y=h(null===(d=e.attributes)||void 0===d?void 0:d["mlflow.spanOutputs"]),N=A(e),w=T(e),S=null!==(f=s[w])&&void 0!==f?f:[];var L;N||S.push(...null!==(L=s[""])&&void 0!==L?L:[]);const _=((e,r)=>{var t,n;const o=null!==(t=W(e))&&void 0!==t?t:[],s=null!==(n=W(r))&&void 0!==n?n:[];if(0!==o.length&&0!==s.length)return o.concat(s)})(v,y),I=((e,r)=>{var t;return Array.isArray(e)&&e.every(P)?e:Array.isArray(null===r||void 0===r?void 0:r.tools)&&null!==r&&void 0!==r&&null!==(t=r.tools)&&void 0!==t&&t.every(P)?r.tools:void 0})(h(null===(g=e.attributes)||void 0===g?void 0:g["mlflow.chat.tools"]),v),U=(0,o.mapValues)((0,o.omitBy)(e.attributes,((e,r)=>r.startsWith("mlflow."))),(e=>h(e))),b=e.events,O=(Number(R(e))-r)/1e3,x=(Number(null!==(m=M(e))&&void 0!==m?m:t)-r)/1e3;return{title:e.name,icon:(0,c.Y)(i.P,{type:p(E),hasException:Y(e)>0,isRootSpan:!N}),type:E,key:w,start:O,end:x,children:n,inputs:v,outputs:y,attributes:U,events:b,chatMessages:_,chatTools:I,parentId:N,assessments:S,traceId:a}},y=(e,r)=>{if(r)try{return(e=>{const r=atob(e),t=r.length;let n="";for(let o=0;o<t;o++)n+=r.charCodeAt(o).toString(16).padStart(2,"0");return n})(e)}catch(t){return e}return e.startsWith("0x")?e.slice(2):e};function N(e){return"trace_metadata"in e}function w(e){return"start_time_unix_nano"in e}function T(e){var r,t;return w(e)?y(e.span_id,!0):y(null!==(r=null===(t=e.context)||void 0===t?void 0:t.span_id)&&void 0!==r?r:"",!1)}function A(e){var r;return w(e)?y(e.parent_span_id,!0):y(null!==(r=e.parent_id)&&void 0!==r?r:"",!1)}function R(e){return w(e)?Number(e.start_time_unix_nano):Number(e.start_time)}function M(e){return w(e)?Number(e.end_time_unix_nano):Number(e.end_time)}function S(e){var r;return N(e.info)?e.info.trace_id:null!==(r=e.info.request_id)&&void 0!==r?r:""}function L(e){var r,t;const n=S(e),a=null!==(r=null===(t=e.trace_data)||void 0===t?void 0:t.spans)&&void 0!==r?r:e.data.spans,u={},l={};a.forEach((e=>{const r=T(e);u[r]=e,l[r]=[]})),a.forEach((e=>{const r=T(e),t=A(e);if(t){if(!l[t])throw new Error("Tree structure is malformed!");l[t].push(r)}}));const d=a.find((e=>!A(e)));if((0,o.isNil)(d))return null;return function r(t){var o,a,f;const h=u[t],g=Number(R(d)),m=Number(M(d)),E=l[t].map(r),y=_(e.info);if(w(h)||"parent_id"in h)return v(h,g,m,E,y,n);const N=null!==(o=h.span_type)&&void 0!==o?o:s.UG.UNKNOWN;return{title:h.name,icon:(0,c.Y)(i.P,{type:p(N)}),type:N,key:h.context.span_id,start:Number(h.start_time)-g,end:Number(null!==(a=h.end_time)&&void 0!==a?a:m)-g,children:E,inputs:h.inputs,outputs:h.outputs,attributes:h.attributes,events:h.events,parentId:null!==(f=h.parent_id)&&void 0!==f?f:h.parent_span_id,assessments:[],traceId:n}}(T(d))}const _=e=>{let r=[];var t;N(e)?r=null!==(t=e.assessments)&&void 0!==t?t:[]:r=I(e.tags);const n=(0,o.keyBy)(r,"assessment_id");Object.values(n).forEach((e=>{if(e.overrides){const r=n[e.overrides];e.overriddenAssessment=r}})),r=Object.values(n);const s=r.reduce(((e,r)=>{var t;const n=null!==(t=r.span_id)&&void 0!==t?t:"";return e[n]||(e[n]=[]),e[n].push(r),e}),{});return Object.keys(s).forEach((e=>{s[e].sort(((e,r)=>new Date(r.last_update_time).getTime()-new Date(e.last_update_time).getTime()))})),s},I=e=>{if(!e)return[];return(Array.isArray(e)?e:Object.entries(e).map((([e,r])=>({key:e,value:r})))).filter((({key:e})=>e.startsWith("mlflow.assessment."))).map((({value:e})=>JSON.parse(e)))};function U(e){var r;if(e)return(0,o.isArray)(e)?null===(r=e.find((e=>e.key===s.jQ)))||void 0===r?void 0:r.value:e[s.jQ]}const b=e=>{var r;const t=null===e||void 0===e?void 0:e.info,n=null===e||void 0===e?void 0:e.data;if(!t||!n||null===n||void 0===n||!n.spans)return!1;const o=null!==(r=null===t||void 0===t?void 0:t.request_metadata)&&void 0!==r?r:null===t||void 0===t?void 0:t.trace_metadata;if(o&&U(o))return!0;const s=null===t||void 0===t?void 0:t.tags;return!(!s||!U(s))},O=e=>(0,o.isNil)(e)?[]:Array.isArray(e)||(0,o.isString)(e)||(0,o.isNumber)(e)||(0,o.isBoolean)(e)?[{key:"",value:JSON.stringify(e,null,2)}]:Object.entries(e).map((([e,r])=>({key:e,value:JSON.stringify(r,null,2)}))),x=({searchFilter:e,data:r,activeMatchBackgroundColor:t,inactiveMatchBackgroundColor:s,containsActiveMatch:i,activeMatch:a,scrollToActiveMatch:u})=>{const l=new RegExp(`(${(0,o.escapeRegExp)(e.trim())})`,"gi"),d=r.split(l),p=[];let f=0;for(let o=0;o<d.length;o++)if(d[o].toLowerCase().includes(e.toLowerCase().trim())){const e=i&&a.matchIndex===f,r=e?t:s,l=(0,c.Y)("span",{ref:e?u:null,css:(0,n.AH)({backgroundColor:r,scrollMarginTop:50},""),children:d[o]},o);f++,p.push(l)}else p.push(d[o]);return p},C=e=>(0,o.has)(e,"page_content"),k=e=>e.type===s.UG.RETRIEVER&&Array.isArray(e.outputs)&&e.outputs.length>0&&(0,o.every)(e.outputs,C),D=(e,r,t)=>`${e}-${r}-${t}`,G=e=>{var r;return(null!==(r=e.events)&&void 0!==r?r:[]).filter((e=>"exception"===e.name))},Y=e=>G(e).length,F=e=>!(0,o.isNil)(e)&&(!(!(0,o.isNil)(e.type)&&!(0,o.isString)(e.type))&&(!(!(0,o.isNil)(e.description)&&!(0,o.isString)(e.description))&&!(!(0,o.isNil)(e.enum)&&!Array.isArray(e.enum)))),P=e=>{var r;if((0,o.isNil)(e)||"function"!==e.type||!(0,o.has)(e,"function.name"))return!1;const t=null===(r=e.function)||void 0===r?void 0:r.parameters;if(!(0,o.isNil)(t)){const e=t.required;if(!(0,o.isNil)(e)&&(!Array.isArray(e)||!e.every(o.isString)))return!1;const r=t.properties;if(!(0,o.isNil)(r)&&!Object.values(r).every(F))return!1}return!0},q=e=>{var r,t;return e&&(0,o.isString)(e.id)&&(0,o.isString)(null===(r=e.function)||void 0===r?void 0:r.arguments)&&(0,o.isString)(null===(t=e.function)||void 0===t?void 0:t.name)},H=e=>!(!(0,o.isNil)(e)&&!(0,o.isString)(e))||!!(0,o.isArray)(e)&&e.every((e=>(e=>{switch(e.type){case"text":case"input_text":case"output_text":return(0,o.isString)(e.text);case"image_url":const{image_url:r}=e;return!(0,o.isNil)(r)&&(0,o.isString)(r.url)&&((0,o.isNil)(r.detail)||["auto","low","high"].includes(r.detail));case"input_audio":const{input_audio:t}=e;return!(0,o.isNil)(t)&&(0,o.isString)(t.data)&&((0,o.isNil)(t.format)||["wav","mp3"].includes(t.format));default:return!1}})(e))),K=e=>{if(!e)return!1;if(e.tool_calls){if(!Array.isArray(e.tool_calls))return!1;if(!e.tool_calls.every(q))return!1}return"reasoning"===e.type||!!H(e.content)&&("user"===e.role||"assistant"===e.role||"system"===e.role||"tool"===e.role)},j=e=>Array.isArray(e)&&e.length>0&&e.every((e=>{return(0,o.has)(e,"message")&&(r=e.message,!!K(r)&&((0,o.isNil)(r.content)||(0,o.isString)(r.content)));var r})),B=e=>e&&j(e.choices),W=e=>{try{if(Array.isArray(e)&&e.length>0&&e.every(K))return(0,o.compact)(e.map(Q));const r=(0,a.HD)(e);if(r)return r;const t=(0,u.H)(e);if(t)return t;const n=(0,a.W3)(e);if(n)return n;const s=(0,a.a8)(e);if(s)return s;const i=(0,a.oI)(e);if(i)return i;const c=(0,a.bS)(e);if(c)return c;const l=(0,a.n_)(e);if(l)return l;const d=(0,a.AG)(e);if(d)return d;const p=(0,a.iU)(e);if(p)return p;const f=(0,a.Pn)(e);if(f)return f;const h=(0,a.DE)(e);if(h)return h;const g=(0,a.Sy)(e);if(g)return g;const m=(0,a.KF)(e);if(m)return m;const E=(0,a.pL)(e);return E||null}catch(r){return null}},V=e=>{var r;let t=null===(r=e.function)||void 0===r?void 0:r.arguments;try{t=JSON.stringify(JSON.parse(t),null,2)}catch(n){}return{id:e.id,function:{arguments:t,name:e.function.name}}},$=e=>{if((0,o.isNil)(e)||(0,o.isString)(e))return e;return e.map((e=>{var r;switch(e.type){case"text":case"input_text":case"output_text":return e.text;case"image_url":const t=null===e||void 0===e||null===(r=e.image_url)||void 0===r?void 0:r.url;return t?`![](${t})`:"[image]";case"input_audio":return"[audio]"}})).filter((e=>void 0!==e)).join("\n\n")},Q=e=>{var r;return"reasoning"===e.type?null:{...e,content:$(e.content),tool_calls:null===(r=e.tool_calls)||void 0===r?void 0:r.map(V)}}},48563:function(e,r,t){t.d(r,{Dy:function(){return a},O5:function(){return o},So:function(){return s},UG:function(){return i},VZ:function(){return u},cC:function(){return c},jQ:function(){return n}});const n="mlflow.trace_schema.version",o="response",s="trace";let i=function(e){return e.LLM="LLM",e.CHAIN="CHAIN",e.AGENT="AGENT",e.TOOL="TOOL",e.FUNCTION="FUNCTION",e.CHAT_MODEL="CHAT_MODEL",e.RETRIEVER="RETRIEVER",e.PARSER="PARSER",e.EMBEDDING="EMBEDDING",e.RERANKER="RERANKER",e.UNKNOWN="UNKNOWN",e}({}),a=function(e){return e.MODELS="models",e.DOCUMENT="document",e.CONNECT="connect",e.SEARCH="search",e.SORT="sort",e.UNKNOWN="unknown",e.FUNCTION="function",e.CODE="code",e.NUMBERS="numbers",e.WRENCH="wrench",e.AGENT="agent",e.CHAIN="chain",e.USER="user",e.SYSTEM="system",e}({}),u=function(e){return e.LLM="LLM",e.CHAIN="CHAIN",e.AGENT="AGENT",e.TOOL="TOOL",e.CHAT_MODEL="CHAT_MODEL",e.RETRIEVER="RETRIEVER",e.PARSER="PARSER",e.EMBEDDING="EMBEDDING",e.RERANKER="RERANKER",e.UNKNOWN="UNKNOWN",e}({}),c=function(e){return e.JSON="json",e.TEXT="text",e.MARKDOWN="markdown",e}({})},75060:function(e,r,t){async function n(e){try{const r=await fetch(`/ajax-api/2.0/mlflow/get-trace-artifact?request_id=${e}`),t=await r.text(),n=JSON.parse(t);return n.spans?{info:{request_id:e},data:n}:n.error_code?n.message:"Unknown error occurred"}catch(r){return r instanceof Error?r.message:"string"===typeof r?r:"Unknown error occurred"}}t.d(r,{g:function(){return n}})},87956:function(e,r,t){t.d(r,{$:function(){return f}});var n=t(89555),o=t(31014),s=t(13062),i=t(37523),a=t(88443),u=t(30576),c=t(50111);const l=(e,r)=>{const t=new URLSearchParams;return t.append("selectedTraceId",e),t.append("compareRunsMode","TRACES"),`/#/experiments/${r}?${t.toString()}`};var d={name:"1elrbzk",styles:"width:calc(100% - 2px)"},p={name:"inxa61",styles:"flex:1;overflow:hidden"};const f=()=>{const e=(0,o.useMemo)((()=>new URLSearchParams(window.location.search).getAll("trace_id")),[]),r=(0,o.useMemo)((()=>new URLSearchParams(window.location.search).getAll("experiment_id")),[]),[t,f]=(0,o.useState)(e.length>0?0:null),[h,g]=(0,o.useState)(null),[m,E]=(0,o.useState)(!0),[v,y]=(0,o.useState)(null),{theme:N}=(0,s.u)();return(0,o.useEffect)((()=>{(async()=>{if(null===t)return;E(!0);const r=e[t],n=await(0,u.getTraceArtifact)(r);"string"===typeof n?y(n):g(n),E(!1)})()}),[t,e]),0===e.length||null===t?null:m?(0,c.Y)("div",{css:d,children:(0,c.Y)(s.T.Text,{color:"secondary",children:(0,c.Y)(a.A,{id:"JJFZ1V",defaultMessage:"Fetching trace data..."})})}):h?(0,c.FD)("div",{css:(0,n.AH)({display:"flex",flexDirection:"column",border:`1px solid ${N.colors.border}`,height:"calc(100% - 2px)"},""),children:[(0,c.FD)("div",{css:(0,n.AH)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${N.spacing.xs}px ${N.spacing.md}px`},""),children:[(0,c.FD)("div",{css:(0,n.AH)({display:"flex",alignItems:"center",gap:N.spacing.sm},""),children:[(0,c.Y)(s.T.Title,{level:4,withoutMargins:!0,children:"MLflow Trace UI"}),(0,c.Y)(i.InfoTooltip,{componentId:"mlflow.notebook.trace-ui-info",iconTitle:"More information",maxWidth:400,content:(0,c.Y)(a.A,{id:"LED2z5",defaultMessage:"To disable or enable this display, call {disableFunction} or {enableFunction} and re-run the cell",values:{disableFunction:(0,c.Y)("code",{children:"mlflow.tracing.disable_notebook_display()"}),enableFunction:(0,c.Y)("code",{children:"mlflow.tracing.enable_notebook_display()"})}})}),(0,c.Y)(s.T.Link,{componentId:"mlflow.notebook.trace-ui-learn-more-link",href:"https://mlflow.org/docs/latest/llms/tracing/index.html?ref=jupyter-notebook-widget",openInNewTab:!0,title:"Learn More",children:(0,c.Y)(a.A,{id:"uIY1qq",defaultMessage:"Learn More"})})]}),(0,c.Y)(s.T.Link,{componentId:"mlflow.notebook.trace-ui-see-in-mlflow-link",href:l(e[t],r[t]),openInNewTab:!0,title:"View in MLflow UI",children:(0,c.Y)(a.A,{id:"4NyhOm",defaultMessage:"View in MLflow UI"})})]}),e.length>1&&(0,c.Y)(i.Pagination,{componentId:"mlflow.notebook.pagination",currentPageIndex:t+1,dangerouslySetAntdProps:{showQuickJumper:!0},numTotal:e.length,onChange:e=>f(e-1),pageSize:1,style:{marginBottom:N.spacing.sm,paddingLeft:N.spacing.sm,paddingRight:N.spacing.sm}}),(0,c.Y)("div",{css:p,children:(0,c.Y)(u.ModelTraceExplorer,{modelTrace:h,initialActiveView:"detail"})})]}):(0,c.Y)("div",{css:(0,n.AH)({paddingTop:N.spacing.md,width:"calc(100% - 2px)"},""),children:(0,c.Y)(i.Empty,{image:(0,c.Y)(s.l,{}),description:(0,c.FD)(c.FK,{children:[(0,c.Y)(s.T.Paragraph,{children:(0,c.Y)(a.A,{id:"UD4Z+e",defaultMessage:"An error occurred while attempting to fetch trace data (ID: {traceId}). Please ensure that the MLflow tracking server is running, and that the trace data exists. Error details:",values:{traceId:e[t]}})}),v&&(0,c.Y)(s.T.Paragraph,{children:v})]}),title:(0,c.Y)(a.A,{id:"md81Lo",defaultMessage:"Error"})})})}},94026:function(e,r,t){t.d(r,{wY:function(){return o}});var n=t(31014);t(18930);function o({ref:e,debounceTimeMs:r}){const t=(0,n.useRef)({width:-1,height:-1}),o=(0,n.useRef)(),[s,i]=(0,n.useState)(null),a=(0,n.useCallback)((e=>{if(0===e.length)return;const n=e[0].contentRect;if(-1===t.current.width)return t.current={width:n.width,height:n.height},void i(t.current);if(n.width!==t.current.width||n.height!==t.current.height){if(t.current.width=n.width,t.current.height=n.height,!r)return void i({...t.current});clearTimeout(o.current),o.current=setTimeout((()=>{i({...t.current})}),r)}}),[r]),u=(0,n.useRef)();return u.current||(u.current=new ResizeObserver(a)),(0,n.useEffect)((()=>{const r="function"===typeof e?e():e.current;if(r){const e=u.current;return e.observe(r),()=>e.unobserve(r)}})),s}t(39771)}}]);
//# sourceMappingURL=4769.6cfc83bf.chunk.js.map