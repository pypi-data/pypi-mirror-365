var $a=Object.defineProperty;var pa=(n,e,a)=>e in n?$a(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a;var we=(n,e,a)=>pa(n,typeof e!="symbol"?e+"":e,a);import{L as ma,M as ha,N as ya,O as Ca,P as wa,s as Dt,Q as _a,S as Rr,T as ps,U as Tt,V as ht,W as ir,X as dt,Y as Vt,Z as cr,_ as zs,$ as ka,a0 as Pa,a1 as xa,a2 as ba,a3 as Sa,a4 as Oa,a5 as Tr,a6 as Ra,a7 as Ta,a8 as Da,a9 as Ia,aa as Aa}from"../chunks/Bh3I2qVx.mjs";import{e as La,f as Ea,b as Ma}from"../chunks/03i4cObO.mjs";import{s as c,bc as mn,g as r,Q as hn,u as s,C as Na,aL as Ht,G as Dr,F as Ir,am as Ar,bd as Fa,as as Lr,p as Oe,e as ut,f as le,c as f,d as Re,aZ as Va,aY as pr,al as Ha,h as Z,i as U,_ as d,r as L,b as B,n as oe,j as q,k as $,l as ce,m as R,a as Xe,b7 as At,t as ee,aM as za,be as Ba}from"../chunks/3W_oWfQO.mjs";import{d as Ye,g as Qe,v as Ga,r as yn,y as Wa,z as ja,s as M,x as Cn,e as Se,c as wn,o as mr,t as qa}from"../chunks/BmEJtw2x.mjs";import{c as Vs}from"../chunks/CRgsyS55.mjs";import{b as hr,i as Er,S as Ua}from"../chunks/CGVk9MzW.mjs";import"../chunks/BbkoyQuY.mjs";import{i as Te}from"../chunks/BlVs9ZMX.mjs";import{b as ss}from"../chunks/DAG-5t49.mjs";import{p as G,i as Le,s as _n}from"../chunks/D_GJ3sV_.mjs";import{e4 as kn,t as lt,e5 as Bs,I as z,aw as nt,e6 as Qa,cc as qs,u as Ya,e7 as Ka,e8 as Xa,q as ft,U as qe,e9 as Za,ea as Ja,eb as eo,ec as to,ed as so,ee as ro,ef as no,eg as ao,eh as oo,ei as io,ej as lo,ek as uo,el as co,em as Mr,en as fo,eo as Nr,ep as go,eq as Pn,er as vo,es as $o,et as Fr,eu as po,ev as mo,ew as ho,ex as yo,ey as Vr,ez as Co,eA as wo,eB as _o,eC as ko,eD as Po,eE as xo,eF as bo,eG as So,eH as Oo,eI as Ro,eJ as To,eK as Do,eL as Io,eM as Ao,eN as Lo,eO as Eo,eP as Mo,eQ as xn,eR as No,eS as Fo,eT as Vo,eU as Ho,eV as zo,eW as Bo,eX as Go,eY as Wo,eZ as jo,e_ as qo,e$ as Uo,f0 as Qo,f1 as Yo,f2 as Ko,f3 as Xo,f4 as Zo,f5 as Jo,f6 as ei,f7 as ti,f8 as si,f9 as ri,fa as ni,fb as ai,fc as oi,fd as ii,fe as li,ff as ui,fg as ci,fh as di,fi,fj as Hr,fk as gi,fl as vi,fm as $i,fn as pi,fo as mi,fp as hi,fq as yi,fr as zr,fs as Ci,ft as bn,fu as Sn,fv as On,fw as wi,fx as _i,fy as ki,fz as Pi,fA as xi,fB as bi,fC as Si,fD as Oi,fE as Ri,fF as Ti,fG as Di,fH as Ii,fI as ys,fJ as dr,fK as Br,fL as Ai,fM as Rn,fN as Li,fO as Tn,fP as Ei,fQ as Dn,fR as Mi,fS as Gr,fT as Ni,fU as Fi,fV as In,fW as Vi,fX as Hi,fY as zi,fZ as Bi,f_ as Gi,f$ as Wi,g0 as ji,g1 as qi,g2 as Wr,g3 as Ui,g4 as An,cZ as Ln,dt as Qi,g5 as Yi,cI as En,cq as Ki,cp as Xi,co as Zi,g6 as Ji,g7 as el,g8 as tl,g9 as sl,ga as rl,gb as nl,gc as al,gd as ol,ge as il,gf as ll,gg as ul,gh as cl,gi as dl,gj as fl,gk as jr,dC as qr,gl as Ur,gm as gl,gn as Mn,go as vl,gp as Nn,gq as $l,gr as pl,gs as ml,gt as hl,gu as yl,gv as Cl,gw as Fn,gx as Gs,gy as wl,gz as Vn,gA as fr,gB as _l,gC as kl,gD as Pl,gE as xl,gF as bl,gG as Hn,gH as zn,gI as Sl,gJ as Bn,gK as Ol,gL as Rl,gM as Tl,gN as Dl,gO as Il,gP as Al,gQ as Qr,gR as Ll,gS as El,gT as Ml,gU as Nl,gV as Fl,gW as Vl,gX as Hl,gY as zl,gZ as Bl,g_ as Gl,g$ as Wl,h0 as jl,h1 as ql,h2 as Ul,h3 as Ql,h4 as Yl,h5 as Kl,h6 as Xl,h7 as Zl,V as Jl,h8 as eu,h9 as tu,ha as su,hb as ru,hc as nu,hd as au,he as ou,hf as iu,hg as Gn,hh as Yr,hi as lu,hj as uu,hk as cu,hl as du,hm as fu,hn as gu,ho as vu,hp as $u,hq as pu,hr as mu,hs as hu,ht as Kr,hu as yu,hv as Cu,hw as wu,hx as _u,hy as ku,hz as Pu,hA as xu,hB as Xr,hC as bu,hD as Su,hE as Ou}from"../chunks/CkMkW7fz.mjs";import{b as et}from"../chunks/CuVdaCGl.mjs";import{a as ye,s as Ue,b as xt,m as zt,d as se,e as Ru}from"../chunks/D-RwVtBd.mjs";import{C as Tu}from"../chunks/p4aQjqDo.mjs";import{e as _s,i as Us,R as je,p as Du}from"../chunks/CPzCNM5U.mjs";import{c as gr}from"../chunks/CAnfnSx8.mjs";import{T as gt}from"../chunks/C0afTjyW.mjs";import{b as tt,H as he,a as St,M as Wn}from"../chunks/CMiOjrpw.mjs";import{d as ks,M as jn,S as Iu,k as Au,l as Lu,m as Eu,p as Mu,a as qn,W as Nu,P as Fu,D as ms}from"../chunks/D6EVv7z6.mjs";import{a as Vu}from"../chunks/CcaWrs5J.mjs";import{C as Gt,R as Ps,a as ae,S as Je,E as Pt}from"../chunks/Cdp_8Ydg.mjs";import{c as xs,b as Ft}from"../chunks/DIbnkDWM.mjs";import{a as Ws,j as Hu,I as Zr,c as Un,$ as zu}from"../chunks/BPbldhH6.mjs";import{C as bt}from"../chunks/BmgbQDcC.mjs";import{j as Jr,S as Bu,g as en,p as Gu}from"../chunks/9FAI3DvX.mjs";import{W as Ke}from"../chunks/CaT9f6ay.mjs";import{m as Qn}from"../chunks/Dbye-yJ_.mjs";import{L as Wu,S as ju}from"../chunks/DpyGJR-3.mjs";import{I as qu}from"../chunks/nNuR9c6U.mjs";import{r as Uu}from"../chunks/DEDcLe-5.mjs";import{r as Cs}from"../chunks/DjHbddyg.mjs";import{k as Qu}from"../chunks/ByZLrhA1.mjs";import{ac as yr,B as Yn,A as Kn,y as tn,z as sn,C as Yu,D as Ku,E as Xu,H as rn,F as Zu,b as Ju,G as Xn,I as ec,M as tc,L as sc,J as rc,K as nc,N as ac}from"../chunks/BGtCXmPw.mjs";import{I as oc,i as ic,c as lc,C as uc,T as cc}from"../chunks/BhsTIGfM.mjs";import{t as ws,T as yt,c as dc,a as fc,e as gc}from"../chunks/DjBbzHvt.mjs";import{t as vc}from"../chunks/BBYwguW2.mjs";import{S as nn,a as $c}from"../chunks/DB8w6JNV.mjs";function pc(n){c(n,n.v+1)}function mc(n){let e=0,a=Na(0),i;return()=>{mn()&&(r(a),hn(()=>(e===0&&(i=s(()=>n(()=>pc(a)))),e+=1,()=>{Ht().then(()=>{e-=1,e===0&&(i==null||i(),i=void 0)})})))}}function hc(n,e){var a=Ar,i=Lr,t=n();const o=Ye(t,h=>{var y=t!==n(),l,p=Lr,g=Ar;Dr(i),Ir(a);try{l=Fa(()=>{hn(()=>{const v=n();y&&h(v)})})}finally{Dr(p),Ir(g)}return y=!0,l});return e?{set:e,update:h=>e(h(n())),subscribe:o.subscribe}:{subscribe:o.subscribe}}function yc(n){let e;const a=mc(t=>{let o=!1;const h=n.subscribe(y=>{e=y,o&&t()});return o=!0,h});function i(){return mn()?(a(),e):Qe(n)}return"set"in n?{get current(){return i()},set current(t){n.set(t)}}:{get current(){return i()}}}const Cc=Object.freeze(Object.defineProperty({__proto__:null,derived:Ga,fromStore:yc,get:Qe,readable:yn,readonly:Wa,toStore:hc,writable:Ye},Symbol.toStringTag,{value:"Module"}));function wc(n,e,...a){return _c(n,ic,e,a)}function _c(n,e,a,i){return function t(o,h){if(h>=i.length)return a(o);const y=new oc,l=i[h++];let p=-1;for(const g of o){const v=l(g,++p,o),w=y.get(v);w?w.push(g):y.set(v,[g])}for(const[g,v]of y)y.set(g,t(v,h));return e(y)}(n,0)}const kc=lc("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Pc(n,e){for(var a=-1,i=n==null?0:n.length,t=Array(i);++a<i;)t[a]=e(n[a],a,n);return t}var an=nn?nn.prototype:void 0,on=an?an.toString:void 0;function Zn(n){if(typeof n=="string")return n;if(ks(n))return Pc(n,Zn)+"";if(yr(n))return on?on.call(n):"";var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function xc(n){return n}var bc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sc=/^\w*$/;function Cr(n,e){if(ks(n))return!1;var a=typeof n;return a=="number"||a=="symbol"||a=="boolean"||n==null||yr(n)?!0:Sc.test(n)||!bc.test(n)||e!=null&&n in Object(e)}var Oc="Expected a function";function wr(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(Oc);var a=function(){var i=arguments,t=e?e.apply(this,i):i[0],o=a.cache;if(o.has(t))return o.get(t);var h=n.apply(this,i);return a.cache=o.set(t,h)||o,h};return a.cache=new(wr.Cache||jn),a}wr.Cache=jn;var Rc=500;function Tc(n){var e=wr(n,function(i){return a.size===Rc&&a.clear(),i}),a=e.cache;return e}var Dc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ic=/\\(\\)?/g,Ac=Tc(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(Dc,function(a,i,t,o){e.push(t?o.replace(Ic,"$1"):i||a)}),e});function Lc(n){return n==null?"":Zn(n)}function Jn(n,e){return ks(n)?n:Cr(n,e)?[n]:Ac(Lc(n))}function Qs(n){if(typeof n=="string"||yr(n))return n;var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function ea(n,e){e=Jn(e,n);for(var a=0,i=e.length;n!=null&&a<i;)n=n[Qs(e[a++])];return a&&a==i?n:void 0}function Ec(n,e,a){var i=n==null?void 0:ea(n,e);return i===void 0?a:i}var Mc=1,Nc=2;function Fc(n,e,a,i){var t=a.length,o=t;if(n==null)return!o;for(n=Object(n);t--;){var h=a[t];if(h[2]?h[1]!==n[h[0]]:!(h[0]in n))return!1}for(;++t<o;){h=a[t];var y=h[0],l=n[y],p=h[1];if(h[2]){if(l===void 0&&!(y in n))return!1}else{var g=new Iu,v;if(!(v===void 0?hr(p,l,Mc|Nc,i,g):v))return!1}}return!0}function ta(n){return n===n&&!$c(n)}function Vc(n){for(var e=Au(n),a=e.length;a--;){var i=e[a],t=n[i];e[a]=[i,t,ta(t)]}return e}function sa(n,e){return function(a){return a==null?!1:a[n]===e&&(e!==void 0||n in Object(a))}}function Hc(n){var e=Vc(n);return e.length==1&&e[0][2]?sa(e[0][0],e[0][1]):function(a){return a===n||Fc(a,n,e)}}function zc(n,e){return n!=null&&e in Object(n)}function Bc(n,e,a){e=Jn(e,n);for(var i=-1,t=e.length,o=!1;++i<t;){var h=Qs(e[i]);if(!(o=n!=null&&a(n,h)))break;n=n[h]}return o||++i!=t?o:(t=n==null?0:n.length,!!t&&Lu(t)&&Eu(h,t)&&(ks(n)||Mu(n)))}function Gc(n,e){return n!=null&&Bc(n,e,zc)}var Wc=1,jc=2;function qc(n,e){return Cr(n)&&ta(e)?sa(Qs(n),e):function(a){var i=Ec(a,n);return i===void 0&&i===e?Gc(a,n):hr(e,i,Wc|jc)}}function Uc(n){return function(e){return e==null?void 0:e[n]}}function Qc(n){return function(e){return ea(e,n)}}function Yc(n){return Cr(n)?Uc(Qs(n)):Qc(n)}function Kc(n){return typeof n=="function"?n:n==null?xc:typeof n=="object"?ks(n)?qc(n[0],n[1]):Hc(n):Yc(n)}function Xc(n,e,a){a=typeof a=="function"?a:void 0;var i=a?a(n,e):void 0;return i===void 0?hr(n,e,void 0,a):!!i}function Zc(n,e){for(var a,i=-1,t=n.length;++i<t;){var o=e(n[i]);o!==void 0&&(a=a===void 0?o:a+o)}return a}function Jc(n,e){return n&&n.length?Zc(n,Kc(e)):0}function vr(){let n;return[new Promise(a=>n=a),n]}class ed{constructor(e,a){we(this,"currentConfig");we(this,"currentAuxData");we(this,"configList");we(this,"cardStateCustomizer");we(this,"currentDeck");we(this,"deckLimits");we(this,"defaults");we(this,"addonComponents");we(this,"newCardsIgnoreReviewLimit");we(this,"applyAllParentLimits");we(this,"fsrs");we(this,"fsrsReschedule",Ye(!1));we(this,"fsrsHealthCheck");we(this,"legacyEvaluate");we(this,"daysSinceLastOptimization");we(this,"currentPresetName");we(this,"originalConfigsPromise");we(this,"originalConfigsResolve");we(this,"targetDeckId");we(this,"configs");we(this,"selectedIdx");we(this,"configListSetter");we(this,"modifiedConfigs",new Set);we(this,"removedConfigs",[]);we(this,"schemaModified");we(this,"_presetAssignmentsChanged",!1);we(this,"loadedPresets",new Set);var i,t;this.targetDeckId=e,this.currentDeck=a.currentDeck,this.defaults=a.defaults.config,this.configs=a.allConfig.map(o=>({config:o.config,useCount:o.useCount})),this.selectedIdx=Math.max(0,this.configs.findIndex(o=>o.config.id===this.currentDeck.configId)),this.sortConfigs(),this.cardStateCustomizer=Ye(a.cardStateCustomizer),this.deckLimits=Ye((t=(i=a.currentDeck)==null?void 0:i.limits)!=null?t:sd()),this.newCardsIgnoreReviewLimit=Ye(a.newCardsIgnoreReviewLimit),this.applyAllParentLimits=Ye(a.applyAllParentLimits),this.fsrs=Ye(a.fsrs),this.fsrsHealthCheck=Ye(a.fsrsHealthCheck),this.legacyEvaluate=a.fsrsLegacyEvaluate,this.daysSinceLastOptimization=Ye(a.daysSinceLastFsrsOptimize),this.configs[this.selectedIdx].useCount-=1,this.currentConfig=Ye(this.getCurrentConfig()),this.currentAuxData=Ye(this.getCurrentAuxData()),this.currentPresetName=Ye(this.configs[this.selectedIdx].config.name),this.configList=yn(this.getConfigList(),o=>{this.configListSetter=o}),this.schemaModified=a.schemaModified,this.addonComponents=Ye([]),Qe(this.configList),this.currentConfig.subscribe(o=>this.onCurrentConfigChanged(o)),this.currentAuxData.subscribe(o=>this.onCurrentAuxDataChanged(o)),this.loadedPresets.add(this.configs[this.selectedIdx].config.id),[this.originalConfigsPromise,this.originalConfigsResolve]=vr()}async markCurrentPresetAsLoaded(){const e=this.configs[this.selectedIdx].config.id,a=this.loadedPresets;if(e&&!a.has(e)){a.add(e);const i=await this.originalConfigsPromise,t=i.configs.findIndex(o=>o.id===e);t!==-1&&(i.configs[t]=Vs(this.configs[this.selectedIdx].config))}}setCurrentIndex(e){this.selectedIdx=e,this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList(),Ht().then(()=>this.markCurrentPresetAsLoaded())}getCurrentName(){return this.configs[this.selectedIdx].config.name}getCurrentNameForSearch(){return this.getCurrentName().replace(/([\\"])/g,"\\$1")}setCurrentName(e){if(this.configs[this.selectedIdx].config.name===e)return;const a=this.ensureNewNameUnique(e),i=this.configs[this.selectedIdx].config;i.name=a,i.id&&this.modifiedConfigs.add(i.id),this.sortConfigs(),this.updateConfigList()}addConfig(e){this.addConfigFrom(e,this.defaults)}cloneConfig(e){this.addConfigFrom(e,this.configs[this.selectedIdx].config.config)}addConfigFrom(e,a){const i=this.ensureNewNameUnique(e),o={config:new ma({id:0n,name:i,config:new ha(Vs(a))}),useCount:0};this.configs.push(o),this.selectedIdx=this.configs.length-1,this._presetAssignmentsChanged=!0,this.sortConfigs(),this.updateCurrentConfig(),this.updateConfigList()}removalWilLForceFullSync(){return!this.schemaModified&&this.configs[this.selectedIdx].config.id!==0n}defaultConfigSelected(){return this.configs[this.selectedIdx].config.id===1n}removeCurrentConfig(){const e=this.configs[this.selectedIdx].config.id;if(e===1n)throw Error("can't remove default config");e!==0n&&(this.removedConfigs.push(e),this.schemaModified=!0),this.configs.splice(this.selectedIdx,1);const a=Math.max(0,this.selectedIdx-1);this.setCurrentIndex(a)}dataForSaving(e){const i=[...this.configs.map(t=>t.config).filter((t,o)=>o!==this.selectedIdx&&(t.id===0n||this.modifiedConfigs.has(t.id))),this.configs[this.selectedIdx].config];return{targetDeckId:this.targetDeckId,removedConfigIds:this.removedConfigs,configs:i,mode:e,cardStateCustomizer:Qe(this.cardStateCustomizer),limits:Qe(this.deckLimits),newCardsIgnoreReviewLimit:Qe(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Qe(this.applyAllParentLimits),fsrs:Qe(this.fsrs),fsrsReschedule:Qe(this.fsrsReschedule),fsrsHealthCheck:Qe(this.fsrsHealthCheck)}}presetAssignmentsChanged(){return this._presetAssignmentsChanged}async save(e){await ya(this.dataForSaving(e))}onCurrentConfigChanged(e){const a=this.configs[this.selectedIdx].config;Er(e,a.config)||(a.config=e,a.id&&this.modifiedConfigs.add(a.id))}onCurrentAuxDataChanged(e){const a=this.getCurrentAuxData();Er(a,e)||this.currentConfig.update(i=>{const t=new TextEncoder().encode(JSON.stringify(e));return i.other=t,i})}ensureNewNameUnique(e){return this.configs.findIndex(i=>i.config.name===e)!==-1?e+(new Date().getTime()/1e3).toFixed(0):e}updateCurrentConfig(){this.currentConfig.set(this.getCurrentConfig()),this.currentAuxData.set(this.getCurrentAuxData())}updateConfigList(){var e;(e=this.configListSetter)==null||e.call(this,this.getConfigList()),this.currentPresetName.set(this.configs[this.selectedIdx].config.name)}getCurrentConfig(){return Vs(this.configs[this.selectedIdx].config.config)}getCurrentAuxData(){const e=this.configs[this.selectedIdx].config.config;return td(e.other)}sortConfigs(){const e=this.configs[this.selectedIdx].config.name;this.configs.sort((a,i)=>La(a.config.name,i.config.name,{sensitivity:"base"})),this.selectedIdx=this.configs.findIndex(a=>a.config.name==e)}getConfigList(){return this.configs.map((a,i)=>{const t=a.useCount+(i===this.selectedIdx?1:0);return{name:a.config.name,current:i===this.selectedIdx,idx:i,useCount:t}})}getAllConfigs(){return Vs({configs:this.configs.map(e=>e.config),cardStateCustomizer:Qe(this.cardStateCustomizer),limits:Qe(this.deckLimits),newCardsIgnoreReviewLimit:Qe(this.newCardsIgnoreReviewLimit),applyAllParentLimits:Qe(this.applyAllParentLimits),fsrs:Qe(this.fsrs),fsrsReschedule:Qe(this.fsrsReschedule),currentConfig:Qe(this.currentConfig)})}async isModified(){const e=await this.originalConfigsPromise,a=this.getAllConfigs();return!Xc(e,a,(i,t)=>{if(typeof i=="number"&&typeof t=="number")return Math.fround(i)===Math.fround(t)})}resolveOriginalConfigs(){this.originalConfigsResolve(this.getAllConfigs())}}function td(n){if(!n.length)return{};let e;try{e=JSON.parse(new TextDecoder().decode(n))}catch{return console.log("invalid json in deck config"),{}}return e.constructor!==Object?(console.log("invalid object in deck config"),{}):e}function sd(){return new Ca({})}class _t{constructor(e,a,i,t,o){we(this,"title");we(this,"value");we(this,"setter");we(this,"disabledValue");we(this,"startValue");we(this,"initialValue");this.title=e,this.value=this.initialValue=a,this.setter=i,this.disabledValue=t,this.startValue=o}reset(){this.setter(this.initialValue)}disable(){this.setter(this.disabledValue)}enable(e){var a,i;this.value=(i=(a=this.value)!=null?a:this.startValue)!=null?i:e,this.setter(this.value)}setValue(e){this.value=e,this.setter(e)}}async function _r(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),await Ht()}function hs(n){return n.fsrsParams6?n.fsrsParams6:n.fsrsParams5?n.fsrsParams5:n.fsrsParams4}const rd=async({params:n})=>{const e=Number(n.deckId),a=BigInt(e),i=await wa({did:a});return{state:new ed(BigInt(a),i)}},Wg=Object.freeze(Object.defineProperty({__proto__:null,load:rd},Symbol.toStringTag,{value:"Module"}));kn("svelte",ja);kn("svelte/store",Cc);function nd(n,e){Oe(e,!1);const[a,i]=Ue(),t=()=>ye(y,"$components",a),o=()=>ye(l,"$auxData",a);let h=G(e,"state",8);const y=h().addonComponents,l=h().currentAuxData;Te();var p=ut(),g=le(p);{var v=w=>{gt(w,{title:"Add-ons",children:(C,P)=>{var m=ut(),u=le(m);_s(u,1,t,Us,(S,x)=>{var E=ut(),W=le(E);gr(W,()=>r(x).component,(T,_)=>{_(T,_n(()=>r(x),{get data(){return zt(),o()},set data(D){xt(l,D)},$$legacy:!0}))}),f(S,E)}),f(C,m)},$$slots:{default:!0}})};Le(g,w=>{t(),s(()=>t().length)&&w(v)})}f(n,p),Re(),i()}function lr(n,e){let a,i;if(e instanceof Element){if(a=e,i=Array.prototype.indexOf.call(n,a),i<0)return null}else if(typeof e=="string"){const t=n.namedItem(e);if(!t||(a=t,i=Array.prototype.indexOf.call(n,a),i<0))return null}else if(e<0){i=n.length+e;const t=n.item(i);if(!t)return null;a=t}else{i=e;const t=n.item(i);if(!t)return null;a=t}return[a,i]}class ad{constructor(e){we(this,"parent");this.parent=e}insertElement(e,a){const i=lr(this.parent.children,a);if(!i)return-1;const[t,o]=i;return this.parent.insertBefore(e,t[0]),o}appendElement(e,a){var y;const i=lr(this.parent.children,a);if(!i)return-1;const[t,o]=i,h=(y=t.nextElementSibling)!=null?y:null;return this.parent.insertBefore(e,h),o+1}updateElement(e,a){const i=lr(this.parent.children,a);return i?(e(...i),!0):!1}}function od(n){return new ad(n)}function id(n){return n.nodeType===Node.ELEMENT_NODE}function ld(n){function e(i){Ha(n,i)}return[{get(){return pr(n)},available(){return Va(n)}},e]}function ud(n,e,a,i){const t=Ye([]);t.subscribe(e);function o(P,m){t.update(u=>(u.splice(P,0,m),u))}const[h,y]=vr(),l=h.then(od),p=Ye([]);async function g(P,m){const[u,S]=vr(),x=await l,E=n();function W(H){return!P.id||H.id===P.id}async function T(H,O){for(const N of H)for(const b of N.addedNodes){if(!id(b)||!W(b))continue;const F=m(b,x);return F>=0&&o(F,E),S(void 0),O.disconnect()}}new MutationObserver(T).observe(x.parent,{childList:!0});const D={component:P,hostProps:E};return p.update(H=>(H.push(D),H)),await u,{destroy(){p.update(H=>(Vu(H,D),H))}}}async function v(P,m){return(await l).updateElement((S,x)=>{t.update(E=>(E[x]=P(E[x]),E))},m)}const w=i({addComponent:g,updateProps:v});function C(){const P=n();return t.update(m=>(m.push(P),m)),P}return a({getProps:C}),{dynamicSlotted:p,resolveSlotContainer:y,slotsInterface:w}}function cd(){return{detach:Ye(!1)}}function dd({addComponent:n,updateProps:e}){function a(y,l=0){return n(y,(p,g)=>g.insertElement(p,l))}function i(y,l=-1){return n(y,(p,g)=>g.appendElement(p,l))}function t(y){return e(l=>(l.detach.set(!1),l),y)}function o(y){return e(l=>(l.detach.set(!0),l),y)}function h(y){return e(l=>(l.detach.update(p=>!p),l),y)}return{insert:a,append:i,show:t,hide:o,toggle:h}}const fd=Symbol("dynamicSlotting"),[ln,gd]=ld(fd);var vd=Z('<div class="dynamically-slottable svelte-8in7my"><!> <!></div>');function vt(n,e){Oe(e,!1);const[a,i]=Ue(),t=()=>ye(C,"$dynamicSlotted",a);function o(x){return x}let h=G(e,"slotHost",8),y=G(e,"createProps",8,cd),l=G(e,"updatePropsList",8,o),p=G(e,"setSlotHostContext",8,gd),g=G(e,"createInterface",8,dd);const{slotsInterface:v,resolveSlotContainer:w,dynamicSlotted:C}=ud(y(),l(),p(),g());let P=G(e,"api",8);Object.assign(P(),v),Te();var m=vd(),u=U(m);Dt(u,e,"default",{});var S=d(u,2);_s(S,1,t,({component:x,hostProps:E})=>x.id,(x,E)=>{let W=()=>r(E).component,T=()=>r(E).hostProps;var _=ut(),D=le(_);gr(D,h,(H,O)=>{O(H,{get id(){return W(),s(()=>W().id)},get hostProps(){return T()},children:(N,b)=>{var I=ut(),F=le(I);gr(F,()=>W().component,(Y,Q)=>{Q(Y,_n(()=>W().props))}),f(N,I)},$$slots:{default:!0}})}),f(x,_)}),L(m),qn(m,x=>w==null?void 0:w(x)),f(n,m),Re(),i()}var $d=Z('<div class="item svelte-u5rx4p"><!></div>');function te(n,e){var v;Oe(e,!1);const[a,i]=Ue(),t=()=>ye(y,"$detach",a);let o=G(e,"id",8,void 0),h=G(e,"hostProps",8,void 0);ln.available()||console.log("Item: should always have a slotHostContext");const{detach:y}=(v=h())!=null?v:ln.get().getProps();Te();var l=$d(),p=U(l);{var g=w=>{var C=ut(),P=le(C);Dt(P,e,"default",{}),f(w,C)};Le(p,w=>{t()||w(g)})}L(l),B(()=>lt(l,"id",o())),f(n,l),Re(),i()}var pd=Z(' <div class="inline-icon svelte-cpy9wq"><!></div>',1);function Bt(n,e){Oe(e,!1);let a=G(e,"title",8);Te(),oe();var i=pd(),t=le(i),o=d(t),h=U(o);Ws(h,{get icon(){return Hu}}),L(o),B(y=>{var l;M(t,`${(l=a())!=null?l:""} `),lt(o,"title",y)},[()=>($(z),s(()=>Bs()))],q),f(n,i),Re()}var md=Z('<details><summary><!></summary> <div class="text svelte-pjduvg"><textarea class="card-state-customizer form-control svelte-pjduvg" spellcheck="false" autocapitalize="none"></textarea></div></details>'),hd=Z('<div class="m-2"><!></div>');function yd(n,e){let a=G(e,"value",12),i=G(e,"title",8);var t=hd(),o=U(t);Gt(o,{children:(h,y)=>{var l=md(),p=U(l),g=U(p);Bt(g,{get title(){return i()}}),L(p);var v=d(p,2),w=U(v);Cn(w),L(v),L(l),xs(w,a),f(h,l)},$$slots:{default:!0,revert:(h,y)=>{Ps(h,{slot:"revert",defaultValue:"",get value(){return a()},set value(l){a(l)},$$legacy:!0})}}}),L(t),f(n,t)}var Cd=Z('<span class="invisible svelte-xwrhci"> </span>'),wd=Z('<span class="suffix svelte-xwrhci"></span>'),_d=Z('<div tabindex="-1" role="button"><!></div> <div tabindex="-1" role="button"><!></div>',1),kd=Z('<div class="spin-box svelte-xwrhci"><input type="number" pattern="[0-9]*" inputmode="numeric" class="svelte-xwrhci"/> <!> <!></div>');function ra(n,e){Oe(e,!1);const a=R();let i=G(e,"value",12),t=G(e,"step",8,1),o=G(e,"min",8,1),h=G(e,"max",8,9999),y=G(e,"percentage",8,!1),l=R(),p=G(e,"focused",12,!1),g=R();function v(A){Number.isNaN(A)||i(Math.min(h(),Math.max(o(),A))),Ht().then(()=>{At(l,r(l).value=r(C)),E(r(C))})}function w(A){if(Math.floor(A)===A)return 0;const j=A.toString().split(".")[1].length||0,K=y()?j-2:j;return Math.max(0,K)}let C=R();function P(){v(parseFloat(this.value)/r(g))}function m(A){p()&&(v(i()+(A.deltaY<0?t():-t())),A.preventDefault())}function u(A){v(i()+A),r(_)&&setTimeout(()=>u(A),D)}const S=[1500,1250,1e3,750,500,250];async function x(A){c(_,!0),D=128,c(H,setTimeout(A,250));for(const j of S)D=await new Promise(K=>setTimeout(()=>K(r(_)?D/2:128),j))}function E(A){c(T,Qa({pct:A}).replaceAll("%","-%-").split("-"))}function W(){E(r(l).value)}let T=R(),_=R(!1),D,H=R();ce(()=>$(y()),()=>{c(g,y()?100:1)}),ce(()=>($(i()),r(g),$(t())),()=>{c(C,(i()*r(g)).toFixed(w(t())))}),ce(()=>r(C),()=>{E(r(C))}),ce(()=>($(y()),r(T)),()=>{c(a,y()&&!r(T)[0]?"2.2ch":void 0)}),Xe(),Te();var O=kd(),N=U(O);nt(N);let b;ss(N,A=>c(l,A),()=>r(l));var I=d(N,2);{var F=A=>{var j=wd();_s(j,5,()=>r(T),Us,(K,re)=>{var ne=ut(),$e=le(ne);{var J=fe=>{var pe=ee("%");f(fe,pe)},be=fe=>{var pe=Cd(),ke=U(pe,!0);L(pe),B(()=>M(ke,r(re))),f(fe,pe)};Le($e,fe=>{r(re)=="%"?fe(J):fe(be,!1)})}f(K,ne)}),L(j),f(A,j)};Le(I,A=>{y()&&A(F)})}var Y=d(I,2);{var Q=A=>{var j=_d(),K=le(j);let re;var ne=U(K);Zr(ne,{children:(fe,pe)=>{Ws(fe,{get icon(){return Un}})},$$slots:{default:!0}}),L(K);var $e=d(K,2);let J;var be=U($e);Zr(be,{children:(fe,pe)=>{Ws(fe,{get icon(){return zu}})},$$slots:{default:!0}}),L($e),B((fe,pe,ke,Ve)=>{re=ft(K,1,"spinner decrement svelte-xwrhci",null,re,fe),lt(K,"title",pe),J=ft($e,1,"spinner increment svelte-xwrhci",null,J,ke),lt($e,"title",Ve)},[()=>({active:i()>o()}),()=>($(z),s(()=>Ka())),()=>({active:i()<h()}),()=>($(z),s(()=>Xa()))],q),Se("click",K,()=>{r(l).focus(),i()>o()&&u(-t())}),Se("mousedown",K,()=>x(()=>{i()>o()&&u(-t())})),Se("mouseup",K,()=>{clearTimeout(r(H)),c(_,!1)}),Se("click",$e,()=>{r(l).focus(),i()<h()&&u(t())}),Se("mousedown",$e,()=>x(()=>{i()<h()&&u(t())})),Se("mouseup",$e,()=>{clearTimeout(r(H)),c(_,!1)}),f(A,j)};Le(Y,A=>{$(Jr),s(Jr)&&A(Q)})}L(O),B(()=>{lt(N,"min",o()*r(g)),lt(N,"max",h()*r(g)),lt(N,"step",t()*r(g)),qs(N,r(C)),b=Ya(N,"",b,{"padding-left":r(a)})}),Se("blur",N,P),Se("change",N,P),Se("input",N,W),Se("focusin",N,()=>p(!0)),Se("focusout",N,()=>p(!1)),Se("wheel",O,m),f(n,O),Re()}var Pd=Z("<!> <!>",1),xd=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),bd=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function kt(n,e){let a=G(e,"value",12),i=G(e,"defaultValue",8),t=G(e,"min",8,0),o=G(e,"max",8,9999),h=G(e,"step",8,.01),y=G(e,"percentage",8,!1),l=G(e,"focused",12,!1);var p=bd(),g=le(p);qe(g,()=>({"--cols":13})),je(g.lastChild,{children:(v,w)=>{var C=xd(),P=le(C);qe(P,()=>({"--col-size":7})),bt(P.lastChild,{breakpoint:"xs",children:(u,S)=>{var x=ut(),E=le(x);Dt(E,e,"default",{}),f(u,x)},$$slots:{default:!0}}),L(P);var m=d(P,2);qe(m,()=>({"--col-size":6})),bt(m.lastChild,{breakpoint:"xs",children:(u,S)=>{je(u,{class:"flex-grow-1",children:(x,E)=>{var W=Pd(),T=le(W);Dt(T,e,"tabs",{});var _=d(T,2);Gt(_,{children:(D,H)=>{ra(D,{get min(){return t()},get max(){return o()},get step(){return h()},get percentage(){return y()},get value(){return a()},set value(O){a(O)},get focused(){return l()},set focused(O){l(O)},$$legacy:!0})},$$slots:{default:!0,revert:(D,H)=>{Ps(D,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(O){a(O)},$$legacy:!0})}}}),f(x,W)},$$slots:{default:!0}})},$$slots:{default:!0}}),L(m),f(v,C)},$$slots:{default:!0}}),L(g),f(n,p)}var Sd=Z("<!> <!>",1),Od=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Rd=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function at(n,e){let a=G(e,"value",12),i=G(e,"defaultValue",8),t=G(e,"min",8,0),o=G(e,"max",8,9999);var h=Rd(),y=le(h);qe(y,()=>({"--cols":13})),je(y.lastChild,{children:(l,p)=>{var g=Od(),v=le(g);qe(v,()=>({"--col-size":7})),bt(v.lastChild,{breakpoint:"xs",children:(C,P)=>{var m=ut(),u=le(m);Dt(u,e,"default",{}),f(C,m)},$$slots:{default:!0}}),L(v);var w=d(v,2);qe(w,()=>({"--col-size":6})),bt(w.lastChild,{breakpoint:"xs",children:(C,P)=>{je(C,{class:"flex-grow-1",children:(m,u)=>{var S=Sd(),x=le(S);Dt(x,e,"tabs",{});var E=d(x,2);Gt(E,{children:(W,T)=>{ra(W,{get min(){return t()},get max(){return o()},get value(){return a()},set value(_){a(_)},$$legacy:!0})},$$slots:{default:!0,revert:(W,T)=>{Ps(W,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(_){a(_)},$$legacy:!0})}}}),f(m,S)},$$slots:{default:!0}})},$$slots:{default:!0}}),L(w),f(l,g)},$$slots:{default:!0}}),L(y),f(n,h)}var Td=Z('<input type="date" class="svelte-67zife"/>'),Dd=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Id=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Ad=Z("<div><!></div>");function Ld(n,e){Oe(e,!1);let a=G(e,"date",12);ce(()=>$(a()),()=>{a(a()?a():"1970-01-01")}),Xe();var i=Ad(),t=U(i);Gt(t,{children:(o,h)=>{var y=Id(),l=le(y);qe(l,()=>({"--cols":13})),je(l.lastChild,{children:(p,g)=>{var v=Dd(),w=le(v);qe(w,()=>({"--col-size":7})),bt(w.lastChild,{breakpoint:"xs",children:(P,m)=>{var u=ut(),S=le(u);Dt(S,e,"default",{}),f(P,u)},$$slots:{default:!0}}),L(w);var C=d(w,2);qe(C,()=>({"--col-size":6})),bt(C.lastChild,{breakpoint:"xs",children:(P,m)=>{var u=Td();nt(u),xs(u,a),f(P,u)},$$slots:{default:!0}}),L(C),f(p,v)},$$slots:{default:!0}}),L(l),f(o,y)},$$slots:{default:!0}}),L(i),f(n,i),Re()}var Ed=Z("<!> <!> <!> <!> <!>",1),Md=Z("<!> <!> <!>",1),Nd=Z("<!> <!> <!> <!>",1);function Fd(n,e){Oe(e,!1);const[a,i]=Ue(),t=()=>ye(w,"$config",a),o=()=>ye(m,"$fsrs",a),h=()=>ye(P,"$cardStateCustomizer",a),y=R(),l=R(),p=R();let g=G(e,"state",8),v=G(e,"api",8);const w=g().currentConfig,C=g().defaults,P=g().cardStateCustomizer,m=g().fsrs,u={maximumInterval:{title:Pn(),help:go(),url:he.DeckOptions.maximumInterval},historicalRetention:{title:Nr(),help:fo(),sched:tt.FSRS},ignoreRevlogsBeforeMs:{title:Mr(),help:co(),sched:tt.FSRS},startingEase:{title:uo(),help:lo(),url:he.DeckOptions.startingEase,sched:tt.SM2},easyBonus:{title:io(),help:oo(),url:he.DeckOptions.easyBonus,sched:tt.SM2},intervalModifier:{title:ao(),help:no(),url:he.DeckOptions.intervalModifier,sched:tt.SM2},hardInterval:{title:ro(),help:so(),url:he.DeckOptions.hardInterval,sched:tt.SM2},newInterval:{title:to(),help:eo(),url:he.DeckOptions.newInterval,sched:tt.SM2},customScheduling:{title:Ja(),help:Za(),url:"https://faqs.ankiweb.net/the-2021-scheduler.html#add-ons-and-custom-scheduling",global:!0}},S=Object.values(u);let x=R(null),E="";function W(F){E!=F&&(_&&F&&F!="1970-01-01"?(E=F,_a({search:t().paramSearch||`preset:"${g().getCurrentNameForSearch()}" -is:suspended`,ignoreRevlogsBeforeDate:F}).then(Y=>{c(x,Y)})):c(x,null),_=!0)}let T=R(void 0),_=!0;const D=1e3;let H=R("alert-warning"),O=R(),N=R();function b(F){r(O).show(),r(N).to(F)}ce(()=>t(),()=>{c(y,t().maximumReviewInterval<50?"alert-danger":"alert-warning")}),ce(()=>(t(),z),()=>{c(l,t().maximumReviewInterval<180?vo():"")}),ce(()=>(r(T),t()),()=>{clearTimeout(r(T)),c(T,setTimeout(()=>{W(t().ignoreRevlogsBeforeDate)},D))}),ce(()=>r(x),()=>{r(x)&&(Number(r(x).included)/Number(r(x).total)<.1?c(H,"alert-danger"):r(x).included!=r(x).total?c(H,"alert-warning"):c(H,"alert-info"))}),ce(()=>(r(x),z),()=>{c(p,r(x)?$o({included:r(x).included.toString(),totalCards:r(x).total.toString()}):"")}),Xe(),Te();const I=q(()=>($(z),s(()=>Fr())));gt(n,{get title(){return r(I)},children:(F,Y)=>{vt(F,{get slotHost(){return te},get api(){return v()},children:(Q,A)=>{var j=Nd(),K=le(j);te(K,{children:(fe,pe)=>{at(fe,{get defaultValue(){return s(()=>C.maximumReviewInterval)},min:1,max:365*100,get value(){return t().maximumReviewInterval},set value(ke){se(w,s(t).maximumReviewInterval=ke,s(t))},children:(ke,Ve)=>{ae(ke,{$$events:{click:()=>b(Object.keys(u).indexOf("maximumInterval"))},children:(ue,Pe)=>{oe();var Ge=ee();B(()=>M(Ge,s(()=>u.maximumInterval.title))),f(ue,Ge)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var re=d(K,2);te(re,{children:(fe,pe)=>{Ke(fe,{get warning(){return r(l)},get className(){return r(y)}})},$$slots:{default:!0}});var ne=d(re,2);{var $e=fe=>{var pe=Ed(),ke=le(pe);te(ke,{children:(He,Ee)=>{kt(He,{get defaultValue(){return s(()=>C.initialEase)},min:1.31,max:5,get value(){return t().initialEase},set value(Ce){se(w,s(t).initialEase=Ce,s(t))},children:(Ce,_e)=>{ae(Ce,{$$events:{click:()=>b(Object.keys(u).indexOf("startingEase"))},children:(Me,Ne)=>{oe();var De=ee();B(()=>M(De,s(()=>u.startingEase.title))),f(Me,De)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Ve=d(ke,2);te(Ve,{children:(He,Ee)=>{kt(He,{get defaultValue(){return s(()=>C.easyMultiplier)},min:1,max:5,get value(){return t().easyMultiplier},set value(Ce){se(w,s(t).easyMultiplier=Ce,s(t))},children:(Ce,_e)=>{ae(Ce,{$$events:{click:()=>b(Object.keys(u).indexOf("easyBonus"))},children:(Me,Ne)=>{oe();var De=ee();B(()=>M(De,s(()=>u.easyBonus.title))),f(Me,De)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var ue=d(Ve,2);te(ue,{children:(He,Ee)=>{kt(He,{get defaultValue(){return s(()=>C.intervalMultiplier)},min:.5,max:2,get value(){return t().intervalMultiplier},set value(Ce){se(w,s(t).intervalMultiplier=Ce,s(t))},children:(Ce,_e)=>{ae(Ce,{$$events:{click:()=>b(Object.keys(u).indexOf("intervalModifier"))},children:(Me,Ne)=>{oe();var De=ee();B(()=>M(De,s(()=>u.intervalModifier.title))),f(Me,De)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Pe=d(ue,2);te(Pe,{children:(He,Ee)=>{kt(He,{get defaultValue(){return s(()=>C.hardMultiplier)},min:.5,max:1.3,get value(){return t().hardMultiplier},set value(Ce){se(w,s(t).hardMultiplier=Ce,s(t))},children:(Ce,_e)=>{ae(Ce,{$$events:{click:()=>b(Object.keys(u).indexOf("hardInterval"))},children:(Me,Ne)=>{oe();var De=ee();B(()=>M(De,s(()=>u.hardInterval.title))),f(Me,De)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Ge=d(Pe,2);te(Ge,{children:(He,Ee)=>{kt(He,{get defaultValue(){return s(()=>C.lapseMultiplier)},max:1,get value(){return t().lapseMultiplier},set value(Ce){se(w,s(t).lapseMultiplier=Ce,s(t))},children:(Ce,_e)=>{ae(Ce,{$$events:{click:()=>b(Object.keys(u).indexOf("newInterval"))},children:(Me,Ne)=>{oe();var De=ee();B(()=>M(De,s(()=>u.newInterval.title))),f(Me,De)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),f(fe,pe)},J=fe=>{var pe=Md(),ke=le(pe);kt(ke,{get defaultValue(){return s(()=>C.historicalRetention)},min:.5,max:1,percentage:!0,get value(){return t().historicalRetention},set value(Pe){se(w,s(t).historicalRetention=Pe,s(t))},children:(Pe,Ge)=>{ae(Pe,{$$events:{click:()=>b(Object.keys(u).indexOf("historicalRetention"))},children:(He,Ee)=>{oe();var Ce=ee();B(_e=>M(Ce,_e),[()=>($(z),s(()=>Nr()))],q),f(He,Ce)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ve=d(ke,2);te(Ve,{children:(Pe,Ge)=>{Ld(Pe,{get date(){return t().ignoreRevlogsBeforeDate},set date(He){se(w,s(t).ignoreRevlogsBeforeDate=He,s(t))},children:(He,Ee)=>{ae(He,{$$events:{click:()=>b(Object.keys(u).indexOf("ignoreRevlogsBeforeMs"))},children:(Ce,_e)=>{oe();var Me=ee();B(Ne=>M(Me,Ne),[()=>($(z),s(()=>Mr()))],q),f(Ce,Me)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var ue=d(Ve,2);te(ue,{children:(Pe,Ge)=>{Ke(Pe,{get warning(){return r(p)},get className(){return r(H)}})},$$slots:{default:!0}}),f(fe,pe)};Le(ne,fe=>{o()?fe(J,!1):fe($e)})}var be=d(ne,2);te(be,{children:(fe,pe)=>{yd(fe,{get title(){return s(()=>u.customScheduling.title)},get value(){return zt(),h()},set value(ke){xt(P,ke)},$$events:{click:()=>b(Object.keys(u).indexOf("customScheduling"))},$$legacy:!0})},$$slots:{default:!0}}),f(Q,j)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(F,Y)=>{const Q=q(()=>($(z),s(()=>Fr())));St(F,{get title(){return r(Q)},get url(){return $(he),s(()=>he.DeckOptions.advanced)},slot:"tooltip",get fsrs(){return o()},get helpSections(){return S},$$events:{mount:A=>{c(O,A.detail.modal),c(N,A.detail.carousel)}}})}}}),Re(),i()}var Vd=Z("<!> <!>",1);function Hd(n,e){Oe(e,!1);const[a,i]=Ue(),t=()=>ye(y,"$config",a);let o=G(e,"state",8),h=G(e,"api",8);const y=o().currentConfig,l=o().defaults,p={disableAutoplay:{title:yo(),help:ho()},skipQuestionWhenReplaying:{title:mo(),help:po()}},g=Object.values(p);let v=R(),w=R();function C(m){r(v).show(),r(w).to(m)}Te();const P=q(()=>($(z),s(()=>Vr())));gt(n,{get title(){return r(P)},children:(m,u)=>{vt(m,{get slotHost(){return te},get api(){return h()},children:(S,x)=>{var E=Vd(),W=le(E);te(W,{children:(_,D)=>{Je(_,{get defaultValue(){return s(()=>l.disableAutoplay)},get value(){return t().disableAutoplay},set value(H){se(y,s(t).disableAutoplay=H,s(t))},children:(H,O)=>{ae(H,{$$events:{click:()=>C(Object.keys(p).indexOf("disableAutoplay"))},children:(N,b)=>{oe();var I=ee();B(()=>M(I,s(()=>p.disableAutoplay.title))),f(N,I)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var T=d(W,2);te(T,{children:(_,D)=>{Je(_,{get defaultValue(){return s(()=>l.skipQuestionWhenReplayingAnswer)},get value(){return t().skipQuestionWhenReplayingAnswer},set value(H){se(y,s(t).skipQuestionWhenReplayingAnswer=H,s(t))},children:(H,O)=>{ae(H,{$$events:{click:()=>C(Object.keys(p).indexOf("skipQuestionWhenReplaying"))},children:(N,b)=>{oe();var I=ee();B(()=>M(I,s(()=>p.skipQuestionWhenReplaying.title))),f(N,I)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),f(S,E)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(m,u)=>{const S=q(()=>($(z),s(()=>Vr())));St(m,{get title(){return r(S)},get url(){return $(he),s(()=>he.DeckOptions.audio)},slot:"tooltip",get helpSections(){return g},$$events:{mount:x=>{c(v,x.detail.modal),c(w,x.detail.carousel)}}})}}}),Re(),i()}function un(){return[{label:So(),value:Tt.DECK},{label:Oo(),value:Tt.DECK_THEN_RANDOM_NOTES},{label:Ro(),value:Tt.LOWEST_POSITION},{label:To(),value:Tt.HIGHEST_POSITION},{label:Do(),value:Tt.RANDOM_NOTES},{label:Io(),value:Tt.RANDOM_CARDS}]}function cn(){return[{label:Ao(),value:ht.TEMPLATE},{label:Lo(),value:ht.NO_SORT},{label:Eo(),value:ht.TEMPLATE_THEN_RANDOM},{label:Mo(),value:ht.RANDOM_NOTE_THEN_TEMPLATE},{label:xn(),value:ht.RANDOM_CARD}]}function js(n){return[{label:Ho(),value:dt.DAY},{label:zo(),value:dt.DAY_THEN_DECK},{label:Bo(),value:dt.DECK_THEN_DAY},{label:Go(),value:dt.INTERVALS_ASCENDING},{label:Wo(),value:dt.INTERVALS_DESCENDING},...zd(n),{label:jo(),value:dt.RETRIEVABILITY_ASCENDING},{label:qo(),value:dt.RETRIEVABILITY_DESCENDING},{label:xn(),value:dt.RANDOM},{label:Uo(),value:dt.ADDED},{label:Qo(),value:dt.REVERSE_ADDED}]}function Hs(){return[{label:No(),value:ir.MIX_WITH_REVIEWS},{label:Fo(),value:ir.AFTER_REVIEWS},{label:Vo(),value:ir.BEFORE_REVIEWS}]}function dn(){return[{label:Jo(),value:Vt.SUSPEND},{label:ei(),value:Vt.TAG_ONLY}]}function fn(){return[{label:ti(),value:cr.DUE},{label:si(),value:cr.RANDOM}]}function gn(){return[{label:_o(),value:ps.BURY_CARD},{label:ko(),value:ps.ANSWER_AGAIN},{label:Po(),value:ps.ANSWER_GOOD},{label:xo(),value:ps.ANSWER_HARD},{label:bo(),value:ps.SHOW_REMINDER}]}function vn(){return[{label:Co(),value:Rr.SHOW_ANSWER},{label:wo(),value:Rr.SHOW_REMINDER}]}function zd(n){const e=[{label:n?Yo():Ko(),value:dt.EASE_ASCENDING},{label:n?Xo():Zo(),value:dt.EASE_DESCENDING}];return n&&e.reverse(),e}var Bd=Z("<!> <!> <!> <!> <!>",1);function Gd(n,e){Oe(e,!1);const[a,i]=Ue(),t=()=>ye(y,"$config",a);let o=G(e,"state",8),h=G(e,"api",8);const y=o().currentConfig,l=o().defaults,p={secondsToShowQuestion:{title:fi(),help:di()},secondsToShowAnswer:{title:ci(),help:ui()},waitForAudio:{title:li(),help:ii()},questionAction:{title:oi(),help:ai()},answerAction:{title:ni(),help:ri()}},g=Object.values(p);let v=R(),w=R();function C(m){r(v).show(),r(w).to(m)}Te();const P=q(()=>($(z),s(()=>Hr())));gt(n,{get title(){return r(P)},children:(m,u)=>{vt(m,{get slotHost(){return te},get api(){return h()},children:(S,x)=>{var E=Bd(),W=le(E);te(W,{children:(O,N)=>{kt(O,{get defaultValue(){return s(()=>l.secondsToShowQuestion)},step:.1,get value(){return t().secondsToShowQuestion},set value(b){se(y,s(t).secondsToShowQuestion=b,s(t))},children:(b,I)=>{ae(b,{$$events:{click:()=>C(Object.keys(p).indexOf("secondsToShowQuestion"))},children:(F,Y)=>{oe();var Q=ee();B(()=>M(Q,s(()=>p.secondsToShowQuestion.title))),f(F,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var T=d(W,2);te(T,{children:(O,N)=>{kt(O,{get defaultValue(){return s(()=>l.secondsToShowAnswer)},step:.1,get value(){return t().secondsToShowAnswer},set value(b){se(y,s(t).secondsToShowAnswer=b,s(t))},children:(b,I)=>{ae(b,{$$events:{click:()=>C(Object.keys(p).indexOf("secondsToShowAnswer"))},children:(F,Y)=>{oe();var Q=ee();B(()=>M(Q,s(()=>p.secondsToShowAnswer.title))),f(F,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var _=d(T,2);te(_,{children:(O,N)=>{Je(O,{get defaultValue(){return s(()=>l.waitForAudio)},get value(){return t().waitForAudio},set value(b){se(y,s(t).waitForAudio=b,s(t))},children:(b,I)=>{ae(b,{$$events:{click:()=>C(Object.keys(p).indexOf("waitForAudio"))},children:(F,Y)=>{oe();var Q=ee();B(()=>M(Q,s(()=>p.waitForAudio.title))),f(F,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var D=d(_,2);te(D,{children:(O,N)=>{const b=q(()=>($(vn),s(vn)));Pt(O,{get defaultValue(){return s(()=>l.questionAction)},get choices(){return r(b)},get value(){return t().questionAction},set value(I){se(y,s(t).questionAction=I,s(t))},children:(I,F)=>{ae(I,{$$events:{click:()=>C(Object.keys(p).indexOf("questionAction"))},children:(Y,Q)=>{oe();var A=ee();B(()=>M(A,s(()=>p.questionAction.title))),f(Y,A)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var H=d(D,2);te(H,{children:(O,N)=>{const b=q(()=>($(gn),s(gn)));Pt(O,{get defaultValue(){return s(()=>l.answerAction)},get choices(){return r(b)},get value(){return t().answerAction},set value(I){se(y,s(t).answerAction=I,s(t))},children:(I,F)=>{ae(I,{$$events:{click:()=>C(Object.keys(p).indexOf("answerAction"))},children:(Y,Q)=>{oe();var A=ee();B(()=>M(A,s(()=>p.answerAction.title))),f(Y,A)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),f(S,E)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(m,u)=>{const S=q(()=>($(z),s(()=>Hr())));St(m,{get title(){return r(S)},get url(){return $(he),s(()=>he.DeckOptions.autoAdvance)},slot:"tooltip",get helpSections(){return g},$$events:{mount:x=>{c(v,x.detail.modal),c(w,x.detail.carousel)}}})}}}),Re(),i()}var Wd=Z("<!> <!> <!>",1);function jd(n,e){Oe(e,!1);const[a,i]=Ue(),t=()=>ye(y,"$config",a);let o=G(e,"state",8),h=G(e,"api",8);const y=o().currentConfig,l=o().defaults,p=`

`+gi(),g={buryNewSiblings:{title:yi(),help:hi()+p},buryReviewSiblings:{title:mi(),help:pi()+p},buryInterdayLearningSiblings:{title:$i(),help:vi()+p}},v=Object.values(g);let w=R(),C=R();function P(u){r(w).show(),r(C).to(u)}Te();const m=q(()=>($(z),s(()=>zr())));gt(n,{get title(){return r(m)},children:(u,S)=>{vt(u,{get slotHost(){return te},get api(){return h()},children:(x,E)=>{var W=Wd(),T=le(W);te(T,{children:(H,O)=>{Je(H,{get defaultValue(){return s(()=>l.buryNew)},get value(){return t().buryNew},set value(N){se(y,s(t).buryNew=N,s(t))},children:(N,b)=>{ae(N,{$$events:{click:()=>P(Object.keys(g).indexOf("buryNewSiblings"))},children:(I,F)=>{oe();var Y=ee();B(()=>M(Y,s(()=>g.buryNewSiblings.title))),f(I,Y)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var _=d(T,2);te(_,{children:(H,O)=>{Je(H,{get defaultValue(){return s(()=>l.buryReviews)},get value(){return t().buryReviews},set value(N){se(y,s(t).buryReviews=N,s(t))},children:(N,b)=>{ae(N,{$$events:{click:()=>P(Object.keys(g).indexOf("buryReviewSiblings"))},children:(I,F)=>{oe();var Y=ee();B(()=>M(Y,s(()=>g.buryReviewSiblings.title))),f(I,Y)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var D=d(_,2);te(D,{children:(H,O)=>{Je(H,{get defaultValue(){return s(()=>l.buryInterdayLearning)},get value(){return t().buryInterdayLearning},set value(N){se(y,s(t).buryInterdayLearning=N,s(t))},children:(N,b)=>{ae(N,{$$events:{click:()=>P(Object.keys(g).indexOf("buryInterdayLearningSiblings"))},children:(I,F)=>{oe();var Y=ee();B(()=>M(Y,s(()=>g.buryInterdayLearningSiblings.title))),f(I,Y)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),f(x,W)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(u,S)=>{const x=q(()=>($(z),s(()=>zr())));St(u,{get title(){return r(x)},get url(){return $(he),s(()=>he.Studying.siblingsAndBurying)},slot:"tooltip",get helpSections(){return v},$$events:{mount:E=>{c(w,E.detail.modal),c(C,E.detail.carousel)}}})}}}),Re(),i()}function qd(){}var Ud=Z('<hr class="dropdown-divider"/>');function Qd(n){var e=Ud();f(n,e)}var Yd=Z('<div class="save svelte-ymxw35"> </div>'),Kd=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Xd=Z("<!> <!> <!> <!> <!> <!>",1),Zd=Z('<div class="d-flex"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!> <!></div>');function Jd(n,e){Oe(e,!1);const a=window.getComputedStyle(document.body).direction=="rtl",i=wn();let t=G(e,"state",8);async function o(){if(await Ht(),t().defaultConfigSelected()){alert(ki());return}const P=(t().removalWilLForceFullSync()?Pi()+" ":"")+xi({name:t().getCurrentName()});if(confirm(Ea(P)))try{t().removeCurrentConfig(),i("remove")}catch(m){alert(m)}}async function h(P){await _r(),t().save(P)}const y="Control+Enter";let l=R(!1);Te();var p=Zd(),g=U(p);const v=q(()=>($(en),s(()=>en(y))));qe(g,()=>({"--border-left-radius":a?"0":"var(--border-radius)","--border-right-radius":a?"var(--border-radius)":"0"})),Wu(g.lastChild,{primary:!0,get tooltip(){return r(v)},$$events:{click:()=>h(zs.NORMAL)},children:(P,m)=>{var u=Yd(),S=U(u,!0);L(u),B(x=>M(S,x),[()=>($(z),s(()=>Ci()))],q),f(P,u)},$$slots:{default:!0}}),L(g);var w=d(g,2);Bu(w,{keyCombination:y,$$events:{action:()=>h(zs.NORMAL)}});var C=d(w,2);Nu(C,{get show(){return r(l)},closeOnInsideClick:!0,inline:!0,$$events:{close:()=>c(l,!1)},$$slots:{reference:(P,m)=>{var u=Kd(),S=le(u);qe(S,()=>({"--border-right-radius":a?"0":"var(--border-radius)","--border-left-radius":a?"var(--border-radius)":"0"})),qu(S.lastChild,{class:"chevron",slot:"reference",iconSize:80,$$events:{click:()=>c(l,!r(l))},children:(x,E)=>{Ws(x,{get icon(){return Un}})},$$slots:{default:!0}}),L(S),f(P,u)},floating:(P,m)=>{Fu(P,{slot:"floating",children:(u,S)=>{var x=Xd(),E=le(x);ms(E,{$$events:{click:()=>i("add")},children:(O,N)=>{oe();var b=ee();B(I=>M(b,I),[()=>($(z),s(()=>bn()))],q),f(O,b)},$$slots:{default:!0}});var W=d(E,2);ms(W,{$$events:{click:()=>i("clone")},children:(O,N)=>{oe();var b=ee();B(I=>M(b,I),[()=>($(z),s(()=>Sn()))],q),f(O,b)},$$slots:{default:!0}});var T=d(W,2);ms(T,{$$events:{click:()=>i("rename")},children:(O,N)=>{oe();var b=ee();B(I=>M(b,I),[()=>($(z),s(()=>On()))],q),f(O,b)},$$slots:{default:!0}});var _=d(T,2);ms(_,{$$events:{click:o},children:(O,N)=>{oe();var b=ee();B(I=>M(b,I),[()=>($(z),s(()=>wi()))],q),f(O,b)},$$slots:{default:!0}});var D=d(_,2);Qd(D);var H=d(D,2);ms(H,{$$events:{click:()=>h(zs.APPLY_TO_CHILDREN)},children:(O,N)=>{oe();var b=ee();B(I=>M(b,I),[()=>($(z),s(()=>_i()))],q),f(O,b)},$$slots:{default:!0}}),f(u,x)},$$slots:{default:!0}})}}}),L(p),f(n,p),Re()}var ef=Z('<div class="modal fade" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true"><div class="modal-dialog"><div><div class="modal-header"><h5 class="modal-title" id="modalLabel"> </h5> <button type="button" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><form><div class="mb-3"><label for="prompt-input" class="col-form-label"> </label> <input id="prompt-input" type="text"/></div></form></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button> <button type="button" class="btn btn-primary">OK</button></div></div></div></div>');function tf(n,e){Oe(e,!1);const[a,i]=Ue(),t=()=>ye(Du,"$pageTheme",a),o=R();let h=G(e,"title",8),y=G(e,"prompt",8),l=G(e,"initialValue",8,""),p=G(e,"onOk",8);const g=Math.random().toString(36).substring(2),v=pr(Qn);let w=R(),C,P=R();function m(){p()(r(P).value),C.hide(),c(o,l())}function u(){C.hide(),c(o,l())}function S(){r(P).focus(),E(!0)}function x(){E(!1)}const{set:E,remove:W}=Uu(u);mr(()=>{r(w).addEventListener("shown.bs.modal",S),r(w).addEventListener("hidden.bs.modal",x),C=new Wn(r(w),{keyboard:!1}),v.set(g,C)}),qa(()=>{W(),r(w).removeEventListener("shown.bs.modal",S),r(w).removeEventListener("hidden.bs.modal",x)}),ce(()=>$(l()),()=>{c(o,l())}),Xe(),Te();var T=ef(),_=U(T),D=U(_);let H;var O=U(D),N=U(O),b=U(N,!0);L(N);var I=d(N,2);let F;L(O);var Y=d(O,2),Q=U(Y),A=U(Q),j=U(A),K=U(j);L(j);var re=d(j,2);nt(re);let ne;ss(re,pe=>c(P,pe),()=>r(P)),L(A),L(Q),L(Y);var $e=d(Y,2),J=U($e),be=d(J,2);L($e),L(D),L(_),L(T),ss(T,pe=>c(w,pe),()=>r(w)),B((pe,ke,Ve)=>{var ue;H=ft(D,1,"modal-content svelte-18qg9px",null,H,pe),M(b,h()),F=ft(I,1,"btn-close svelte-18qg9px",null,F,ke),M(K,`${(ue=y())!=null?ue:""}:`),ne=ft(re,1,"form-control svelte-18qg9px",null,ne,Ve)},[()=>({"default-colors":t().isDark}),()=>({invert:t().isDark}),()=>({nightMode:t().isDark})],q),xs(re,()=>r(o),pe=>c(o,pe)),Se("submit",Q,Gu(m)),Se("click",J,u),Se("click",be,m),f(n,T),et(e,"modalKey",g);var fe=Re({modalKey:g});return i(),fe}var sf=Z('<div class="button-bar svelte-1h7iokg"><!> <!></div>'),rf=Z('<!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function nf(n,e){Oe(e,!1);const[a,i]=Ue(),t=()=>ye(l,"$configList",a),o=R(),h=R();let y=G(e,"state",8);const l=y().configList,p=wn(),g=()=>p("presetchange");function v(I){const F=bi({decks:I.useCount});return`${I.name} (${F})`}function w(I){y().setCurrentIndex(I.detail.value),g()}function C(I){const F=I.trim();F.length&&(y().addConfig(F),g())}function P(I){const F=I.trim();F.length&&(y().cloneConfig(F),g())}function m(I){y().setCurrentName(I)}const u=pr(Qn);let S=R(),x=R(""),E=R(""),W=R(qd);function T(){c(E,bn()),c(W,C),c(x,""),u.get(r(S)).show()}function _(){c(E,Sn()),c(W,P),c(x,y().getCurrentName()),u.get(r(S)).show()}function D(){c(E,On()),c(W,m),c(x,y().getCurrentName()),u.get(r(S)).show()}ce(()=>t(),()=>{c(o,t().findIndex(I=>I.current))}),ce(()=>(t(),r(o)),()=>{c(h,v(t()[r(o)]))}),Xe(),Te();var H=rf(),O=le(H);const N=q(()=>($(z),s(()=>Si())));tf(O,{get title(){return r(E)},get prompt(){return r(N)},get initialValue(){return r(x)},get onOk(){return r(W)},get modalKey(){return r(S)},set modalKey(I){c(S,I)},$$legacy:!0});var b=d(O,2);qe(b,()=>({"--gutter-block":"0.5rem","--sticky-borders":"0 0 1px"})),ju(b.lastChild,{breakpoint:"sm",children:(I,F)=>{var Y=sf(),Q=U(Y);Ua(Q,{class:"flex-grow-1 mr1",get label(){return r(h)},get list(){return t()},parser:j=>({content:v(j),value:j.idx}),get value(){return r(o)},set value(j){c(o,j)},$$events:{change:w},$$legacy:!0});var A=d(Q,2);Jd(A,{get state(){return y()},$$events:{add:T,clone:_,rename:D,remove:g}}),L(Y),f(I,Y)},$$slots:{default:!0}}),L(b),f(n,H),Re(),i()}var af=Z('<li><button class="svelte-11xpnuy"> </button></li>'),of=Z('<ul class="svelte-11xpnuy"></ul>');function $r(n,e){Oe(e,!1);let a=G(e,"tabs",8),i=G(e,"value",12),t=R(o());function o(){const p=a().slice().reverse().findIndex(g=>g.value!==null);return p===-1?0:a().length-p-1}function h(p){for(const[g,v]of a().entries())p===g?v.enable(i()):p>g?v.reset():v.disable()}const y=p=>()=>c(t,p);ce(()=>r(t),()=>{h(r(t))}),ce(()=>($(a()),r(t)),()=>{var p;i((p=a()[r(t)].value)!=null?p:0)}),ce(()=>($(a()),r(t),$(i())),()=>{a()[r(t)].setValue(i())}),Xe(),Te();var l=of();_s(l,5,a,Us,(p,g,v)=>{var w=af();let C;var P=U(w),m=za(()=>y(v)),u=U(P,!0);L(P),L(w),B(S=>{C=ft(w,1,"svelte-11xpnuy",null,C,S),M(u,(r(g),s(()=>r(g).title)))},[()=>({active:r(t)===v})],q),Se("click",P,function(...S){var x;(x=r(m))==null||x.apply(this,S)}),f(p,w)}),L(l),f(n,l),Re()}var lf=Z("<!> <!> <!> <!> <!>",1);function uf(n,e){var A,j,K,re,ne,$e;Oe(e,!1);const[a,i]=Ue(),t=()=>ye(w,"$config",a),o=()=>ye(C,"$limits",a),h=()=>ye(m,"$newCardsIgnoreReviewLimit",a),y=()=>ye(u,"$applyAllParentLimits",a),l=R();let p=G(e,"state",8),g=G(e,"api",8);function v(){At(T,r(T)[0]=new _t(ys(),t().newPerDay,J=>se(w,s(t).newPerDay=J,s(t)),t().newPerDay,null)),At(_,r(_)[0]=new _t(ys(),t().reviewsPerDay,J=>se(w,s(t).reviewsPerDay=J,s(t)),t().reviewsPerDay,null))}const w=p().currentConfig,C=p().deckLimits,P=p().defaults,m=p().newCardsIgnoreReviewLimit,u=p().applyAllParentLimits,S=`

`+Oi()+`

`+Ri(),x=`

`+Ti()+S,E=Bs()+`

`+Di(),W=Bs()+`

`+Ii(),T=R([new _t(ys(),t().newPerDay,J=>se(w,s(t).newPerDay=J,s(t)),t().newPerDay,null),new _t(dr(),(A=o().new)!=null?A:null,J=>se(C,s(o).new=J!=null?J:void 0,s(o)),null,null),new _t(Br(),o().newTodayActive&&(j=o().newToday)!=null?j:null,J=>se(C,s(o).newToday=J!=null?J:void 0,s(o)),null,(K=o().newToday)!=null?K:null)]),_=R([new _t(ys(),t().reviewsPerDay,J=>se(w,s(t).reviewsPerDay=J,s(t)),t().reviewsPerDay,null),new _t(dr(),(re=o().review)!=null?re:null,J=>se(C,s(o).review=J!=null?J:void 0,s(o)),null,null),new _t(Br(),o().reviewTodayActive&&(ne=o().reviewToday)!=null?ne:null,J=>se(C,s(o).reviewToday=J!=null?J:void 0,s(o)),null,($e=o().reviewToday)!=null?$e:null)]);let D=R(0),H=R(0);const O={newLimit:{title:Dn(),help:Ei()+S,url:he.DeckOptions.newCardsday},reviewLimit:{title:Tn(),help:Li()+x,url:he.DeckOptions.maximumReviewsday},newCardsIgnoreReviewLimit:{title:Rn(),help:E,url:he.DeckOptions.newCardsday,global:!0},applyAllParentLimits:{title:Ai(),help:W,url:he.DeckOptions.limitsFromTop,global:!0}},N=Object.values(O);let b=R(),I=R();function F(J){r(b).show(),r(I).to(J)}ce(()=>(r(D),r(H),z),()=>{c(l,Math.min(9999,r(D)*10)>r(H)?Mi({cards:r(D),expected:Math.min(9999,r(D)*10)}):"")}),Xe(),Te();const Y=q(()=>($(z),s(()=>Gr())));gt(n,{get title(){return r(Y)},children:(J,be)=>{vt(J,{get slotHost(){return te},get api(){return g()},children:(fe,pe)=>{var ke=lf(),Ve=le(ke);te(Ve,{children:(Ee,Ce)=>{at(Ee,{get defaultValue(){return s(()=>P.newPerDay)},get value(){return r(D)},set value(_e){c(D,_e)},children:(_e,Me)=>{ae(_e,{$$events:{click:()=>F(Object.keys(O).indexOf("newLimit"))},children:(Ne,De)=>{oe();var ot=ee();B(()=>M(ot,s(()=>O.newLimit.title))),f(Ne,ot)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(_e,Me)=>{$r(_e,{slot:"tabs",get tabs(){return r(T)},get value(){return r(D)},set value(Ne){c(D,Ne)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var ue=d(Ve,2);te(ue,{children:(Ee,Ce)=>{at(Ee,{get defaultValue(){return s(()=>P.reviewsPerDay)},get value(){return r(H)},set value(_e){c(H,_e)},children:(_e,Me)=>{ae(_e,{$$events:{click:()=>F(Object.keys(O).indexOf("reviewLimit"))},children:(Ne,De)=>{oe();var ot=ee();B(()=>M(ot,s(()=>O.reviewLimit.title))),f(Ne,ot)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(_e,Me)=>{$r(_e,{slot:"tabs",get tabs(){return r(_)},get value(){return r(H)},set value(Ne){c(H,Ne)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var Pe=d(ue,2);te(Pe,{children:(Ee,Ce)=>{Ke(Ee,{get warning(){return r(l)}})},$$slots:{default:!0}});var Ge=d(Pe,2);te(Ge,{children:(Ee,Ce)=>{Je(Ee,{defaultValue:!1,get value(){return zt(),h()},set value(_e){xt(m,_e)},children:(_e,Me)=>{ae(_e,{$$events:{click:()=>F(Object.keys(O).indexOf("newCardsIgnoreReviewLimit"))},children:(Ne,De)=>{Bt(Ne,{get title(){return s(()=>O.newCardsIgnoreReviewLimit.title)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var He=d(Ge,2);te(He,{children:(Ee,Ce)=>{Je(Ee,{defaultValue:!1,get value(){return zt(),y()},set value(_e){xt(u,_e)},children:(_e,Me)=>{ae(_e,{$$events:{click:()=>F(Object.keys(O).indexOf("applyAllParentLimits"))},children:(Ne,De)=>{Bt(Ne,{get title(){return s(()=>O.applyAllParentLimits.title)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),f(fe,ke)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(J,be)=>{const fe=q(()=>($(z),s(()=>Gr())));St(J,{get title(){return r(fe)},get url(){return $(he),s(()=>he.DeckOptions.dailyLimits)},slot:"tooltip",get helpSections(){return N},$$events:{mount:pe=>{c(b,pe.detail.modal),c(I,pe.detail.carousel)}}})}}}),et(e,"onPresetChange",v);var Q=Re({onPresetChange:v});return i(),Q}var cf=Z("<!> <!> <!> <!> <!>",1);function df(n,e){Oe(e,!1);const[a,i]=Ue(),t=()=>ye(l,"$config",a),o=()=>ye(g,"$fsrs",a);let h=G(e,"state",8),y=G(e,"api",8);const l=h().currentConfig,p=h().defaults,g=h().fsrs,v=`

`+Ni();let w=R([]);const C={newGatherPriority:{title:qi(),help:ji()+v},newCardSortOrder:{title:Wi(),help:Gi()+v},newReviewPriority:{title:Bi(),help:zi()+v},interdayStepPriority:{title:Hi(),help:Vi()+v},reviewSortOrder:{title:In(),help:Fi()+v}},P=Object.values(C);let m=R(),u=R();function S(E){r(m).show(),r(u).to(E)}ce(()=>(t(),r(w),Tt),()=>{switch(t().newCardGatherPriority){case Tt.RANDOM_NOTES:c(w,[ht.TEMPLATE_THEN_RANDOM,ht.RANDOM_NOTE_THEN_TEMPLATE]);break;case Tt.RANDOM_CARDS:c(w,[ht.TEMPLATE_THEN_RANDOM,ht.RANDOM_NOTE_THEN_TEMPLATE,ht.RANDOM_CARD]);break;default:c(w,[]);break}r(w).includes(t().newCardSortOrder)&&se(l,s(t).newCardSortOrder=0,s(t)),t().newCardSortOrder in ht||se(l,s(t).newCardSortOrder=0,s(t))}),Xe(),Te();const x=q(()=>($(z),s(()=>Wr())));gt(n,{get title(){return r(x)},children:(E,W)=>{vt(E,{get slotHost(){return te},get api(){return y()},children:(T,_)=>{var D=cf(),H=le(D);te(H,{children:(F,Y)=>{const Q=q(()=>($(un),s(un)));Pt(F,{get defaultValue(){return s(()=>p.newCardGatherPriority)},get choices(){return r(Q)},get value(){return t().newCardGatherPriority},set value(A){se(l,s(t).newCardGatherPriority=A,s(t))},children:(A,j)=>{ae(A,{$$events:{click:()=>S(Object.keys(C).indexOf("newGatherPriority"))},children:(K,re)=>{oe();var ne=ee();B(()=>M(ne,s(()=>C.newGatherPriority.title))),f(K,ne)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var O=d(H,2);te(O,{children:(F,Y)=>{const Q=q(()=>($(cn),s(cn)));Pt(F,{get defaultValue(){return s(()=>p.newCardSortOrder)},get choices(){return r(Q)},get disabledChoices(){return r(w)},get value(){return t().newCardSortOrder},set value(A){se(l,s(t).newCardSortOrder=A,s(t))},children:(A,j)=>{ae(A,{$$events:{click:()=>S(Object.keys(C).indexOf("newCardSortOrder"))},children:(K,re)=>{oe();var ne=ee();B(()=>M(ne,s(()=>C.newCardSortOrder.title))),f(K,ne)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var N=d(O,2);te(N,{children:(F,Y)=>{const Q=q(()=>($(Hs),s(Hs)));Pt(F,{get defaultValue(){return s(()=>p.newMix)},get choices(){return r(Q)},get value(){return t().newMix},set value(A){se(l,s(t).newMix=A,s(t))},children:(A,j)=>{ae(A,{$$events:{click:()=>S(Object.keys(C).indexOf("newReviewPriority"))},children:(K,re)=>{oe();var ne=ee();B(()=>M(ne,s(()=>C.newReviewPriority.title))),f(K,ne)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var b=d(N,2);te(b,{children:(F,Y)=>{const Q=q(()=>($(Hs),s(Hs)));Pt(F,{get defaultValue(){return s(()=>p.interdayLearningMix)},get choices(){return r(Q)},get value(){return t().interdayLearningMix},set value(A){se(l,s(t).interdayLearningMix=A,s(t))},children:(A,j)=>{ae(A,{$$events:{click:()=>S(Object.keys(C).indexOf("interdayStepPriority"))},children:(K,re)=>{oe();var ne=ee();B(()=>M(ne,s(()=>C.interdayStepPriority.title))),f(K,ne)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var I=d(b,2);te(I,{children:(F,Y)=>{const Q=q(()=>($(js),o(),s(()=>js(o()))));Pt(F,{get defaultValue(){return s(()=>p.reviewOrder)},get choices(){return r(Q)},get value(){return t().reviewOrder},set value(A){se(l,s(t).reviewOrder=A,s(t))},children:(A,j)=>{ae(A,{$$events:{click:()=>S(Object.keys(C).indexOf("reviewSortOrder"))},children:(K,re)=>{oe();var ne=ee();B(()=>M(ne,s(()=>C.reviewSortOrder.title))),f(K,ne)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),f(T,D)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(E,W)=>{const T=q(()=>($(z),s(()=>Wr())));St(E,{get title(){return r(T)},get url(){return $(he),s(()=>he.DeckOptions.displayOrder)},slot:"tooltip",get helpSections(){return P},$$events:{mount:_=>{c(m,_.detail.modal),c(u,_.detail.carousel)}}})}}}),Re(),i()}var ff=Z('<textarea class="w-100 svelte-29jwoy"></textarea>');function gf(n,e){Oe(e,!1);let a=G(e,"value",12),i=G(e,"defaults",8),t=R(),o=R();function h(){r(o)&&(At(o,r(o).style.height="auto"),At(o,r(o).style.height=`${r(o).scrollHeight+2}px`))}function y(v){return v.map(w=>w.toFixed(4)).join(", ")}const l=[0,17,19,21];function p(v){const w=v.target,C=w.value.replace(/ /g,"").split(",").filter(P=>P).map(P=>Number(P));l.includes(C.length)?a(C):(alert(Ui()),w.value=r(t))}ce(()=>($(a()),Ht),()=>{c(t,y(a())),Ht().then(h)}),Xe(),Te();var g=ff();Se("resize",Ba,h),Cn(g),ss(g,v=>c(o,v),()=>r(o)),B(v=>{qs(g,r(t)),lt(g,"placeholder",v)},[()=>($(i()),s(()=>y(i())))],q),Se("blur",g,p),f(n,g),Re()}var vf=Z("<!> <!>",1);function $f(n,e){let a=G(e,"value",12),i=G(e,"defaultValue",8),t=G(e,"defaults",8);var o=vf(),h=le(o);Dt(h,e,"default",{});var y=d(h,2);Gt(y,{children:(l,p)=>{gf(l,{get defaults(){return t()},get value(){return a()},set value(g){a(g)},$$legacy:!0})},$$slots:{default:!0,revert:(l,p)=>{Ps(l,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(g){a(g)},$$legacy:!0})}}}),f(n,o)}var pf=Z('<input type="text" class="w-100 mb-1"/>');function mf(n,e){let a=G(e,"value",12),i=G(e,"placeholder",8);Gt(n,{children:(t,o)=>{var h=pf();nt(h),B(()=>lt(h,"placeholder",i())),xs(h,a),f(t,h)},$$slots:{default:!0}})}var Be=(n=>(n[n.time=0]="time",n[n.count=1]="count",n[n.memorized=2]="memorized",n))(Be||{}),Ae=(n=>(n[n.ratio=0]="ratio",n[n.time=1]="time",n[n.count=2]="count",n[n.memorized=3]="memorized",n))(Ae||{});function $n(n,e,a,i){const h=Yn().domain([70,99]).range([e.marginLeft,e.width-e.marginRight]),y={0:a.map(v=>({...v,y:v.timeCost/v.memorized})),1:a.map(v=>({...v,y:v.timeCost/v.learnSpan})),2:a.map(v=>({...v,y:v.count/v.learnSpan})),3:a.map(v=>({...v,y:v.memorized}))}[i],l=v=>i==1||i==0?ws(v,!0):v.toString(),p={0:v=>Yi({time:ws(v)}),1:v=>Qi({count:parseFloat((v/60).toPrecision(2))}),2:v=>Ln({count:Math.round(v)}),3:v=>An({memorized:Math.round(v).toFixed(0)})}[i];function g(v){return`Desired Retention: ${v}%<br>`}return na(n,e,y,h,l,p,g,(v,w)=>{})}function ur(n,e,a,i){const t=new Date,o=a.map(m=>({...m,x:new Date(t.getTime()+m.x*24*60*60*1e3)})),h={1:o.map(m=>({...m,y:m.count})),0:o.map(m=>({...m,y:m.timeCost})),2:o.map(m=>({...m,y:m.memorized}))}[i],y=t,l=Kn(h,m=>m.x),p=vc().domain([y,l]).range([e.marginLeft,e.width-e.marginRight]),g=m=>i==0?ws(m,!0):m.toString(),v={0:ws,1:m=>En({reviews:Math.round(m)}),2:m=>An({memorized:Math.round(m).toFixed(0)})}[i],w={1:Ln,0:({count:m})=>ws(m),2:Xi}[i];function C(m,u){const S=h.filter(W=>W.label==u),x=i==2?S[S.length-1].memorized-S[0].memorized:Jc(S,W=>W.y),E=x/((S==null?void 0:S.length)||1);Xn(`#${u}:<br/>
                ${Ki()}: ${w({count:E})}<br/>
                ${Zi()}: ${v(x)}`,m.pageX,m.pageY)}function P(m){const u=+((m.getTime()-Date.now())/864e5).toFixed();return`Date: ${Ma(m)}<br>In ${u} Days<br>`}return na(n,e,h,p,g,v,P,C)}function na(n,e,a,i,t,o,h,y){const l=tn(n);if(l.selectAll(".lines").remove(),l.selectAll(".hover-columns").remove(),l.selectAll(".focus-line").remove(),l.selectAll(".legend").remove(),a.length==0)return sn(l,!1),[];const p=l.transition().duration(600);l.select(".x-ticks").call(_=>_.transition(p).call(Yu(i).ticks(7).tickSizeOuter(0))).attr("direction","ltr");const g=Kn(a,_=>_.y),v=Yn().range([e.height-e.marginBottom,e.marginTop]).domain([0,g]).nice();l.select(".y-ticks").call(_=>_.transition(p).call(Ku(v).ticks(e.height/50).tickSizeOuter(0).tickFormat(t))).attr("direction","ltr"),l.select(".y-ticks .y-axis-title").remove(),l.select(".y-ticks").append("text").attr("class","y-axis-title").attr("transform","rotate(-90)").attr("y",0-e.marginLeft).attr("x",0-e.height/2).attr("font-size","1rem").attr("dy","1.1em").attr("fill","currentColor");const w=a.map(_=>[i(_.x),v(_.y),_.label]),C=wc(w,_=>Object.assign(_,{z:_[0][2]}),_=>_[2]),P=kc;l.append("g").attr("class","lines").attr("fill","none").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("path").data(Array.from(C.entries())).join("path").attr("vector-effect","non-scaling-stroke").attr("stroke",(_,D)=>P[D%P.length]).attr("d",_=>Xu()(_[1].map(D=>[D[0],D[1]]))).attr("data-group",_=>_[0]);const m=l.append("line").attr("class","focus-line").attr("y1",e.marginTop).attr("y2",e.height-e.marginBottom).attr("stroke","black").attr("stroke-width",1).style("opacity",0),u=Array.from(C.values()).reduce((_,D)=>_.length>D.length?_:D),S=e.width/u.length;l.append("g").attr("class","hover-columns").selectAll("rect").data(u).join("rect").attr("x",_=>_[0]-S/2).attr("y",e.marginTop).attr("width",S).attr("height",e.height-e.marginTop-e.marginBottom).attr("fill","transparent").on("mousemove",x).on("mouseout",()=>{m.style("opacity",0),rn()});function x(_,D){Zu(_,document.body);const H=i.invert(D[0]),O={};C.forEach((b,I)=>{const F=Ju(A=>i.invert(A[0])).left,Y=F(b,H),Q=b[Y];Q&&(O[I]=v.invert(Q[1]))}),m.attr("x1",D[0]).attr("x2",D[0]).style("opacity",1);let N=h(H);for(const[b,I]of Object.entries(O))l.select(`path[data-group="${b}"]`).classed("hidden")||(N+=`<span style="color:${P[(parseInt(b)-1)%P.length]}">■</span> #${b}: ${o(I)}<br>`);Xn(N,_.pageX,_.pageY)}const E=l.append("g").attr("class","legend").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","start").selectAll("g").data(Array.from(C.keys())).join("g").attr("transform",(_,D)=>`translate(0,${D*20})`).attr("cursor","pointer").on("click",(_,D)=>W(_,D)).on("mousemove",y).on("mouseout",rn);E.append("rect").attr("x",e.width-e.marginRight+36).attr("width",12).attr("height",12).attr("fill",(_,D)=>P[D%P.length]),E.append("text").attr("x",e.width-e.marginRight+52).attr("y",7).attr("dy","0.3em").attr("fill","currentColor").text(_=>`#${_}`);const W=(_,D)=>{const H=D,O=l.select(`path[data-group="${H}"]`),N=O.classed("hidden"),b=_.currentTarget;O.classed("hidden",!N),O.style("display",()=>N?null:"none"),tn(b).select("rect").style("opacity",N?1:.5)};return sn(l,!0),[]}var hf=Z('<span class="day svelte-4k9s7n"> </span> <div class="input-container svelte-4k9s7n"><input type="range" list="easy_day_steplist" class="svelte-4k9s7n"/></div>',1),yf=Z('<div class="container svelte-4k9s7n"><div class="easy-days-settings svelte-4k9s7n"><span class="svelte-4k9s7n"></span> <span class="header min-col svelte-4k9s7n"> </span> <span class="header svelte-4k9s7n"> </span> <span class="header normal-col svelte-4k9s7n"> </span> <!></div></div>');function aa(n,e){Oe(e,!1);const a=[Ji(),el(),tl(),sl(),rl(),nl(),al()];let i=G(e,"values",28,()=>[0,0,0,0,0,0,0]);Te(),te(n,{children:(t,o)=>{var h=yf(),y=U(h),l=d(U(y),2),p=U(l,!0);L(l);var g=d(l,2),v=U(g,!0);L(g);var w=d(g,2),C=U(w,!0);L(w);var P=d(w,2);_s(P,1,()=>a,Us,(m,u,S)=>{var x=hf(),E=le(x),W=U(E,!0);L(E);var T=d(E,2),_=U(T);nt(_),lt(_,"step",.5),lt(_,"max",1),lt(_,"min",0),L(T),B(()=>M(W,r(u))),xs(_,()=>i()[S],D=>i(i()[S]=D,!0)),f(m,x)}),L(y),L(h),B((m,u,S)=>{M(p,m),M(v,u),M(C,S)},[()=>($(z),s(()=>ol())),()=>($(z),s(()=>il())),()=>($(z),s(()=>ll()))],q),f(t,h)},$$slots:{default:!0}}),Re()}var Cf=Z('<input type="text" disabled/>'),wf=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),_f=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),kf=Z(" <!>",1),Pf=Z("<div> </div>"),xf=Z('<label><input type="radio"/> </label> <label><input type="radio"/> </label> <label><input type="radio"/> </label>',1),bf=Z('<label><input type="radio"/> </label> <label><input type="radio"/> </label> <label><input type="radio"/> </label> <label><input type="radio"/> </label>',1),Sf=Z('<div class="radio-group svelte-18vh0ci"><!></div> <div class="svg-container svelte-18vh0ci"><svg class="svelte-18vh0ci"><!><!><!><!></svg></div> <!>',1),Of=Z('<div class="modal svelte-18vh0ci" tabindex="-1"><div class="modal-dialog modal-xl"><div class="modal-content"><div class="modal-header svelte-18vh0ci"><h5 class="modal-title"><!></h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><!> <!> <!> <!> <!> <details><summary class="svelte-18vh0ci"> </summary> <!></details> <details><summary class="svelte-18vh0ci"> </summary> <!> <!> <!> <!> <!> <!></details> <div style="display:none;"><details><summary class="svelte-18vh0ci"> </summary> <button><!></button> <!> <!></details></div> <div><button> </button> <button> </button> <button> </button> <!></div> <!></div></div></div></div>');function pn(n,e){Oe(e,!1);const[a,i]=Ue(),t=()=>ye(T,"$config",a),o=()=>ye(Q,"$newCardsIgnoreReviewLimit",a),h=()=>ye(N,"$fsrs",a),y=R(),l=R(),p=R(),g=R(),v=R(),w=R(),C=[],P=[];let m=G(e,"state",8),u=G(e,"simulateFsrsRequest",12),S=G(e,"computing",8),x=G(e,"openHelpModal",8),E=G(e,"onPresetChange",8),W=G(e,"workload",8,!1);const T=m().currentConfig;let _=R(Be.count),D=R(Ae.ratio),H=R([]),O=R(!1);const N=m().fsrs,b=nc();let I=R(null),F=0,Y=R([]);const Q=m().newCardsIgnoreReviewLimit;let A=R(!0),j=R(t().leechAction==Vt.SUSPEND),K=R(t().leechThreshold),re=R(null),ne=R(!1),$e=R(void 0);function J(k,X){const ie=[];for(let me=0;me<k.length;me++){let de=0,ve=0;for(let ze=Math.max(0,me-X+1);ze<=me;ze++)de+=k[ze],ve++;ie.push(de/ve)}return ie}function be(k,X){return k.map((ie,me)=>ie+X[me])}function fe(k){return k?Pl({num:k.toFixed(2)}):""}function pe(){u(u().daysToSimulate=r(y),!0),u(u().deckSize=r(l),!0),u(u().suspendAfterLapseCount=r(j)?r(K):void 0,!0),u(u().easyDaysPercentages=r(w),!0)}function ke(k){return k?hl({count:k.current}):""}async function Ve(){let k;pe();try{await Cs(async()=>{c(ne,!0),k=await ka(u())},X=>{X.value.case==="computeRetention"&&c($e,X.value.value)})}finally{c(ne,!1),k&&c(re,k.optimalRetention)}}async function ue(){let k;pe();try{await Cs(async()=>{c(O,!0),k=await Pa(u())},()=>{})}finally{if(c(O,!1),k){F+=1;const X=be(k.dailyReviewCount,k.dailyNewCount),ie=k.accumulatedKnowledgeAcquisition;c(Y,r(Y).concat(k.dailyTimeCost.map((me,de)=>({x:de,timeCost:me,count:X[de],memorized:ie[de],label:F})))),c(H,ur(r(I),b,r(Y),r(_)))}}}async function Pe(){let k;pe();try{await Cs(async()=>{c(O,!0),k=await xa(u())},()=>{})}finally{c(O,!1),k&&(F+=1,c(Y,r(Y).concat(Object.entries(k.memorized).map(([X,ie])=>({x:parseInt(X),timeCost:k.cost[X],memorized:ie,count:k.reviewCount[X],label:F,learnSpan:u().daysToSimulate})))),c(H,$n(r(I),b,r(Y),r(D))))}}function Ge(){c(Y,r(Y).filter(k=>k.label!==F)),F=Math.max(0,F-1),c(H,ur(r(I),b,r(Y),r(_)))}function He(){confirm(yl())&&(se(T,s(t).newPerDay=u().newLimit,s(t)),se(T,s(t).reviewsPerDay=u().reviewLimit,s(t)),se(T,s(t).maximumReviewInterval=u().maxInterval,s(t)),W()||se(T,s(t).desiredRetention=u().desiredRetention,s(t)),xt(Q,u().newCardsIgnoreReviewLimit),se(T,s(t).reviewOrder=u().reviewOrder,s(t)),se(T,s(t).leechAction=r(j)?Vt.SUSPEND:Vt.TAG_ONLY,s(t)),se(T,s(t).leechThreshold=r(K),s(t)),se(T,s(t).easyDaysPercentages=[...r(w)],s(t)),E()())}let Ee=G(e,"modal",12,null);function Ce(k){return Ee(new Wn(k)),{destroy(){var X;(X=Ee())==null||X.dispose(),Ee(null)}}}ce(()=>{},()=>{c(y,365)}),ce(()=>{},()=>{c(l,0)}),ce(()=>r(y),()=>{c(p,Math.ceil(r(y)/365))}),ce(()=>(r(O),r(ne)),()=>{c(g,r(O)||r(ne))}),ce(()=>r($e),()=>{c(v,ke(r($e)))}),ce(()=>(r(I),r(Y),r(A),r(p),$(W()),r(D),r(_)),()=>{if(r(I)){let k=r(Y);if(r(A)){const ie=r(Y).reduce((me,de)=>(me[de.label]=me[de.label]||[],me[de.label].push(de),me),{});k=Object.values(ie).flatMap(me=>{const de=J(me.map(st=>st.timeCost),r(p)),ve=J(me.map(st=>st.count),r(p)),ze=J(me.map(st=>st.memorized),r(p));return me.map((st,wt)=>({...st,timeCost:de[wt],count:ve[wt],memorized:ze[wt]}))})}const X=W()?$n:ur;c(H,X(r(I),b,k,W()?r(D):r(_)))}}),ce(()=>t(),()=>{c(w,[...t().easyDaysPercentages])}),Xe(),Te();var _e=Of(),Me=U(_e),Ne=U(Me),De=U(Ne),ot=U(De),bs=U(ot);{var Ss=k=>{var X=ee();B(ie=>M(X,ie),[()=>($(z),s(()=>Cl()))],q),f(k,X)},Wt=k=>{var X=ee();B(ie=>M(X,ie),[()=>($(z),s(()=>Fn()))],q),f(k,X)};Le(bs,k=>{W()?k(Ss):k(Wt,!1)})}L(ot);var Ys=d(ot,2);L(De);var rs=d(De,2),ns=U(rs);at(ns,{defaultValue:365,min:1,max:3650,get value(){return r(y)},set value(k){c(y,k)},children:(k,X)=>{ae(k,{$$events:{click:()=>x()("simulateFsrsReview")},children:(ie,me)=>{oe();var de=ee();B(ve=>M(de,ve),[()=>($(z),s(()=>ul()))],q),f(ie,de)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var jt=d(ns,2);at(jt,{defaultValue:0,min:0,max:1e5,get value(){return r(l)},set value(k){c(l,k)},children:(k,X)=>{ae(k,{$$events:{click:()=>x()("simulateFsrsReview")},children:(ie,me)=>{oe();var de=ee();B(ve=>M(de,ve),[()=>($(z),s(()=>cl()))],q),f(ie,de)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var as=d(jt,2);{var Os=k=>{kt(k,{get defaultValue(){return t(),s(()=>t().desiredRetention)},min:.7,max:.99,percentage:!0,get value(){return u().desiredRetention},set value(X){u(u().desiredRetention=X,!0)},children:(X,ie)=>{ae(X,{$$events:{click:()=>x()("desiredRetention")},children:(me,de)=>{oe();var ve=ee();B(ze=>M(ve,ze),[()=>($(z),s(()=>Gs()))],q),f(me,ve)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},Rs=k=>{var X=_f(),ie=le(X);qe(ie,()=>({"--cols":13})),je(ie.lastChild,{children:(me,de)=>{var ve=wf(),ze=le(ve);qe(ze,()=>({"--col-size":7})),bt(ze.lastChild,{breakpoint:"xs",children:(wt,Ms)=>{ae(wt,{$$events:{click:()=>x()("desiredRetention")},children:(Et,Ns)=>{oe();var Xt=ee();B(kr=>M(Xt,kr),[()=>($(z),s(()=>Gs()))],q),f(Et,Xt)},$$slots:{default:!0}})},$$slots:{default:!0}}),L(ze);var st=d(ze,2);qe(st,()=>({"--col-size":6})),bt(st.lastChild,{breakpoint:"xs",children:(wt,Ms)=>{var Et=Cf();nt(Et),B(Ns=>qs(Et,Ns),[()=>($(z),s(()=>wl()))],q),f(wt,Et)},$$slots:{default:!0}}),L(st),f(me,ve)},$$slots:{default:!0}}),L(ie),f(k,X)};Le(as,k=>{W()?k(Rs,!1):k(Os)})}var os=d(as,2);at(os,{get defaultValue(){return t(),s(()=>t().newPerDay)},min:0,max:9999,get value(){return u().newLimit},set value(k){u(u().newLimit=k,!0)},children:(k,X)=>{ae(k,{$$events:{click:()=>x()("newLimit")},children:(ie,me)=>{oe();var de=ee();B(ve=>M(de,ve),[()=>($(z),s(()=>Dn()))],q),f(ie,de)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ts=d(os,2);at(Ts,{get defaultValue(){return t(),s(()=>t().reviewsPerDay)},min:0,max:9999,get value(){return u().reviewLimit},set value(k){u(u().reviewLimit=k,!0)},children:(k,X)=>{ae(k,{$$events:{click:()=>x()("reviewLimit")},children:(ie,me)=>{oe();var de=ee();B(ve=>M(de,ve),[()=>($(z),s(()=>Tn()))],q),f(ie,de)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var qt=d(Ts,2),Ct=U(qt),Ks=U(Ct,!0);L(Ct);var Xs=d(Ct,2);Qu(Xs,()=>r(w),k=>{aa(k,{get values(){return r(w)},set values(X){c(w,X)},$$legacy:!0})}),L(qt);var is=d(qt,2),Ut=U(is),Zs=U(Ut,!0);L(Ut);var ls=d(Ut,2);at(ls,{get defaultValue(){return t(),s(()=>t().maximumReviewInterval)},min:1,max:36500,get value(){return u().maxInterval},set value(k){u(u().maxInterval=k,!0)},children:(k,X)=>{ae(k,{$$events:{click:()=>x()("maximumInterval")},children:(ie,me)=>{oe();var de=ee();B(ve=>M(de,ve),[()=>($(z),s(()=>Pn()))],q),f(ie,de)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ds=d(ls,2);const Js=q(()=>($(js),h(),s(()=>js(h()))));Pt(Ds,{get defaultValue(){return t(),s(()=>t().reviewOrder)},get choices(){return r(Js)},get value(){return u().reviewOrder},set value(k){u(u().reviewOrder=k,!0)},children:(k,X)=>{ae(k,{$$events:{click:()=>x()("reviewSortOrder")},children:(ie,me)=>{oe();var de=ee();B(ve=>M(de,ve),[()=>($(z),s(()=>In()))],q),f(ie,de)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Is=d(Ds,2);Je(Is,{get defaultValue(){return o()},get value(){return u().newCardsIgnoreReviewLimit},set value(k){u(u().newCardsIgnoreReviewLimit=k,!0)},children:(k,X)=>{ae(k,{$$events:{click:()=>x()("newCardsIgnoreReviewLimit")},children:(ie,me)=>{const de=q(()=>($(z),s(()=>Rn())));Bt(ie,{get title(){return r(de)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Qt=d(Is,2);Je(Qt,{defaultValue:!0,get value(){return r(A)},set value(k){c(A,k)},children:(k,X)=>{ae(k,{$$events:{click:()=>x()("simulateFsrsReview")},children:(ie,me)=>{oe();var de=ee();B(ve=>M(de,ve),[()=>($(z),s(()=>dl()))],q),f(ie,de)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var us=d(Qt,2);const cs=q(()=>(t(),$(Vt),s(()=>t().leechAction==Vt.SUSPEND)));Je(us,{get defaultValue(){return r(cs)},get value(){return r(j)},set value(k){c(j,k)},children:(k,X)=>{ae(k,{$$events:{click:()=>x()("leechAction")},children:(ie,me)=>{oe();var de=ee();B(ve=>M(de,ve),[()=>($(z),s(()=>fl()))],q),f(ie,de)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var er=d(us,2);{var ds=k=>{at(k,{get defaultValue(){return t(),s(()=>t().leechThreshold)},min:1,max:9999,get value(){return r(K)},set value(X){c(K,X)},children:(X,ie)=>{ae(X,{$$events:{click:()=>x()("leechThreshold")},children:(me,de)=>{oe();var ve=ee();B(ze=>M(ve,ze),[()=>($(z),s(()=>Vn()))],q),f(me,ve)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})};Le(er,k=>{r(j)&&k(ds)})}L(is);var Lt=d(is,2),As=U(Lt),Yt=U(As),tr=U(Yt,!0);L(Yt);var Ot=d(Yt,2),Ls=U(Ot);{var V=k=>{var X=ee();B(ie=>M(X,ie),[()=>($(z),s(()=>fr()))],q),f(k,X)},ge=k=>{var X=ee();B(ie=>M(X,ie),[()=>($(z),s(()=>_l()))],q),f(k,X)};Le(Ls,k=>{r(ne)?k(V):k(ge,!1)})}L(Ot);var Ie=d(Ot,2);{var Ze=k=>{var X=kf(),ie=le(X),me=d(ie);{var de=ve=>{const ze=q(()=>($(z),s(()=>xl())));Ke(ve,{get warning(){return r(ze)},className:"alert-warning"})};Le(me,ve=>{r(re),t(),s(()=>r(re)-t().desiredRetention>=.01)&&ve(de)})}B(ve=>M(ie,`${ve!=null?ve:""} `),[()=>(r(re),s(()=>fe(r(re))))],q),f(k,X)};Le(Ie,k=>{r(re)&&k(Ze)})}var xe=d(Ie,2);{var We=k=>{var X=Pf(),ie=U(X,!0);L(X),B(()=>M(ie,r(v))),f(k,X)};Le(xe,k=>{r(ne)&&k(We)})}L(As),L(Lt);var Fe=d(Lt,2),it=U(Fe),Es=U(it,!0);L(it);var It=d(it,2),ia=U(It,!0);L(It);var Kt=d(It,2),la=U(Kt,!0);L(Kt);var ua=d(Kt,2);{var ca=k=>{var X=ee();B(ie=>M(X,ie),[()=>($(z),s(()=>kl()))],q),f(k,X)};Le(ua,k=>{r(g)&&k(ca)})}L(Fe);var da=d(Fe,2);ec(da,{children:(k,X)=>{var ie=Sf(),me=le(ie),de=U(me);tc(de,{children:(Xt,kr)=>{var Pr=ut(),fa=le(Pr);{var ga=Zt=>{var fs=xf(),Mt=le(fs),$t=U(Mt);nt($t);var gs,sr=d($t);L(Mt);var Nt=d(Mt,2),pt=U(Nt);nt(pt);var vs,rr=d(pt);L(Nt);var Jt=d(Nt,2),mt=U(Jt);nt(mt);var $s,nr=d(mt);L(Jt),B((ct,Rt,es)=>{var Fs,rt,ts;gs!==(gs=($(Be),s(()=>Be.count)))&&($t.value=(Fs=$t.__value=($(Be),s(()=>Be.count)))!=null?Fs:""),M(sr,` ${ct!=null?ct:""}`),vs!==(vs=($(Be),s(()=>Be.time)))&&(pt.value=(rt=pt.__value=($(Be),s(()=>Be.time)))!=null?rt:""),M(rr,` ${Rt!=null?Rt:""}`),$s!==($s=($(Be),s(()=>Be.memorized)))&&(mt.value=(ts=mt.__value=($(Be),s(()=>Be.memorized)))!=null?ts:""),M(nr,` ${es!=null?es:""}`)},[()=>($(z),s(()=>jr())),()=>($(z),s(()=>qr())),()=>($(z),s(()=>Ur()))],q),Ft(C,[],$t,()=>($(Be),s(()=>Be.count),r(_)),ct=>c(_,ct)),Ft(C,[],pt,()=>($(Be),s(()=>Be.time),r(_)),ct=>c(_,ct)),Ft(C,[],mt,()=>($(Be),s(()=>Be.memorized),r(_)),ct=>c(_,ct)),f(Zt,fs)},va=Zt=>{var fs=bf(),Mt=le(fs),$t=U(Mt);nt($t);var gs,sr=d($t);L(Mt);var Nt=d(Mt,2),pt=U(Nt);nt(pt);var vs,rr=d(pt);L(Nt);var Jt=d(Nt,2),mt=U(Jt);nt(mt);var $s,nr=d(mt);L(Jt);var ct=d(Jt,2),Rt=U(ct);nt(Rt);var es,Fs=d(Rt);L(ct),B((rt,ts,ar,or)=>{var xr,br,Sr,Or;gs!==(gs=($(Ae),s(()=>Ae.ratio)))&&($t.value=(xr=$t.__value=($(Ae),s(()=>Ae.ratio)))!=null?xr:""),M(sr,` ${rt!=null?rt:""}`),vs!==(vs=($(Ae),s(()=>Ae.count)))&&(pt.value=(br=pt.__value=($(Ae),s(()=>Ae.count)))!=null?br:""),M(rr,` ${ts!=null?ts:""}`),$s!==($s=($(Ae),s(()=>Ae.time)))&&(mt.value=(Sr=mt.__value=($(Ae),s(()=>Ae.time)))!=null?Sr:""),M(nr,` ${ar!=null?ar:""}`),es!==(es=($(Ae),s(()=>Ae.memorized)))&&(Rt.value=(Or=Rt.__value=($(Ae),s(()=>Ae.memorized)))!=null?Or:""),M(Fs,` ${or!=null?or:""}`)},[()=>($(z),s(()=>gl())),()=>($(z),s(()=>jr())),()=>($(z),s(()=>qr())),()=>($(z),s(()=>Ur()))],q),Ft(P,[],$t,()=>($(Ae),s(()=>Ae.ratio),r(D)),rt=>c(D,rt)),Ft(P,[],pt,()=>($(Ae),s(()=>Ae.count),r(D)),rt=>c(D,rt)),Ft(P,[],mt,()=>($(Ae),s(()=>Ae.time),r(D)),rt=>c(D,rt)),Ft(P,[],Rt,()=>($(Ae),s(()=>Ae.memorized),r(D)),rt=>c(D,rt)),f(Zt,fs)};Le(fa,Zt=>{W()?Zt(va,!1):Zt(ga)})}f(Xt,Pr)},$$slots:{default:!0}}),L(me);var ve=d(me,2),ze=U(ve),st=U(ze);uc(st);var wt=d(st);sc(wt);var Ms=d(wt);rc(Ms,{get bounds(){return b}});var Et=d(Ms);ac(Et,{get bounds(){return b}}),L(ze),ss(ze,Xt=>c(I,Xt),()=>r(I)),L(ve);var Ns=d(ve,2);cc(Ns,{get tableData(){return r(H)}}),B(()=>lt(ze,"viewBox",s(()=>`0 0 ${b.width} ${b.height}`))),f(k,ie)},$$slots:{default:!0}}),L(rs),L(Ne),L(Me),L(_e),qn(_e,k=>Ce==null?void 0:Ce(k)),B((k,X,ie,me,de,ve)=>{M(Ks,k),M(Zs,X),M(tr,ie),ft(Ot,1,`btn ${r(ne)?"btn-warning":"btn-primary"}`,"svelte-18vh0ci"),Ot.disabled=!r(ne)&&S(),ft(it,1,`btn ${S()?"btn-warning":"btn-primary"}`,"svelte-18vh0ci"),it.disabled=S(),M(Es,me),ft(It,1,`btn ${S()?"btn-warning":"btn-primary"}`,"svelte-18vh0ci"),It.disabled=S(),M(ia,de),ft(Kt,1,`btn ${S()?"btn-warning":"btn-primary"}`,"svelte-18vh0ci"),Kt.disabled=S(),M(la,ve)},[()=>($(z),s(()=>Mn())),()=>($(z),s(()=>vl())),()=>($(z),s(()=>Nn())),()=>($(z),s(()=>$l())),()=>($(z),s(()=>pl())),()=>($(z),s(()=>ml()))],q),Se("click",Ys,()=>{var k;return(k=Ee())==null?void 0:k.hide()}),Se("click",Ot,()=>Ve()),Se("click",it,function(...k){var X;(X=W()?Pe:ue)==null||X.apply(this,k)}),Se("click",It,Ge),Se("click",Kt,He),f(n,_e),Re(),i()}var Rf=Z("<button><!></button>"),Tf=Z('<!> <button class="btn btn-primary svelte-1oyy9sz"> </button> <!> <!> <div class="ms-1 me-1"><!> <!> <!> <!> <!> <button><!></button> <!> <div><!></div></div> <div class="m-1"><!> <button class="btn btn-primary svelte-1oyy9sz"> </button></div> <hr class="svelte-1oyy9sz"/> <div class="m-1"><button class="btn btn-primary svelte-1oyy9sz"> </button></div> <!> <!>',1);function Df(n,e){var Ot,Ls;Oe(e,!1);const[a,i]=Ue(),t=()=>ye(I,"$daysSinceLastOptimization",a),o=()=>ye(O,"$config",a),h=()=>ye(F,"$limits",a),y=()=>ye(r(S),"$newCardsIgnoreReviewLimit",a),l=()=>ye(ne,"$healthCheck",a),p=()=>ye(b,"$fsrsReschedule",a),g=R(),v=R(),w=R(),C=R(),P=R(),m=R(),u=R(),S=R(),x=R(),E=R(),W=R();let T=G(e,"state",8),_=G(e,"openHelpModal",8),D=G(e,"onPresetChange",8),H=G(e,"newlyEnabled",8,!1);const O=T().currentConfig,N=T().defaults,b=T().fsrsReschedule,I=T().daysSinceLastOptimization,F=T().deckLimits;let Y=R(!1),Q=R(!1),A=R(!1),j=R(),K=R(!1),re=R(!1);const ne=T().fsrsHealthCheck;let $e=R("");const J=[new _t(ys(),o().desiredRetention,V=>se(O,s(o).desiredRetention=V,s(o)),o().desiredRetention,null),new _t(dr(),(Ot=h().desiredRetention)!=null?Ot:null,V=>se(F,s(h).desiredRetention=V!=null?V:void 0,s(h)),null,null)];let be=R((Ls=h().desiredRetention)!=null?Ls:o().desiredRetention);const fe=r(be).toFixed(2),pe=.8,ke=.95;function Ve(V){return V<pe?Tl():V>ke?Dl():""}let ue,Pe=[...hs(o())];async function Ge(V,ge){if(+fe==r(P)){c($e,Il());return}if(!ue||Pe.toString()!==ge.toString()){const Fe=new Sa({w:ge,search:r(C)});Pe=[...ge],ue=Oa(Fe)}const Ie=+fe*100,Ze=V*100,xe=await ue,We=xe.costs[Ze]/xe.costs[Ie];c($e,Al({factor:We.toFixed(2),previousDr:Ie.toString()}))}function He(V){return V<.7||V>.97?"alert-danger":V<pe||V>ke?"alert-warning":"alert-info"}function Ee(){return BigInt(o().ignoreRevlogsBeforeDate?new Date(o().ignoreRevlogsBeforeDate).getTime():0)}async function Ce(){if(r(K)){await Tr({});return}if(T().presetAssignmentsChanged()){alert(Qr());return}c(K,!0),c(j,void 0);try{await Cs(async()=>{const V=hs(o()),ge=o().relearnSteps;let Ie=0,Ze=0;for(let Fe=0;Fe<ge.length&&(Ze+=ge[Fe],!(Ze>=1440));Fe++)Ie++;const xe=await Ra({search:o().paramSearch?o().paramSearch:r(C),ignoreRevlogsBeforeMs:Ee(),currentParams:V,numOfRelearningSteps:Ie,healthCheck:l()}),We=V.length&&V.every((Fe,it)=>Fe.toFixed(4)===xe.params[it].toFixed(4))||xe.params.length===0;if(xe.healthCheckPassed!==void 0)xe.healthCheckPassed?setTimeout(()=>alert(Ll()),200):setTimeout(()=>alert(El()),200);else if(We){const Fe=xe.fsrsItems?Ml():Nl();setTimeout(()=>alert(Fe),200)}We||(se(O,s(o).fsrsParams6=xe.params,s(o)),setTimeout(()=>{c(A,!0)},201)),r(j)&&At(j,r(j).current=r(j).total)},V=>{V.value.case==="computeParams"&&c(j,V.value.value)})}finally{c(K,!1)}}async function _e(){if(r(re)){await Tr({});return}if(T().presetAssignmentsChanged()){alert(Qr());return}c(re,!0),c(j,void 0);try{await Cs(async()=>{const V=o().paramSearch?o().paramSearch:r(C),ge=await Da({search:V,ignoreRevlogsBeforeMs:Ee(),params:hs(o())});r(j)&&At(j,r(j).current=r(j).total),setTimeout(()=>alert(`Log loss: ${ge.logLoss.toFixed(4)}, RMSE(bins): ${(ge.rmseBins*100).toFixed(2)}%. ${Bl()}`),200)},V=>{V.value.case==="computeParams"&&c(j,V.value.value)})}finally{c(re,!1)}}function Me(V){if(!V||!V.total)return"";const ge=(V.current/V.total*100).toFixed(1);return V instanceof Ta?`${ge}%`:V.current===V.total?Fl():Vl({pct:ge,reviews:V.reviews})}async function Ne(){await _r(),T().save(zs.COMPUTE_ALL_PARAMS)}let De=R(),ot=R();ce(()=>(t(),z),()=>{c(g,t()>30?bl():"")}),ce(()=>r(Y),()=>{r(Y)&&c(Q,!0)}),ce(()=>($(H()),r(Q),r(A)),()=>{c(v,H()||r(Q)||r(A))}),ce(()=>(r(K),r(re)),()=>{c(w,r(K)||r(re))}),ce(()=>$(T()),()=>{c(C,`preset:"${T().getCurrentNameForSearch()}" -is:suspended`)}),ce(()=>r(be),()=>{c(P,Number(r(be).toFixed(2)))}),ce(()=>r(P),()=>{c(m,Ve(r(P)))}),ce(()=>(r(v),r(P),o()),()=>{r(v)&&Ge(r(P),hs(o()))}),ce(()=>r(P),()=>{c(u,He(r(P)))}),ce(()=>$(T()),()=>{Ru(c(S,T().newCardsIgnoreReviewLimit),"$newCardsIgnoreReviewLimit",a)}),ce(()=>(o(),$(T()),y()),()=>{c(x,new ba({params:hs(o()),desiredRetention:o().desiredRetention,newLimit:o().newPerDay,reviewLimit:o().reviewsPerDay,maxInterval:o().maximumReviewInterval,search:`preset:"${T().getCurrentNameForSearch()}" -is:suspended`,newCardsIgnoreReviewLimit:y(),easyDaysPercentages:o().easyDaysPercentages,reviewOrder:o().reviewOrder,historicalRetention:o().historicalRetention}))}),ce(()=>r(j),()=>{c(E,Me(r(j)))}),ce(()=>r(j),()=>{var V,ge;c(W,(ge=(V=r(j))==null?void 0:V.reviews)!=null?ge:void 0)}),Xe(),Te();var bs=Tf(),Ss=le(bs);vt(Ss,{get slotHost(){return te},api:{},children:(V,ge)=>{te(V,{children:(Ie,Ze)=>{kt(Ie,{get defaultValue(){return s(()=>N.desiredRetention)},min:.7,max:.99,percentage:!0,get value(){return r(be)},set value(xe){c(be,xe)},get focused(){return r(Y)},set focused(xe){c(Y,xe)},children:(xe,We)=>{ae(xe,{$$events:{click:()=>_()("desiredRetention")},children:(Fe,it)=>{oe();var Es=ee();B(It=>M(Es,It),[()=>($(z),s(()=>Gs()))],q),f(Fe,Es)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(xe,We)=>{$r(xe,{slot:"tabs",get tabs(){return J},get value(){return r(be)},set value(Fe){c(be,Fe)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}})},$$slots:{default:!0}});var Wt=d(Ss,2),Ys=U(Wt,!0);L(Wt);var rs=d(Wt,2);Ke(rs,{get warning(){return r($e)},className:"alert-info two-line"});var ns=d(rs,2);Ke(ns,{get warning(){return r(m)},get className(){return r(u)}});var jt=d(ns,2),as=U(jt);$f(as,{defaultValue:[],get defaults(){return s(()=>N.fsrsParams6)},get value(){return o().fsrsParams6},set value(V){se(O,s(o).fsrsParams6=V,s(o))},children:(V,ge)=>{ae(V,{$$events:{click:()=>_()("modelParams")},children:(Ie,Ze)=>{oe();var xe=ee();B(We=>M(xe,We),[()=>($(z),s(()=>Hn()))],q),f(Ie,xe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Os=d(as,2);mf(Os,{get placeholder(){return r(C)},get value(){return o().paramSearch},set value(V){se(O,s(o).paramSearch=V,s(o))},$$legacy:!0});var Rs=d(Os,2);Je(Rs,{defaultValue:!1,get value(){return zt(),p()},set value(V){xt(b,V)},children:(V,ge)=>{ae(V,{$$events:{click:()=>_()("rescheduleCardsOnChange")},children:(Ie,Ze)=>{const xe=q(()=>($(z),s(()=>zn())));Bt(Ie,{get title(){return r(xe)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var os=d(Rs,2);{var Ts=V=>{const ge=q(()=>($(z),s(()=>zl())));Ke(V,{get warning(){return r(ge)}})};Le(os,V=>{p()&&V(Ts)})}var qt=d(os,2);Je(qt,{defaultValue:!1,get value(){return zt(),l()},set value(V){xt(ne,V)},children:(V,ge)=>{ae(V,{$$events:{click:()=>_()("healthCheck")},children:(Ie,Ze)=>{const xe=q(()=>($(z),s(()=>Sl({text:Bn()}))));Bt(Ie,{get title(){return r(xe)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ct=d(qt,2),Ks=U(Ct);{var Xs=V=>{var ge=ee();B(Ie=>M(ge,Ie),[()=>($(z),s(()=>fr()))],q),f(V,ge)},is=V=>{var ge=ee();B(Ie=>M(ge,Ie),[()=>($(z),s(()=>Hl()))],q),f(V,ge)};Le(Ks,V=>{r(K)?V(Xs):V(is,!1)})}L(Ct);var Ut=d(Ct,2);{var Zs=V=>{var ge=Rf(),Ie=U(ge);{var Ze=We=>{var Fe=ee();B(it=>M(Fe,it),[()=>($(z),s(()=>fr()))],q),f(We,Fe)},xe=We=>{var Fe=ee();B(it=>M(Fe,it),[()=>($(z),s(()=>Gl()))],q),f(We,Fe)};Le(Ie,We=>{r(re)?We(Ze):We(xe,!1)})}L(ge),B(()=>{ft(ge,1,`btn ${r(re)?"btn-warning":"btn-primary"}`,"svelte-1oyy9sz"),ge.disabled=!r(re)&&r(w)}),Se("click",ge,()=>_e()),f(V,ge)};Le(Ut,V=>{$(T()),s(()=>T().legacyEvaluate)&&V(Zs)})}var ls=d(Ut,2),Ds=U(ls);{var Js=V=>{var ge=ee();B(()=>M(ge,r(E))),f(V,ge)},Is=(V,ge)=>{{var Ie=Ze=>{var xe=ee();B(We=>M(xe,We),[()=>($(z),r(W),s(()=>En({reviews:r(W)})))],q),f(Ze,xe)};Le(V,Ze=>{r(W)!==void 0&&Ze(Ie)},ge)}};Le(Ds,V=>{r(K)||r(re)?V(Js):V(Is,!1)})}L(ls),L(jt);var Qt=d(jt,2),us=U(Qt);Ke(us,{get warning(){return r(g)},className:"alert-warning"});var cs=d(us,2),er=U(cs,!0);L(cs),L(Qt);var ds=d(Qt,4),Lt=U(ds),As=U(Lt,!0);L(Lt),L(ds);var Yt=d(ds,2);pn(Yt,{get state(){return T()},get simulateFsrsRequest(){return r(x)},get computing(){return r(w)},get openHelpModal(){return _()},get onPresetChange(){return D()},get modal(){return r(De)},set modal(V){c(De,V)},$$legacy:!0});var tr=d(Yt,2);pn(tr,{workload:!0,get state(){return T()},get simulateFsrsRequest(){return r(x)},get computing(){return r(w)},get openHelpModal(){return _()},get onPresetChange(){return D()},get modal(){return r(ot)},set modal(V){c(ot,V)},$$legacy:!0}),B((V,ge,Ie)=>{M(Ys,V),ft(Ct,1,`btn ${r(K)?"btn-warning":"btn-primary"}`,"svelte-1oyy9sz"),Ct.disabled=!r(K)&&r(w),M(er,ge),M(As,Ie)},[()=>($(z),s(()=>Ol())),()=>($(z),s(()=>Rl())),()=>($(z),s(()=>Fn()))],q),Se("click",Wt,()=>{var V;At(x,r(x).reviewLimit=9999),(V=r(ot))==null||V.show()}),Se("click",Ct,()=>Ce()),Se("click",cs,()=>Ne()),Se("click",Lt,()=>{var V;return(V=r(De))==null?void 0:V.show()}),f(n,bs),Re(),i()}var If=Z("<!> <!>",1);function Af(n,e){Oe(e,!1);const[a,i]=Ue(),t=()=>ye(l,"$fsrs",a);let o=G(e,"state",8),h=G(e,"api",8),y=G(e,"onPresetChange",8);const l=o().fsrs;let p=R(!1);const g={fsrs:{title:"FSRS",help:Zl(),url:he.DeckOptions.fsrs,global:!0},desiredRetention:{title:Gs(),help:Kl()+`

`+Xl(),sched:tt.FSRS},modelParams:{title:Hn(),help:Ql()+`

`+Yl(),sched:tt.FSRS},rescheduleCardsOnChange:{title:zn(),help:Ul(),sched:tt.FSRS,global:!0},computeOptimalRetention:{title:Nn(),help:ql(),sched:tt.FSRS},healthCheck:{title:Bn(),help:Bs()+`

`+Wl()+`

`+jl(),sched:tt.FSRS,global:!0}},v=Object.values(g);let w=R(),C=R();function P(m){r(w).show(),r(C).to(m)}ce(()=>t(),()=>{t()||c(p,!0)}),Xe(),Te(),gt(n,{title:"FSRS",children:(m,u)=>{vt(m,{get slotHost(){return te},get api(){return h()},children:(S,x)=>{var E=If(),W=le(E);te(W,{children:(D,H)=>{Je(D,{defaultValue:!1,get value(){return zt(),t()},set value(O){xt(l,O)},children:(O,N)=>{ae(O,{$$events:{click:()=>P(Object.keys(g).indexOf("fsrs"))},children:(b,I)=>{Bt(b,{get title(){return s(()=>g.fsrs.title)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var T=d(W,2);{var _=D=>{Df(D,{get state(){return o()},get newlyEnabled(){return r(p)},openHelpModal:H=>P(Object.keys(g).indexOf(H)),get onPresetChange(){return y()}})};Le(T,D=>{t()&&D(_)})}f(S,E)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(m,u)=>{St(m,{title:"FSRS",get url(){return $(he),s(()=>he.DeckOptions.fsrs)},slot:"tooltip",get fsrs(){return t()},get helpSections(){return v},$$events:{mount:S=>{c(w,S.detail.modal),c(C,S.detail.carousel)}}})}}}),Re(),i()}function Lf(n,e){Oe(e,!1);let a=G(e,"html",8),i=G(e,"mounted",8);mr(i()),Te();var t=ut(),o=le(t);Jl(o,a),f(n,t),Re()}function Ef(n){switch(n){case yt.Seconds:return"s";case yt.Minutes:return"m";case yt.Hours:return"h";case yt.Days:return"d";default:return""}}function Mf(n){switch(n){case"s":return yt.Seconds;case"h":return yt.Hours;case"d":return yt.Days;default:return yt.Minutes}}function Nf(n){const e=n*60;let a=dc(e);return[yt.Months,yt.Years].includes(a)&&(a=yt.Days),`${Math.round(fc(a,e))}${Ef(a)}`}function Ff(n){const e=n.match(/(\d+)(.*)/);if(e){const[a,i,t]=e,o=Mf(t),h=gc(o)*parseInt(i,10);return Math.min(h,2**31)/60}else return 0}function Vf(n){return n.map(Nf).join(" ")}function Hf(n){return n.split(" ").map(Ff).filter(e=>e)}var zf=Z('<input type="text" class="svelte-f5c9s0"/>');function Bf(n,e){Oe(e,!1);let a=G(e,"value",12),i=R();function t(){a(Hf(this.value))}ce(()=>$(a()),()=>{c(i,Vf(a()))}),Xe(),Te();var o=zf();nt(o),B(()=>qs(o,r(i))),Se("blur",o,t),f(n,o),Re()}var Gf=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Wf=Z('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function oa(n,e){let a=G(e,"value",12),i=G(e,"defaultValue",8);var t=Wf(),o=le(t);qe(o,()=>({"--cols":13})),je(o.lastChild,{children:(h,y)=>{var l=Gf(),p=le(l);qe(p,()=>({"--col-size":7})),bt(p.lastChild,{breakpoint:"xs",children:(v,w)=>{var C=ut(),P=le(C);Dt(P,e,"default",{}),f(v,C)},$$slots:{default:!0}}),L(p);var g=d(p,2);qe(g,()=>({"--col-size":6})),bt(g.lastChild,{breakpoint:"xs",children:(v,w)=>{Gt(v,{children:(C,P)=>{Bf(C,{get value(){return a()},set value(m){a(m)},$$legacy:!0})},$$slots:{default:!0,revert:(C,P)=>{Ps(C,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(m){a(m)},$$legacy:!0})}}})},$$slots:{default:!0}}),L(g),f(h,l)},$$slots:{default:!0}}),L(o),f(n,t)}var jf=Z("<!> <!> <!> <!> <!> <!>",1);function qf(n,e){Oe(e,!1);const[a,i]=Ue(),t=()=>ye(l,"$config",a),o=()=>ye(g,"$fsrs",a);let h=G(e,"state",8),y=G(e,"api",24,()=>({}));const l=h().currentConfig,p=h().defaults,g=h().fsrs;let v=R(),w=R();const C={relearningSteps:{title:ou(),help:au(),url:he.DeckOptions.relearningSteps},minimumInterval:{title:nu(),help:ru(),url:he.DeckOptions.minimumInterval,sched:tt.SM2},leechThreshold:{title:Vn(),help:su(),url:he.Leeches.leeches},leechAction:{title:tu(),help:eu(),url:he.Leeches.waiting}},P=Object.values(C);let m=R(),u=R();function S(E){r(m).show(),r(u).to(E)}ce(()=>(t(),o(),z),()=>{const E=t().relearnSteps.length?t().relearnSteps[t().relearnSteps.length-1]/60/24:0;c(v,!o()&&E>t().minimumLapseInterval?iu():""),c(w,o()&&E>=1?Gn():"")}),Xe(),Te();const x=q(()=>($(z),s(()=>Yr())));gt(n,{get title(){return r(x)},children:(E,W)=>{vt(E,{get slotHost(){return te},get api(){return y()},children:(T,_)=>{var D=jf(),H=le(D);te(H,{children:(Q,A)=>{oa(Q,{get defaultValue(){return s(()=>p.relearnSteps)},get value(){return t().relearnSteps},set value(j){se(l,s(t).relearnSteps=j,s(t))},children:(j,K)=>{ae(j,{$$events:{click:()=>S(Object.keys(C).indexOf("relearningSteps"))},children:(re,ne)=>{oe();var $e=ee();B(()=>M($e,s(()=>C.relearningSteps.title))),f(re,$e)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var O=d(H,2);te(O,{children:(Q,A)=>{Ke(Q,{get warning(){return r(w)}})},$$slots:{default:!0}});var N=d(O,2);{var b=Q=>{te(Q,{children:(A,j)=>{at(A,{get defaultValue(){return s(()=>p.minimumLapseInterval)},min:1,get value(){return t().minimumLapseInterval},set value(K){se(l,s(t).minimumLapseInterval=K,s(t))},children:(K,re)=>{ae(K,{$$events:{click:()=>S(Object.keys(C).indexOf("minimumInterval"))},children:(ne,$e)=>{oe();var J=ee();B(()=>M(J,s(()=>C.minimumInterval.title))),f(ne,J)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}})};Le(N,Q=>{o()||Q(b)})}var I=d(N,2);te(I,{children:(Q,A)=>{Ke(Q,{get warning(){return r(v)}})},$$slots:{default:!0}});var F=d(I,2);te(F,{children:(Q,A)=>{at(Q,{get defaultValue(){return s(()=>p.leechThreshold)},min:1,get value(){return t().leechThreshold},set value(j){se(l,s(t).leechThreshold=j,s(t))},children:(j,K)=>{ae(j,{$$events:{click:()=>S(Object.keys(C).indexOf("leechThreshold"))},children:(re,ne)=>{oe();var $e=ee();B(()=>M($e,s(()=>C.leechThreshold.title))),f(re,$e)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Y=d(F,2);te(Y,{children:(Q,A)=>{const j=q(()=>($(dn),s(dn)));Pt(Q,{get defaultValue(){return s(()=>p.leechAction)},get choices(){return r(j)},breakpoint:"md",get value(){return t().leechAction},set value(K){se(l,s(t).leechAction=K,s(t))},children:(K,re)=>{ae(K,{$$events:{click:()=>S(Object.keys(C).indexOf("leechAction"))},children:(ne,$e)=>{oe();var J=ee();B(()=>M(J,s(()=>C.leechAction.title))),f(ne,J)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),f(T,D)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(E,W)=>{const T=q(()=>($(z),s(()=>Yr())));St(E,{get title(){return r(T)},get url(){return $(he),s(()=>he.DeckOptions.lapses)},slot:"tooltip",get fsrs(){return o()},get helpSections(){return P},$$events:{mount:_=>{c(m,_.detail.modal),c(u,_.detail.carousel)}}})}}}),Re(),i()}var Uf=Z("<!> <!> <!> <!>",1),Qf=Z("<!> <!> <!> <!> <!>",1);function Yf(n,e){Oe(e,!1);const[a,i]=Ue(),t=()=>ye(g,"$config",a),o=()=>ye(w,"$fsrs",a),h=R(),y=R();let l=G(e,"state",8),p=G(e,"api",24,()=>({}));const g=l().currentConfig,v=l().defaults,w=l().fsrs;let C=R(),P=R();const m={learningSteps:{title:$u(),help:vu(),url:he.DeckOptions.learningSteps},graduatingInterval:{title:gu(),help:fu(),url:he.DeckOptions.graduatingInterval,sched:tt.SM2},easyInterval:{title:du(),help:cu(),url:he.DeckOptions.easyInterval,sched:tt.SM2},insertionOrder:{title:uu(),help:lu(),url:he.DeckOptions.insertionOrder}},u=Object.values(m);let S=R(),x=R();function E(T){r(S).show(),r(x).to(T)}ce(()=>(t(),o()),()=>{const T=t().learnSteps.length?t().learnSteps[t().learnSteps.length-1]/60/24:0;c(C,T>t().graduatingIntervalGood?pu():""),c(P,o()&&T>=1?Gn():"")}),ce(()=>(t(),z),()=>{c(h,t().graduatingIntervalGood>t().graduatingIntervalEasy?mu():"")}),ce(()=>(t(),z),()=>{c(y,t().newCardInsertOrder==cr.RANDOM?hu():"")}),Xe(),Te();const W=q(()=>($(z),s(()=>Kr())));gt(n,{get title(){return r(W)},children:(T,_)=>{vt(T,{get slotHost(){return te},get api(){return p()},children:(D,H)=>{var O=Qf(),N=le(O);te(N,{children:(A,j)=>{oa(A,{get defaultValue(){return s(()=>v.learnSteps)},get value(){return t().learnSteps},set value(K){se(g,s(t).learnSteps=K,s(t))},children:(K,re)=>{ae(K,{$$events:{click:()=>E(Object.keys(m).indexOf("learningSteps"))},children:(ne,$e)=>{oe();var J=ee();B(()=>M(J,s(()=>m.learningSteps.title))),f(ne,J)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var b=d(N,2);te(b,{children:(A,j)=>{Ke(A,{get warning(){return r(P)}})},$$slots:{default:!0}});var I=d(b,2);{var F=A=>{var j=Uf(),K=le(j);te(K,{children:(J,be)=>{at(J,{get defaultValue(){return s(()=>v.graduatingIntervalGood)},get value(){return t().graduatingIntervalGood},set value(fe){se(g,s(t).graduatingIntervalGood=fe,s(t))},children:(fe,pe)=>{ae(fe,{$$events:{click:()=>E(Object.keys(m).indexOf("graduatingInterval"))},children:(ke,Ve)=>{oe();var ue=ee();B(()=>M(ue,s(()=>m.graduatingInterval.title))),f(ke,ue)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var re=d(K,2);te(re,{children:(J,be)=>{Ke(J,{get warning(){return r(C)}})},$$slots:{default:!0}});var ne=d(re,2);te(ne,{children:(J,be)=>{at(J,{get defaultValue(){return s(()=>v.graduatingIntervalEasy)},get value(){return t().graduatingIntervalEasy},set value(fe){se(g,s(t).graduatingIntervalEasy=fe,s(t))},children:(fe,pe)=>{ae(fe,{$$events:{click:()=>E(Object.keys(m).indexOf("easyInterval"))},children:(ke,Ve)=>{oe();var ue=ee();B(()=>M(ue,s(()=>m.easyInterval.title))),f(ke,ue)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var $e=d(ne,2);te($e,{children:(J,be)=>{Ke(J,{get warning(){return r(h)}})},$$slots:{default:!0}}),f(A,j)};Le(I,A=>{o()||A(F)})}var Y=d(I,2);te(Y,{children:(A,j)=>{const K=q(()=>($(fn),s(fn)));Pt(A,{get defaultValue(){return s(()=>v.newCardInsertOrder)},get choices(){return r(K)},breakpoint:"md",get value(){return t().newCardInsertOrder},set value(re){se(g,s(t).newCardInsertOrder=re,s(t))},children:(re,ne)=>{ae(re,{$$events:{click:()=>E(Object.keys(m).indexOf("insertionOrder"))},children:($e,J)=>{oe();var be=ee();B(()=>M(be,s(()=>m.insertionOrder.title))),f($e,be)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Q=d(Y,2);te(Q,{children:(A,j)=>{Ke(A,{get warning(){return r(y)}})},$$slots:{default:!0}}),f(D,O)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(T,_)=>{const D=q(()=>($(z),s(()=>Kr())));St(T,{get title(){return r(D)},get url(){return $(he),s(()=>he.DeckOptions.newCards)},slot:"tooltip",get helpSections(){return u},get fsrs(){return o()},$$events:{mount:H=>{c(S,H.detail.modal),c(x,H.detail.carousel)}}})}}}),Re(),i()}var Kf=Z('<div class="show-timer-switch" style="display: contents;"><!></div>'),Xf=Z('<div class="show-timer-switch" style="display: contents;"><!></div>'),Zf=Z("<!> <!> <!> <!>",1);function Jf(n,e){Oe(e,!1);const[a,i]=Ue(),t=()=>ye(l,"$config",a),o=R();let h=G(e,"state",8),y=G(e,"api",8);const l=h().currentConfig,p=h().defaults,g={maximumAnswerSecs:{title:Pu(),help:ku()},showAnswerTimer:{title:_u(),help:wu()},stopTimerOnAnswer:{title:Cu(),help:yu()}},v=Object.values(g);let w=R(),C=R();function P(u){r(w).show(),r(C).to(u)}ce(()=>(t(),z),()=>{c(o,t().capAnswerTimeToSecs>600?xu():"")}),Xe(),Te();const m=q(()=>($(z),s(()=>Xr())));gt(n,{get title(){return r(m)},children:(u,S)=>{vt(u,{get slotHost(){return te},get api(){return y()},children:(x,E)=>{var W=Zf(),T=le(W);te(T,{children:(O,N)=>{at(O,{get defaultValue(){return s(()=>p.capAnswerTimeToSecs)},min:1,max:7200,get value(){return t().capAnswerTimeToSecs},set value(b){se(l,s(t).capAnswerTimeToSecs=b,s(t))},children:(b,I)=>{ae(b,{$$events:{click:()=>P(Object.keys(g).indexOf("maximumAnswerSecs"))},children:(F,Y)=>{oe();var Q=ee();B(()=>M(Q,s(()=>g.maximumAnswerSecs.title))),f(F,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var _=d(T,2);te(_,{children:(O,N)=>{Ke(O,{get warning(){return r(o)}})},$$slots:{default:!0}});var D=d(_,2);te(D,{children:(O,N)=>{var b=Kf(),I=U(b);Je(I,{get defaultValue(){return s(()=>p.showTimer)},get value(){return t().showTimer},set value(F){se(l,s(t).showTimer=F,s(t))},children:(F,Y)=>{ae(F,{$$events:{click:()=>P(Object.keys(g).indexOf("showAnswerTimer"))},children:(Q,A)=>{oe();var j=ee();B(()=>M(j,s(()=>g.showAnswerTimer.title))),f(Q,j)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),L(b),f(O,b)},$$slots:{default:!0}});var H=d(D,2);te(H,{children:(O,N)=>{var b=Xf(),I=U(b);Je(I,{get defaultValue(){return s(()=>p.stopTimerOnAnswer)},get value(){return t().stopTimerOnAnswer},set value(F){se(l,s(t).stopTimerOnAnswer=F,s(t))},children:(F,Y)=>{ae(F,{$$events:{click:()=>P(Object.keys(g).indexOf("stopTimerOnAnswer"))},children:(Q,A)=>{oe();var j=ee();B(()=>M(j,s(()=>g.stopTimerOnAnswer.title))),f(Q,j)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),L(b),f(O,b)},$$slots:{default:!0}}),f(x,W)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(u,S)=>{const x=q(()=>($(z),s(()=>Xr())));St(u,{get title(){return r(x)},get url(){return $(he),s(()=>he.DeckOptions.timer)},slot:"tooltip",get helpSections(){return v},$$events:{mount:E=>{c(w,E.detail.modal),c(C,E.detail.carousel)}}})}}}),Re(),i()}var eg=Z("<!> <!> <!>",1),tg=Z('<datalist id="easy_day_steplist"><option>0.5</option></datalist> <!>',1);function sg(n,e){Oe(e,!1);const[a,i]=Ue(),t=()=>ye(P,"$config",a),o=()=>ye(w,"$fsrsEnabled",a),h=()=>ye(C,"$reschedule",a),y=R(),l=R(),p=R();let g=G(e,"state",8),v=G(e,"api",8);const w=g().fsrs,C=g().fsrsReschedule,P=g().currentConfig,m=g().defaults,u=t().easyDaysPercentages.slice();ce(()=>t(),()=>{t().easyDaysPercentages.length!==7&&se(P,s(t).easyDaysPercentages=m.easyDaysPercentages.slice(),s(t))}),ce(()=>t(),()=>{c(y,t().easyDaysPercentages.some((W,T)=>W!==u[T]))}),ce(()=>(t(),z),()=>{c(l,t().easyDaysPercentages.some(W=>W===1)?"":bu())}),ce(()=>(r(y),o(),h(),z),()=>{c(p,r(y)&&!(o()&&h())?Su():"")}),Xe(),Te();var S=tg(),x=d(le(S),2);const E=q(()=>($(z),s(()=>Mn())));gt(x,{get title(){return r(E)},children:(W,T)=>{vt(W,{get slotHost(){return te},get api(){return v()},children:(_,D)=>{var H=eg(),O=le(H);aa(O,{get values(){return t().easyDaysPercentages},set values(I){se(P,s(t).easyDaysPercentages=I,s(t))},$$legacy:!0});var N=d(O,2);te(N,{children:(I,F)=>{Ke(I,{get warning(){return r(l)}})},$$slots:{default:!0}});var b=d(N,2);te(b,{children:(I,F)=>{Ke(I,{get warning(){return r(p)}})},$$slots:{default:!0}}),f(_,H)},$$slots:{default:!0}})},$$slots:{default:!0}}),f(n,S),Re(),i()}var rg=Z("<div><!> <!> <!> <!> <!></div> <div><!> <!> <!> <!> <!> <!> <!></div>",1),ng=Z('<!> <div class="deck-options-page svelte-htbfcn"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>',1);function ag(n,e){Oe(e,!1);const[a,i]=Ue(),t=()=>ye(h,"$addons",a);let o=G(e,"state",8);const h=o().addonComponents;function y(){return o().currentAuxData}function l(N){xt(h,[...t(),N])}function p(N,b){xt(h,[...t(),{component:Lf,html:N,mounted:b}])}const g={},v={},w={},C={},P={},m={},u={},S={},x={},E={};let W=R();Te();var T=ng(),_=le(T);nf(_,{get state(){return o()},$$events:{presetchange(...N){var b;(b=r(W))==null||b.apply(this,N)}}});var D=d(_,2),H=U(D);qe(H,()=>({"--gutter-inline":"0.25rem","--gutter-block":"0.75rem"})),Tu(H.lastChild,{breakpoint:"sm",class:"container-columns",children:(N,b)=>{var I=rg(),F=le(I),Y=U(F);je(Y,{class:"row-columns",children:(ue,Pe)=>{uf(ue,{get state(){return o()},get api(){return v},get onPresetChange(){return r(W)},set onPresetChange(Ge){c(W,Ge)},$$legacy:!0})},$$slots:{default:!0}});var Q=d(Y,2);je(Q,{class:"row-columns",children:(ue,Pe)=>{Yf(ue,{get state(){return o()},get api(){return w}})},$$slots:{default:!0}});var A=d(Q,2);je(A,{class:"row-columns",children:(ue,Pe)=>{qf(ue,{get state(){return o()},get api(){return C}})},$$slots:{default:!0}});var j=d(A,2);je(j,{class:"row-columns",children:(ue,Pe)=>{df(ue,{get state(){return o()},get api(){return m}})},$$slots:{default:!0}});var K=d(j,2);je(K,{class:"row-columns",children:(ue,Pe)=>{Af(ue,{get state(){return o()},api:{},get onPresetChange(){return r(W)},set onPresetChange(Ge){c(W,Ge)},$$legacy:!0})},$$slots:{default:!0}}),L(F);var re=d(F,2),ne=U(re);je(ne,{class:"row-columns",children:(ue,Pe)=>{jd(ue,{get state(){return o()},get api(){return P}})},$$slots:{default:!0}});var $e=d(ne,2);je($e,{class:"row-columns",children:(ue,Pe)=>{Hd(ue,{get state(){return o()},get api(){return S}})},$$slots:{default:!0}});var J=d($e,2);je(J,{class:"row-columns",children:(ue,Pe)=>{Jf(ue,{get state(){return o()},get api(){return u}})},$$slots:{default:!0}});var be=d(J,2);je(be,{class:"row-columns",children:(ue,Pe)=>{Gd(ue,{get state(){return o()},get api(){return u}})},$$slots:{default:!0}});var fe=d(be,2);{var pe=ue=>{je(ue,{class:"row-columns",children:(Pe,Ge)=>{nd(Pe,{get state(){return o()}})},$$slots:{default:!0}})};Le(fe,ue=>{t(),s(()=>t().length)&&ue(pe)})}var ke=d(fe,2);je(ke,{class:"row-columns",children:(ue,Pe)=>{sg(ue,{get state(){return o()},get api(){return E}})},$$slots:{default:!0}});var Ve=d(ke,2);je(Ve,{class:"row-columns",children:(ue,Pe)=>{Fd(ue,{get state(){return o()},get api(){return x}})},$$slots:{default:!0}}),L(re),f(N,I)},$$slots:{default:!0}}),L(H),L(D),f(n,T),et(e,"auxData",y),et(e,"addSvelteAddon",l),et(e,"addHtmlAddon",p),et(e,"options",g),et(e,"dailyLimits",v),et(e,"newOptions",w),et(e,"lapseOptions",C),et(e,"buryOptions",P),et(e,"displayOrder",m),et(e,"timerOptions",u),et(e,"audioOptions",S),et(e,"advancedOptions",x),et(e,"easyDays",E);var O=Re({auxData:y,addSvelteAddon:l,addHtmlAddon:p,options:g,dailyLimits:v,newOptions:w,lapseOptions:C,buryOptions:P,displayOrder:m,timerOptions:u,audioOptions:S,advancedOptions:x,easyDays:E});return i(),O}function jg(n,e){Oe(e,!1);let a=G(e,"data",8),i=R();globalThis.anki||(globalThis.anki={}),globalThis.anki.deckOptionsPendingChanges=async()=>{await _r(),(!await a().state.isModified()||confirm(Ou()))&&Ia({})},mr(()=>{globalThis.$deckOptions=new Promise((t,o)=>{t(r(i))}),a().state.resolveOriginalConfigs(),Aa({})}),Te(),ss(ag(n,{get state(){return $(a()),s(()=>a().state)},$$legacy:!0}),t=>c(i,t),()=>r(i)),Re()}export{jg as component,Wg as universal};
