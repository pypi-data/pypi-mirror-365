import{g as I,p as W,r as R,c as k,u as L,a as i,m as h,o as X,b as D,n as le,d as P,F as V,i as ie,e as Y,f as de,t as S,h as ce,j as ue,_ as A,k as me,l as be,q as T,s as m,w as f,v as u,x as v,y as j,z as J,A as fe,B as K,C as ve,D as B,E as Q,G as pe,H as we,I as ge}from"./main-Bmi4BPiO.js";import{A as _e,V as Se,a as he,b as ye,U as Te,c as Ve}from"./unauthorized-DXoWE_v2.js";import{S as Ae,a as Ce}from"./settings-drawer-BoAnrKCI.js";import{useAdminStore as $,TABS as Z}from"./admin-mQ-F7brp.js";import{u as xe,V as F,f as Be,m as $e,a as ke,s as De,b as Pe,c as Ie,d as We,e as Le}from"./forwardRefs-FxOC1qa_.js";import{V as M,m as Ue,a as H,b as ze}from"./VWindowItem-Dwb7oeu0.js";import{V as q,m as Ee}from"./VDivider-CSRFyKQO.js";import{u as Me}from"./VDialog-Oz6-kM3S.js";import"./change-password-dialog-DpqXgZ53.js";import"./VForm-BaeKMRS9.js";import"./VSelectionControl-D3h7FjSM.js";import"./ssrBoot-B6P0M2z2.js";import"./copy-to-clipboard-DoUvDJVx.js";const N=Symbol.for("vuetify:v-tabs"),He=W({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...X($e({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),ee=I()({name:"VTab",props:He(),setup(e,t){let{slots:c,attrs:s}=t;const{textColorClasses:r,textColorStyles:n}=xe(()=>e.sliderColor),a=R(),l=R(),d=k(()=>e.direction==="horizontal"),b=k(()=>a.value?.group?.isSelected.value??!1);function U(y){let{value:o}=y;if(o){const z=a.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),E=l.value;if(!z||!E)return;const te=getComputedStyle(z).color,p=z.getBoundingClientRect(),w=E.getBoundingClientRect(),C=d.value?"x":"y",x=d.value?"X":"Y",G=d.value?"right":"bottom",g=d.value?"width":"height",ae=p[C],se=w[C],_=ae>se?p[G]-w[G]:p[C]-w[C],ne=Math.sign(_)>0?d.value?"right":"bottom":Math.sign(_)<0?d.value?"left":"top":"center",oe=(Math.abs(_)+(Math.sign(_)<0?p[g]:w[g]))/Math.max(p[g],w[g])||0,re=p[g]/w[g]||0,O=1.5;ke(E,{backgroundColor:[te,"currentcolor"],transform:[`translate${x}(${_}px) scale${x}(${re})`,`translate${x}(${_/O}px) scale${x}(${(oe-1)/O+1})`,"none"],transformOrigin:Array(3).fill(ne)},{duration:225,easing:De})}}return L(()=>{const y=F.filterProps(e);return i(F,h({symbol:N,ref:a,class:["v-tab",e.class],style:e.style,tabindex:b.value?0:-1,role:"tab","aria-selected":String(b.value),active:!1},y,s,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":U}),{...c,default:()=>D(V,null,[c.default?.()??e.text,!e.hideSlider&&D("div",{ref:l,class:P(["v-tab__slider",r.value]),style:le(n.value)},null)])})}),Be({},a)}}),Ne=W({...X(Ue(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Ge=I()({name:"VTabsWindow",props:Ne(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:c}=t;const s=ie(N,null),r=Y(e,"modelValue"),n=k({get(){return r.value!=null||!s?r.value:s.items.value.find(a=>s.selected.value.includes(a.id))?.value},set(a){r.value=a}});return L(()=>{const a=M.filterProps(e);return i(M,h({_as:"VTabsWindow"},a,{modelValue:n.value,"onUpdate:modelValue":l=>n.value=l,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),c)}),{}}}),Oe=W({...ze()},"VTabsWindowItem"),Re=I()({name:"VTabsWindowItem",props:Oe(),setup(e,t){let{slots:c}=t;return L(()=>{const s=H.filterProps(e);return i(H,h({_as:"VTabsWindowItem"},s,{class:["v-tabs-window-item",e.class],style:e.style}),c)}),{}}});function je(e){return e?e.map(t=>ue(t)?t:{text:t,value:t}):[]}const Fe=W({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ee({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Le(),...We()},"VTabs"),qe=I()({name:"VTabs",props:Fe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:c,slots:s}=t;const r=Y(e,"modelValue"),n=k(()=>je(e.items)),{densityClasses:a}=Pe(e),{backgroundColorClasses:l,backgroundColorStyles:d}=Ie(()=>e.bgColor),{scopeId:b}=Me();return de({VTab:{color:S(()=>e.color),direction:S(()=>e.direction),stacked:S(()=>e.stacked),fixed:S(()=>e.fixedTabs),sliderColor:S(()=>e.sliderColor),hideSlider:S(()=>e.hideSlider)}}),L(()=>{const U=q.filterProps(e),y=!!(s.window||e.items.length>0);return D(V,null,[i(q,h(U,{modelValue:r.value,"onUpdate:modelValue":o=>r.value=o,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},a.value,l.value,e.class],style:[{"--v-tabs-height":ce(e.height)},d.value,e.style],role:"tablist",symbol:N},b,c),{default:()=>[s.default?.()??n.value.map(o=>s.tab?.({item:o})??i(ee,h(o,{key:o.text,value:o.value}),{default:s[`tab.${o.value}`]?()=>s[`tab.${o.value}`]?.({item:o}):void 0}))]}),y&&i(Ge,h({modelValue:r.value,"onUpdate:modelValue":o=>r.value=o,key:"tabs-window"},b),{default:()=>[n.value.map(o=>s.item?.({item:o})??i(Re,{value:o.value},{default:()=>s[`item.${o.value}`]?.({item:o})})),s.window?.()]})])}),{}}}),Xe={name:"AdminTitleToolbar",components:{AppBanner:_e,SettingsDrawerButton:Ae},data(){return{TABS:Z}},head(){return{title:"Admin / "+this.activeTab}},computed:{...me($,["activeTab"]),mdAndDown(){return this.$vuetify.display.mdAndDown}},watch:{$route(e){const c=e.path.split("/").at(-1);this.activeTab=be(c)}}};function Ye(e,t,c,s,r,n){const a=m("AppBanner"),l=m("SettingsDrawerButton");return u(),T("header",{id:"adminHeader",class:P({drawerMargin:!n.mdAndDown})},[i(a),i(Se,{id:"titleBar",flat:"",density:"compact"},{default:f(()=>[t[2]||(t[2]=D("span",{id:"buttonSpacer"},null,-1)),i(he,{class:"codexToolbarTitle"},{default:f(()=>t[1]||(t[1]=[j(" Codex Administration ",-1)])),_:1,__:[1]}),(u(),v(l,{key:n.mdAndDown,class:P(["adminSettingsButton",{invisible:!n.mdAndDown}]),disabled:!n.mdAndDown},null,8,["class","disabled"]))]),_:1,__:[2]}),i(qe,{class:"adminTabs",grow:"","show-arrows":""},{default:f(()=>[(u(!0),T(V,null,J(r.TABS,d=>(u(),v(ee,{key:d,modelValue:e.activeTab,"onUpdate:modelValue":t[0]||(t[0]=b=>e.activeTab=b),to:d.toLowerCase()},{default:f(()=>[j(fe(d),1)]),_:2},1032,["modelValue","to"]))),128))]),_:1})],2)}const Je=A(Xe,[["render",Ye],["__scopeId","data-v-f32749ed"]]),Ke={name:"AdminSettingsPanel",components:{AdminBrowserLink:ye}};function Qe(e,t,c,s,r,n){const a=m("AdminBrowserLink");return u(),v(a)}const Ze=A(Ke,[["render",Qe]]),et={name:"AdminSettingsDrawer",components:{SettingsDrawer:Ce,AdminSettingsPanel:Ze},computed:{mdAndDown(){return this.$vuetify.display.mdAndDown}},watch:{mdAndDown(e){e||this.setSettingsDrawerOpen(!0)}},mounted(){this.mdAndDown||this.setSettingsDrawerOpen(!0)},methods:{...K(ve,["setSettingsDrawerOpen"])}};function tt(e,t,c,s,r,n){const a=m("AdminSettingsPanel"),l=m("SettingsDrawer");return u(),v(l,{title:"Admin",temporary:n.mdAndDown},{panel:f(()=>[i(a)]),_:1},8,["temporary"])}const at=A(et,[["render",tt]]),st={name:"AdminTabs",data(){return{TABS:Z}},computed:{...B($,["doNormalComicLibrariesExist"]),...B(Q,["isBanner"]),...B($,{librariesLoaded:e=>!!e.libraries,activeTab:e=>e.activeTab}),classes(){let e="tabItems";return this.isBanner&&(e+="Banner"),{[e]:!0}}},mounted(){this.librariesLoaded||this.loadTables(["Library"])},methods:{...K($,["loadTables"])}},nt={key:0,id:"noLibraries"};function ot(e,t,c,s,r,n){const a=m("router-view");return u(),T(V,null,[i(M,{modelValue:e.activeTab,"onUpdate:modelValue":t[0]||(t[0]=l=>e.activeTab=l),class:P(n.classes),touch:!1},{default:f(()=>[(u(!0),T(V,null,J(r.TABS,l=>(u(),v(a,{key:l},{default:f(({Component:d})=>[i(H,{value:l,class:"tabItemContainer"},{default:f(()=>[(u(),v(we(d)))]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1},8,["modelValue","class"]),e.doNormalComicLibrariesExist?pe("",!0):(u(),T("div",nt," Codex has no libraries. Select the Libraries tab and add a comic library. "))],64)}const rt=A(st,[["render",ot],["__scopeId","data-v-51c14a36"]]),lt={name:"MainAdmin",components:{AdminHeader:Je,AdminSettingsDrawer:at,AdminTabs:rt,Unauthorized:Te},data(){return{mdiLogin:ge}},computed:{...B(Q,["isUserAdmin"])}};function it(e,t,c,s,r,n){const a=m("AdminHeader"),l=m("AdminTabs"),d=m("AdminSettingsDrawer"),b=m("Unauthorized");return e.isUserAdmin?(u(),v(Ve,{key:0},{default:f(()=>[i(a),i(l),i(d)]),_:1})):(u(),v(b,{key:1}))}const Tt=A(lt,[["render",it]]);export{Tt as default};
