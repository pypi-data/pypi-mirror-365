(function(){"use strict";const Et="AAK"+Object.keys({light:"mapbox://styles/mapbox/light-v10",dark:"mapbox://styles/vsp-tu-berlin/ckek59op0011219pbwfar1rex",transparentLight:"mapbox://styles/vsp-tu-berlin/clgxnk7m500dt01p687w8e693",transparentDark:"mapbox://styles/vsp-tu-berlin/clgwrqa0w00av01pg5jox0a35"}).length+"QRQ0EldfvmCW4Cyu";var ie=(t=>(t[t.NUMBER=0]="NUMBER",t[t.STRING=1]="STRING",t[t.BOOLEAN=2]="BOOLEAN",t[t.DATE=3]="DATE",t[t.LOOKUP=4]="LOOKUP",t[t.UNKNOWN=5]="UNKNOWN",t))(ie||{});function Cr(){return this._source.cancel()}function vt(t){return/^[nf]$/i.test(t)?!1:/^[yt]$/i.test(t)?!0:null}function Ct(t){return new Date(+t.substring(0,4),t.substring(4,6)-1,+t.substring(6,8))}function ye(t){return!(t=t.trim())||isNaN(t=+t)?null:t}function St(t){return t.trim()||null}var Sr={B:ye,C:St,D:Ct,F:ye,L:vt,M:ye,N:ye};function wr(){var t=this,e=1;return t._source.slice(t._recordLength).then(function(r){return r&&r[0]!==26?{done:!1,value:t._fields.reduce(function(n,s){return n[s.name]=Sr[s.type](t._decode(r.subarray(e,e+=s.length))),n},{})}:{done:!0,value:void 0}})}var wt={B:ye,C:St,D:Ct,F:ye,L:vt,M:ye,N:ye};const xr={B:ie.NUMBER,C:ie.STRING,D:ie.DATE,F:ie.NUMBER,L:ie.BOOLEAN,M:ie.NUMBER,N:ie.NUMBER};function $r(t,e){const r=new Uint8Array(t),n=new DataView(t.slice(0,32)),s=n.getUint16(8,!0),o=new DataView(t.slice(32,s)),i=new xt(r,e,n,o),u={},a=Math.round((r.byteLength-s-1)/i._recordLength);i._fields.length;for(const g of i._fields){const d=xr[g.type],R={values:wt[g.type]===ye?new Float32Array(a):[],name:g.name,type:d};u[g.name]=R}let l=0;const p=r.byteLength;try{for(;;){const g=s+l*i._recordLength;if(g+i._recordLength>p)break;const d=r.slice(g,g+i._recordLength);if(d&&d[0]!==26){let b=1;i._fields.reduce(function(R,v){const P=wt[v.type](i._decode(d.slice(b,b+v.length)));u[v.name].values[l]=P,b=b+v.length},{})}else break;l++}}catch(g){console.warn(g)}return console.log("dbf total records",l),u}function xt(t,e,r,n){this._source=t,this._decode=e.decode.bind(e),this._recordLength=r.getUint16(10,!0),this._fields=[];for(var s=0;n.getUint8(s)!==13;s+=32){for(var o=0;o<11&&n.getUint8(s+o)!==0;++o);this._fields.push({name:this._decode(new Uint8Array(n.buffer,n.byteOffset+s,o)),type:String.fromCharCode(n.getUint8(s+11)),length:n.getUint8(s+16)})}}var $t=xt.prototype;$t.read=wr,$t.cancel=Cr;var Nr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ze(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Or(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Nt={exports:{}};/* @license
Papa Parse
v5.3.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(r,n){t.exports=n()})(Nr,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s=!n.document&&!!n.postMessage,o=s&&/blob:/i.test((n.location||{}).protocol),i={},u=0,a={},l=[];if(a.parse=function(h,f){var c=(f=f||{}).dynamicTyping||!1;if(x(c)&&(f.dynamicTypingFunction=c,c={}),f.dynamicTyping=c,f.transform=!!x(f.transform)&&f.transform,f.worker&&a.WORKERS_SUPPORTED){var S=function(){if(!a.WORKERS_SUPPORTED)return!1;var H=(A=n.URL||n.webkitURL||null,M=r.toString(),a.BLOB_URL||(a.BLOB_URL=A.createObjectURL(new Blob(["(",M,")();"],{type:"text/javascript"})))),m=new n.Worker(H),A,M;return m.onmessage=z,m.id=u++,i[m.id]=m}();return S.userStep=f.step,S.userChunk=f.chunk,S.userComplete=f.complete,S.userError=f.error,f.step=x(f.step),f.chunk=x(f.chunk),f.complete=x(f.complete),f.error=x(f.error),delete f.worker,void S.postMessage({input:h,config:f,workerId:S.id})}var C=null;return a.NODE_STREAM_INPUT,typeof h=="string"?C=f.download?new d(f):new R(f):h.readable===!0&&x(h.read)&&x(h.on)?C=new v(f):(n.File&&h instanceof File||h instanceof Object)&&(C=new b(f)),C.stream(h)},a.unparse=function(h,f){var c=!1,S=!0,C=",",H=`\r
`,m='"',A=m+m,M=!1,_=null,U=!1;(function(){if(typeof f=="object"){if(typeof f.delimiter!="string"||a.BAD_DELIMITERS.filter(function(N){return f.delimiter.indexOf(N)!==-1}).length||(C=f.delimiter),(typeof f.quotes=="boolean"||typeof f.quotes=="function"||Array.isArray(f.quotes))&&(c=f.quotes),typeof f.skipEmptyLines!="boolean"&&typeof f.skipEmptyLines!="string"||(M=f.skipEmptyLines),typeof f.newline=="string"&&(H=f.newline),typeof f.quoteChar=="string"&&(m=f.quoteChar),typeof f.header=="boolean"&&(S=f.header),Array.isArray(f.columns)){if(f.columns.length===0)throw new Error("Option columns is empty");_=f.columns}f.escapeChar!==void 0&&(A=f.escapeChar+m),(typeof f.escapeFormulae=="boolean"||f.escapeFormulae instanceof RegExp)&&(U=f.escapeFormulae instanceof RegExp?f.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var T=new RegExp(B(m),"g");if(typeof h=="string"&&(h=JSON.parse(h)),Array.isArray(h)){if(!h.length||Array.isArray(h[0]))return q(null,h,M);if(typeof h[0]=="object")return q(_||Object.keys(h[0]),h,M)}else if(typeof h=="object")return typeof h.data=="string"&&(h.data=JSON.parse(h.data)),Array.isArray(h.data)&&(h.fields||(h.fields=h.meta&&h.meta.fields||_),h.fields||(h.fields=Array.isArray(h.data[0])?h.fields:typeof h.data[0]=="object"?Object.keys(h.data[0]):[]),Array.isArray(h.data[0])||typeof h.data[0]=="object"||(h.data=[h.data])),q(h.fields||[],h.data||[],M);throw new Error("Unable to serialize unrecognized input");function q(N,G,X){var O="";typeof N=="string"&&(N=JSON.parse(N)),typeof G=="string"&&(G=JSON.parse(G));var j=Array.isArray(N)&&0<N.length,ee=!Array.isArray(G[0]);if(j&&S){for(var E=0;E<N.length;E++)0<E&&(O+=C),O+=Y(N[E],E);0<G.length&&(O+=H)}for(var w=0;w<G.length;w++){var y=j?N.length:G[w].length,$=!1,F=j?Object.keys(G[w]).length===0:G[w].length===0;if(X&&!j&&($=X==="greedy"?G[w].join("").trim()==="":G[w].length===1&&G[w][0].length===0),X==="greedy"&&j){for(var L=[],k=0;k<y;k++){var K=ee?N[k]:k;L.push(G[w][K])}$=L.join("").trim()===""}if(!$){for(var I=0;I<y;I++){0<I&&!F&&(O+=C);var ve=j&&ee?N[I]:I;O+=Y(G[w][ve],I)}w<G.length-1&&(!X||0<y&&!F)&&(O+=H)}}return O}function Y(N,G){if(N==null)return"";if(N.constructor===Date)return JSON.stringify(N).slice(1,25);var X=!1;U&&typeof N=="string"&&U.test(N)&&(N="'"+N,X=!0);var O=N.toString().replace(T,A);return(X=X||c===!0||typeof c=="function"&&c(N,G)||Array.isArray(c)&&c[G]||function(j,ee){for(var E=0;E<ee.length;E++)if(-1<j.indexOf(ee[E]))return!0;return!1}(O,a.BAD_DELIMITERS)||-1<O.indexOf(C)||O.charAt(0)===" "||O.charAt(O.length-1)===" ")?m+O+m:O}},a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!s&&!!n.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=J,a.ParserHandle=P,a.NetworkStreamer=d,a.FileStreamer=b,a.StringStreamer=R,a.ReadableStreamStreamer=v,n.jQuery){var p=n.jQuery;p.fn.parse=function(h){var f=h.config||{},c=[];return this.each(function(H){if(!(p(this).prop("tagName").toUpperCase()==="INPUT"&&p(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var m=0;m<this.files.length;m++)c.push({file:this.files[m],inputElem:this,instanceConfig:p.extend({},f)})}),S(),this;function S(){if(c.length!==0){var H,m,A,M,_=c[0];if(x(h.before)){var U=h.before(_.file,_.inputElem);if(typeof U=="object"){if(U.action==="abort")return H="AbortError",m=_.file,A=_.inputElem,M=U.reason,void(x(h.error)&&h.error({name:H},m,A,M));if(U.action==="skip")return void C();typeof U.config=="object"&&(_.instanceConfig=p.extend(_.instanceConfig,U.config))}else if(U==="skip")return void C()}var T=_.instanceConfig.complete;_.instanceConfig.complete=function(q){x(T)&&T(q,_.file,_.inputElem),C()},a.parse(_.file,_.instanceConfig)}else x(h.complete)&&h.complete()}function C(){c.splice(0,1),S()}}}function g(h){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],comments:[],meta:{}},function(f){var c=ce(f);c.chunkSize=parseInt(c.chunkSize),f.step||f.chunk||(c.chunkSize=null),this._handle=new P(c),(this._handle.streamer=this)._config=c}.call(this,h),this.parseChunk=function(f,c){if(this.isFirstChunk&&x(this._config.beforeFirstChunk)){var S=this._config.beforeFirstChunk(f);S!==void 0&&(f=S)}this.isFirstChunk=!1,this._halted=!1;var C=this._partialLine+f;this._partialLine="";var H=this._handle.parse(C,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var m=H.meta.cursor;this._finished||(this._partialLine=C.substring(m-this._baseIndex),this._baseIndex=m),H&&H.data&&(this._rowCount+=H.data.length);var A=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)n.postMessage({results:H,workerId:a.WORKER_ID,finished:A});else if(x(this._config.chunk)&&!c){if(this._config.chunk(H,this._handle),l=[],this._handle.paused()||this._handle.aborted())return void(this._halted=!0);H=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(H.data),this._completeResults.errors=this._completeResults.errors.concat(H.errors),this._completeResults.comments=this._completeResults.comments.concat(H.comments),this._completeResults.meta=H.meta),this._completed||!A||!x(this._config.complete)||H&&H.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),A||H&&H.meta.paused||this._nextChunk(),H}this._halted=!0},this._sendError=function(f){x(this._config.error)?this._config.error(f):o&&this._config.error&&n.postMessage({workerId:a.WORKER_ID,error:f,finished:!1})}}function d(h){var f;(h=h||{}).chunkSize||(h.chunkSize=a.RemoteChunkSize),g.call(this,h),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(c){this._input=c,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(f=new XMLHttpRequest,this._config.withCredentials&&(f.withCredentials=this._config.withCredentials),s||(f.onload=W(this._chunkLoaded,this),f.onerror=W(this._chunkError,this)),f.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var c=this._config.downloadRequestHeaders;for(var S in c)f.setRequestHeader(S,c[S])}if(this._config.chunkSize){var C=this._start+this._config.chunkSize-1;f.setRequestHeader("Range","bytes="+this._start+"-"+C)}try{f.send(this._config.downloadRequestBody)}catch(H){this._chunkError(H.message)}s&&f.status===0&&this._chunkError()}},this._chunkLoaded=function(){var c;f.readyState===4&&(f.status<200||400<=f.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:f.responseText.length,this._finished=!this._config.chunkSize||this._start>=((c=f.getResponseHeader("Content-Range"))!==null?parseInt(c.substring(c.lastIndexOf("/")+1)):-1),this.parseChunk(f.responseText)))},this._chunkError=function(c){var S=f.statusText||c;this._sendError(new Error(S))}}function b(h){var f,c;(h=h||{}).chunkSize||(h.chunkSize=a.LocalChunkSize),g.call(this,h);var S=typeof FileReader<"u";this.stream=function(C){this._input=C,c=C.slice||C.webkitSlice||C.mozSlice,S?((f=new FileReader).onload=W(this._chunkLoaded,this),f.onerror=W(this._chunkError,this)):f=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var C=this._input;if(this._config.chunkSize){var H=Math.min(this._start+this._config.chunkSize,this._input.size);C=c.call(C,this._start,H)}var m=f.readAsText(C,this._config.encoding);S||this._chunkLoaded({target:{result:m}})},this._chunkLoaded=function(C){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(C.target.result)},this._chunkError=function(){this._sendError(f.error)}}function R(h){var f;g.call(this,h=h||{}),this.stream=function(c){return f=c,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var c,S=this._config.chunkSize;return f=S?(c=f.substring(0,S),f.substring(S)):(c=f,""),this._finished=!f,this.parseChunk(c)}}}function v(h){g.call(this,h=h||{});var f=[],c=!0,S=!1;this.pause=function(){g.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){g.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(C){this._input=C,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){S&&f.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),f.length?this.parseChunk(f.shift()):c=!0},this._streamData=W(function(C){try{f.push(typeof C=="string"?C:C.toString(this._config.encoding)),c&&(c=!1,this._checkIsFinished(),this.parseChunk(f.shift()))}catch(H){this._streamError(H)}},this),this._streamError=W(function(C){this._streamCleanUp(),this._sendError(C)},this),this._streamEnd=W(function(){this._streamCleanUp(),S=!0,this._streamData("")},this),this._streamCleanUp=W(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function P(h){var f,c,S,C=Math.pow(2,53),H=-C,m=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,A=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,M=this,_=0,U=0,T=!1,q=!1,Y=[],N={data:[],errors:[],comments:[],meta:{}};if(x(h.step)){var G=h.step;h.step=function(w){if(N=w,j())O();else{if(O(),N.data.length===0)return;_+=w.data.length,h.preview&&_>h.preview?c.abort():(N.data=N.data[0],G(N,M))}}}function X(w){return h.skipEmptyLines==="greedy"?w.join("").trim()==="":w.length===1&&w[0].length===0}function O(){return N&&S&&(E("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),S=!1),h.skipEmptyLines&&(N.data=N.data.filter(function(w){return!X(w)})),j()&&function(){if(!N)return;function w($,F){x(h.transformHeader)&&($=h.transformHeader($,F)),Y.push($)}if(Array.isArray(N.data[0])){for(var y=0;j()&&y<N.data.length;y++)N.data[y].forEach(w);N.data.splice(0,1)}else N.data.forEach(w)}(),function(){if(!N||!h.header&&!h.dynamicTyping&&!h.transform)return N;function w($,F){var L,k=h.header?{}:[];for(L=0;L<$.length;L++){var K=L,I=$[L];h.header&&(K=L>=Y.length?"__parsed_extra":Y[L]),h.transform&&(I=h.transform(I,K)),I=ee(K,I),K==="__parsed_extra"?(k[K]=k[K]||[],k[K].push(I)):k[K]=I}return h.header&&(L>Y.length?E("FieldMismatch","TooManyFields","Too many fields: expected "+Y.length+" fields but parsed "+L,U+F):L<Y.length&&E("FieldMismatch","TooFewFields","Too few fields: expected "+Y.length+" fields but parsed "+L,U+F)),k}var y=1;return!N.data.length||Array.isArray(N.data[0])?(N.data=N.data.map(w),y=N.data.length):N.data=w(N.data,0),h.header&&N.meta&&(N.meta.fields=Y),U+=y,N}()}function j(){return h.header&&Y.length===0}function ee(w,y){return $=w,h.dynamicTypingFunction&&h.dynamicTyping[$]===void 0&&(h.dynamicTyping[$]=h.dynamicTypingFunction($)),(h.dynamicTyping[$]||h.dynamicTyping)===!0?y==="true"||y==="TRUE"||y!=="false"&&y!=="FALSE"&&(y.startsWith('"')?y.slice(1):function(F){if(m.test(F)){var L=parseFloat(F);if(H<L&&L<C)return!0}return!1}(y)?parseFloat(y):A.test(y)?new Date(y):y===""?null:y):y;var $}function E(w,y,$,F){var L={type:w,code:y,message:$};F!==void 0&&(L.row=F),N.errors.push(L)}this.parse=function(w,y,$){var F=h.quoteChar||'"';if(h.newline||(h.newline=function(K,I){K=K.substring(0,1048576);var ve=new RegExp(B(I)+"([^]*?)"+B(I),"gm"),pe=(K=K.replace(ve,"")).split("\r"),fe=K.split(`
`),Ce=1<fe.length&&fe[0].length<pe[0].length;if(pe.length===1||Ce)return`
`;for(var Ae=0,he=0;he<pe.length;he++)pe[he][0]===`
`&&Ae++;return Ae>=pe.length/2?`\r
`:"\r"}(w,F)),S=!1,h.delimiter)x(h.delimiter)&&(h.delimiter=h.delimiter(w),N.meta.delimiter=h.delimiter);else{var L=function(K,I,ve,pe,fe){var Ce,Ae,he,re;fe=fe||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var Se=0;Se<fe.length;Se++){var se=fe[Se],we=0,Re=0,vr=0;he=void 0;for(var Ue=new J({comments:pe,delimiter:se,newline:I,preview:10}).parse(K),je=0;je<Ue.data.length;je++)if(ve&&X(Ue.data[je]))vr++;else{var Ge=Ue.data[je].length;Re+=Ge,he!==void 0?0<Ge&&(we+=Math.abs(Ge-he),he=Ge):he=Ge}0<Ue.data.length&&(Re/=Ue.data.length-vr),(Ae===void 0||we<=Ae)&&(re===void 0||re<Re)&&1.99<Re&&(Ae=we,Ce=se,re=Re)}return{successful:!!(h.delimiter=Ce),bestDelimiter:Ce}}(w,h.newline,h.skipEmptyLines,h.comments,h.delimitersToGuess);L.successful?h.delimiter=L.bestDelimiter:(S=!0,h.delimiter=a.DefaultDelimiter),N.meta.delimiter=h.delimiter}var k=ce(h);return h.preview&&h.header&&k.preview++,f=w,c=new J(k),N=c.parse(f,y,$),O(),T?{meta:{paused:!0}}:N||{meta:{paused:!1}}},this.paused=function(){return T},this.pause=function(){T=!0,c.abort(),f=x(h.chunk)?"":f.substring(c.getCharIndex())},this.resume=function(){M.streamer._halted?(T=!1,M.streamer.parseChunk(f,!0)):setTimeout(M.resume,3)},this.aborted=function(){return q},this.abort=function(){q=!0,c.abort(),N.meta.aborted=!0,x(h.complete)&&h.complete(N),f=""}}function B(h){return h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function J(h){var f,c=(h=h||{}).delimiter,S=h.newline,C=h.comments,H=h.step,m=h.preview,A=h.fastMode,M=f=h.quoteChar===void 0||h.quoteChar===null?'"':h.quoteChar;if(h.escapeChar!==void 0&&(M=h.escapeChar),(typeof c!="string"||-1<a.BAD_DELIMITERS.indexOf(c))&&(c=","),C===c)throw new Error("Comment character same as delimiter");C===!0?C="#":(typeof C!="string"||-1<a.BAD_DELIMITERS.indexOf(C))&&(C=!1),S!==`
`&&S!=="\r"&&S!==`\r
`&&(S=`
`);var _=0,U=!1;this.parse=function(T,q,Y){if(typeof T!="string")throw new Error("Input must be a string");var N=T.length,G=c.length,X=S.length,O=C.length,j=x(H),ee=[],E=[],w=[],y=_=0;if(!T)return re();if(A||A!==!1&&T.indexOf(f)===-1){for(var $=T.split(S),F=0;F<$.length;F++){if(w=$[F],_+=w.length,F!==$.length-1)_+=S.length;else if(Y)return re();if(C&&w.substring(0,O)===C)l.push(w);else{if(j){if(ee=[],fe(w.split(c)),Se(),U)return re()}else fe(w.split(c));if(m&&m<=F)return ee=ee.slice(0,m),re(!0)}}return re()}for(var L=T.indexOf(c,_),k=T.indexOf(S,_),K=new RegExp(B(M)+B(f),"g"),I=T.indexOf(f,_);;)if(T[_]!==f)if(C&&w.length===0&&T.substring(_,_+O)===C){if(k===-1)return re();_=k+X,k=T.indexOf(S,_),L=T.indexOf(c,_)}else if(L!==-1&&(L<k||k===-1))w.push(T.substring(_,L)),_=L+G,L=T.indexOf(c,_);else{if(k===-1)break;if(w.push(T.substring(_,k)),he(k+X),j&&(Se(),U))return re();if(m&&ee.length>=m)return re(!0)}else for(I=_,_++;;){if((I=T.indexOf(f,I+1))===-1)return Y||E.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ee.length,index:_}),Ae();if(I===N-1)return Ae(T.substring(_,I).replace(K,f));if(f!==M||T[I+1]!==M){if(f===M||I===0||T[I-1]!==M){L!==-1&&L<I+1&&(L=T.indexOf(c,I+1)),k!==-1&&k<I+1&&(k=T.indexOf(S,I+1));var ve=Ce(k===-1?L:Math.min(L,k));if(T.substr(I+1+ve,G)===c){w.push(T.substring(_-1,I).replace(K,f)),T[_=I+1+ve+G]!==f&&(I=T.indexOf(f,_)),L=T.indexOf(c,_),k=T.indexOf(S,_);break}var pe=Ce(k);if(T.substring(I+1+pe,I+1+pe+X)===S){if(w.push(T.substring(_-1,I).replace(K,f)),he(I+1+pe+X),L=T.indexOf(c,_),I=T.indexOf(f,_),j&&(Se(),U))return re();if(m&&ee.length>=m)return re(!0);break}E.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ee.length,index:_}),I++}}else I++}return Ae();function fe(se){ee.push(se),y=_}function Ce(se){var we=0;if(se!==-1){var Re=T.substring(I+1,se);Re&&Re.trim()===""&&(we=Re.length)}return we}function Ae(se){return Y||(se===void 0&&(se=T.substring(_)),w.push(se),_=N,fe(w),j&&Se()),re()}function he(se){_=se,fe(w),w=[],k=T.indexOf(S,_)}function re(se){var we=JSON.parse(JSON.stringify(l));return{data:ee,errors:E,comments:we,meta:{delimiter:c,linebreak:S,aborted:U,truncated:!!se,cursor:y+(q||0)}}}function Se(){H(re()),ee=[],E=[]}},this.abort=function(){U=!0},this.getCharIndex=function(){return _}}function z(h){var f=h.data,c=i[f.workerId],S=!1;if(f.error)c.userError(f.error,f.file);else if(f.results&&f.results.data){var C={abort:function(){S=!0,le(f.workerId,{data:[],comments:[],errors:[],meta:{aborted:!0}})},pause:te,resume:te};if(x(c.userStep)){for(var H=0;H<f.results.data.length&&(c.userStep({data:f.results.data[H],errors:f.results.errors,comments:f.results.comments,meta:f.results.meta},C),!S);H++);delete f.results}else x(c.userChunk)&&(c.userChunk(f.results,C,f.file),delete f.results)}f.finished&&!S&&le(f.workerId,f.results)}function le(h,f){var c=i[h];x(c.userComplete)&&c.userComplete(f),c.terminate(),delete i[h]}function te(){throw new Error("Not implemented.")}function ce(h){if(typeof h!="object"||h===null)return h;var f=Array.isArray(h)?[]:{};for(var c in h)f[c]=ce(h[c]);return f}function W(h,f){return function(){h.apply(f,arguments)}}function x(h){return typeof h=="function"}return o&&(n.onmessage=function(h){var f=h.data;if(a.WORKER_ID===void 0&&f&&(a.WORKER_ID=f.workerId),typeof f.input=="string")n.postMessage({workerId:a.WORKER_ID,results:a.parse(f.input,f.config),finished:!0});else if(n.File&&f.input instanceof File||f.input instanceof Object){var c=a.parse(f.input,f.config);c&&n.postMessage({workerId:a.WORKER_ID,results:c,finished:!0})}}),(d.prototype=Object.create(g.prototype)).constructor=d,(b.prototype=Object.create(g.prototype)).constructor=b,(R.prototype=Object.create(R.prototype)).constructor=R,(v.prototype=Object.create(g.prototype)).constructor=v,a})})(Nt);var Tr=Nt.exports,Lr=Ze(Tr),Hr={},kr=Object.freeze({__proto__:null,default:Hr}),Ot=Or(kr),ze={};(function(t){t.isInteger=e=>typeof e=="number"?Number.isInteger(e):typeof e=="string"&&e.trim()!==""?Number.isInteger(Number(e)):!1,t.find=(e,r)=>e.nodes.find(n=>n.type===r),t.exceedsLimit=(e,r,n=1,s)=>s===!1||!t.isInteger(e)||!t.isInteger(r)?!1:(Number(r)-Number(e))/Number(n)>=s,t.escapeNode=(e,r=0,n)=>{const s=e.nodes[r];s&&(n&&s.type===n||s.type==="open"||s.type==="close")&&s.escaped!==!0&&(s.value="\\"+s.value,s.escaped=!0)},t.encloseBrace=e=>e.type!=="brace"||e.commas>>0+e.ranges>>0?!1:(e.invalid=!0,!0),t.isInvalidBrace=e=>e.type!=="brace"?!1:e.invalid===!0||e.dollar?!0:!(e.commas>>0+e.ranges>>0)||e.open!==!0||e.close!==!0?(e.invalid=!0,!0):!1,t.isOpenOrClose=e=>e.type==="open"||e.type==="close"?!0:e.open===!0||e.close===!0,t.reduce=e=>e.reduce((r,n)=>(n.type==="text"&&r.push(n.value),n.type==="range"&&(n.type="text"),r),[]),t.flatten=(...e)=>{const r=[],n=s=>{for(let o=0;o<s.length;o++){const i=s[o];if(Array.isArray(i)){n(i);continue}i!==void 0&&r.push(i)}return r};return n(e),r}})(ze);const Tt=ze;var Ve=(t,e={})=>{const r=(n,s={})=>{const o=e.escapeInvalid&&Tt.isInvalidBrace(s),i=n.invalid===!0&&e.escapeInvalid===!0;let u="";if(n.value)return(o||i)&&Tt.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(const a of n.nodes)u+=r(a);return u};return r(t)};/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */var Ir=function(t){return typeof t=="number"?t-t===0:typeof t=="string"&&t.trim()!==""?Number.isFinite?Number.isFinite(+t):isFinite(+t):!1};/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const Lt=Ir,xe=(t,e,r)=>{if(Lt(t)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(e===void 0||t===e)return String(t);if(Lt(e)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let n={relaxZeros:!0,...r};typeof n.strictZeros=="boolean"&&(n.relaxZeros=n.strictZeros===!1);let s=String(n.relaxZeros),o=String(n.shorthand),i=String(n.capture),u=String(n.wrap),a=t+":"+e+"="+s+o+i+u;if(xe.cache.hasOwnProperty(a))return xe.cache[a].result;let l=Math.min(t,e),p=Math.max(t,e);if(Math.abs(l-p)===1){let v=t+"|"+e;return n.capture?`(${v})`:n.wrap===!1?v:`(?:${v})`}let g=Mt(t)||Mt(e),d={min:t,max:e,a:l,b:p},b=[],R=[];if(g&&(d.isPadded=g,d.maxLen=String(d.max).length),l<0){let v=p<0?Math.abs(p):1;R=Ht(v,Math.abs(l),d,n),l=d.a=0}return p>=0&&(b=Ht(l,p,d,n)),d.negatives=R,d.positives=b,d.result=Fr(R,b),n.capture===!0?d.result=`(${d.result})`:n.wrap!==!1&&b.length+R.length>1&&(d.result=`(?:${d.result})`),xe.cache[a]=d,d.result};function Fr(t,e,r){let n=Ye(t,e,"-",!1)||[],s=Ye(e,t,"",!1)||[],o=Ye(t,e,"-?",!0)||[];return n.concat(o).concat(s).join("|")}function Pr(t,e){let r=1,n=1,s=It(t,r),o=new Set([e]);for(;t<=s&&s<=e;)o.add(s),r+=1,s=It(t,r);for(s=Ft(e+1,n)-1;t<s&&s<=e;)o.add(s),n+=1,s=Ft(e+1,n)-1;return o=[...o],o.sort(Ur),o}function Mr(t,e,r){if(t===e)return{pattern:t,count:[],digits:0};let n=Br(t,e),s=n.length,o="",i=0;for(let u=0;u<s;u++){let[a,l]=n[u];a===l?o+=a:a!=="0"||l!=="9"?o+=Gr(a,l):i++}return i&&(o+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:o,count:[i],digits:s}}function Ht(t,e,r,n){let s=Pr(t,e),o=[],i=t,u;for(let a=0;a<s.length;a++){let l=s[a],p=Mr(String(i),String(l),n),g="";if(!r.isPadded&&u&&u.pattern===p.pattern){u.count.length>1&&u.count.pop(),u.count.push(p.count[0]),u.string=u.pattern+Pt(u.count),i=l+1;continue}r.isPadded&&(g=zr(l,r,n)),p.string=g+p.pattern+Pt(p.count),o.push(p),i=l+1,u=p}return o}function Ye(t,e,r,n,s){let o=[];for(let i of t){let{string:u}=i;!n&&!kt(e,"string",u)&&o.push(r+u),n&&kt(e,"string",u)&&o.push(r+u)}return o}function Br(t,e){let r=[];for(let n=0;n<t.length;n++)r.push([t[n],e[n]]);return r}function Ur(t,e){return t>e?1:e>t?-1:0}function kt(t,e,r){return t.some(n=>n[e]===r)}function It(t,e){return Number(String(t).slice(0,-e)+"9".repeat(e))}function Ft(t,e){return t-t%Math.pow(10,e)}function Pt(t){let[e=0,r=""]=t;return r||e>1?`{${e+(r?","+r:"")}}`:""}function Gr(t,e,r){return`[${t}${e-t===1?"":"-"}${e}]`}function Mt(t){return/^-?(0+)\d/.test(t)}function zr(t,e,r){if(!e.isPadded)return t;let n=Math.abs(e.maxLen-String(t).length),s=r.relaxZeros!==!1;switch(n){case 0:return"";case 1:return s?"0?":"0";case 2:return s?"0{0,2}":"00";default:return s?`0{0,${n}}`:`0{${n}}`}}xe.cache={},xe.clearCache=()=>xe.cache={};var Kr=xe;/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const Dr=Ot,Bt=Kr,Ut=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),Wr=t=>e=>t===!0?Number(e):String(e),Je=t=>typeof t=="number"||typeof t=="string"&&t!=="",He=t=>Number.isInteger(+t),et=t=>{let e=`${t}`,r=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++r]==="0";);return r>0},qr=(t,e,r)=>typeof t=="string"||typeof e=="string"?!0:r.stringify===!0,Xr=(t,e,r)=>{if(e>0){let n=t[0]==="-"?"-":"";n&&(t=t.slice(1)),t=n+t.padStart(n?e-1:e,"0")}return r===!1?String(t):t},Ke=(t,e)=>{let r=t[0]==="-"?"-":"";for(r&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return r?"-"+t:t},Qr=(t,e,r)=>{t.negatives.sort((u,a)=>u<a?-1:u>a?1:0),t.positives.sort((u,a)=>u<a?-1:u>a?1:0);let n=e.capture?"":"?:",s="",o="",i;return t.positives.length&&(s=t.positives.map(u=>Ke(String(u),r)).join("|")),t.negatives.length&&(o=`-(${n}${t.negatives.map(u=>Ke(String(u),r)).join("|")})`),s&&o?i=`${s}|${o}`:i=s||o,e.wrap?`(${n}${i})`:i},Gt=(t,e,r,n)=>{if(r)return Bt(t,e,{wrap:!1,...n});let s=String.fromCharCode(t);if(t===e)return s;let o=String.fromCharCode(e);return`[${s}-${o}]`},zt=(t,e,r)=>{if(Array.isArray(t)){let n=r.wrap===!0,s=r.capture?"":"?:";return n?`(${s}${t.join("|")})`:t.join("|")}return Bt(t,e,r)},Kt=(...t)=>new RangeError("Invalid range arguments: "+Dr.inspect(...t)),Dt=(t,e,r)=>{if(r.strictRanges===!0)throw Kt([t,e]);return[]},jr=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},Zr=(t,e,r=1,n={})=>{let s=Number(t),o=Number(e);if(!Number.isInteger(s)||!Number.isInteger(o)){if(n.strictRanges===!0)throw Kt([t,e]);return[]}s===0&&(s=0),o===0&&(o=0);let i=s>o,u=String(t),a=String(e),l=String(r);r=Math.max(Math.abs(r),1);let p=et(u)||et(a)||et(l),g=p?Math.max(u.length,a.length,l.length):0,d=p===!1&&qr(t,e,n)===!1,b=n.transform||Wr(d);if(n.toRegex&&r===1)return Gt(Ke(t,g),Ke(e,g),!0,n);let R={negatives:[],positives:[]},v=J=>R[J<0?"negatives":"positives"].push(Math.abs(J)),P=[],B=0;for(;i?s>=o:s<=o;)n.toRegex===!0&&r>1?v(s):P.push(Xr(b(s,B),g,d)),s=i?s-r:s+r,B++;return n.toRegex===!0?r>1?Qr(R,n,g):zt(P,null,{wrap:!1,...n}):P},Vr=(t,e,r=1,n={})=>{if(!He(t)&&t.length>1||!He(e)&&e.length>1)return Dt(t,e,n);let s=n.transform||(d=>String.fromCharCode(d)),o=`${t}`.charCodeAt(0),i=`${e}`.charCodeAt(0),u=o>i,a=Math.min(o,i),l=Math.max(o,i);if(n.toRegex&&r===1)return Gt(a,l,!1,n);let p=[],g=0;for(;u?o>=i:o<=i;)p.push(s(o,g)),o=u?o-r:o+r,g++;return n.toRegex===!0?zt(p,null,{wrap:!1,options:n}):p},De=(t,e,r,n={})=>{if(e==null&&Je(t))return[t];if(!Je(t)||!Je(e))return Dt(t,e,n);if(typeof r=="function")return De(t,e,1,{transform:r});if(Ut(r))return De(t,e,0,r);let s={...n};return s.capture===!0&&(s.wrap=!0),r=r||s.step||1,He(r)?He(t)&&He(e)?Zr(t,e,r,s):Vr(t,e,Math.max(Math.abs(r),1),s):r!=null&&!Ut(r)?jr(r,s):De(t,e,1,r)};var Wt=De;const Yr=Wt,qt=ze;var Jr=(t,e={})=>{const r=(n,s={})=>{const o=qt.isInvalidBrace(s),i=n.invalid===!0&&e.escapeInvalid===!0,u=o===!0||i===!0,a=e.escapeInvalid===!0?"\\":"";let l="";if(n.isOpen===!0)return a+n.value;if(n.isClose===!0)return console.log("node.isClose",a,n.value),a+n.value;if(n.type==="open")return u?a+n.value:"(";if(n.type==="close")return u?a+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":u?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){const p=qt.reduce(n.nodes),g=Yr(...p,{...e,wrap:!1,toRegex:!0,strictZeros:!0});if(g.length!==0)return p.length>1&&g.length>1?`(${g})`:g}if(n.nodes)for(const p of n.nodes)l+=r(p,n);return l};return r(t)};const en=Wt,Xt=Ve,Oe=ze,$e=(t="",e="",r=!1)=>{const n=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return r?Oe.flatten(e).map(s=>`{${s}}`):e;for(const s of t)if(Array.isArray(s))for(const o of s)n.push($e(o,e,r));else for(let o of e)r===!0&&typeof o=="string"&&(o=`{${o}}`),n.push(Array.isArray(o)?$e(s,o,r):s+o);return Oe.flatten(n)};var tn=(t,e={})=>{const r=e.rangeLimit===void 0?1e3:e.rangeLimit,n=(s,o={})=>{s.queue=[];let i=o,u=o.queue;for(;i.type!=="brace"&&i.type!=="root"&&i.parent;)i=i.parent,u=i.queue;if(s.invalid||s.dollar){u.push($e(u.pop(),Xt(s,e)));return}if(s.type==="brace"&&s.invalid!==!0&&s.nodes.length===2){u.push($e(u.pop(),["{}"]));return}if(s.nodes&&s.ranges>0){const g=Oe.reduce(s.nodes);if(Oe.exceedsLimit(...g,e.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let d=en(...g,e);d.length===0&&(d=Xt(s,e)),u.push($e(u.pop(),d)),s.nodes=[];return}const a=Oe.encloseBrace(s);let l=s.queue,p=s;for(;p.type!=="brace"&&p.type!=="root"&&p.parent;)p=p.parent,l=p.queue;for(let g=0;g<s.nodes.length;g++){const d=s.nodes[g];if(d.type==="comma"&&s.type==="brace"){g===1&&l.push(""),l.push("");continue}if(d.type==="close"){u.push($e(u.pop(),l,a));continue}if(d.value&&d.type!=="open"){l.push($e(l.pop(),d.value));continue}d.nodes&&n(d,s)}return l};return Oe.flatten(n(t))},rn={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:" ",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"};const nn=Ve,{MAX_LENGTH:Qt,CHAR_BACKSLASH:tt,CHAR_BACKTICK:sn,CHAR_COMMA:on,CHAR_DOT:an,CHAR_LEFT_PARENTHESES:un,CHAR_RIGHT_PARENTHESES:ln,CHAR_LEFT_CURLY_BRACE:cn,CHAR_RIGHT_CURLY_BRACE:fn,CHAR_LEFT_SQUARE_BRACKET:jt,CHAR_RIGHT_SQUARE_BRACKET:Zt,CHAR_DOUBLE_QUOTE:hn,CHAR_SINGLE_QUOTE:pn,CHAR_NO_BREAK_SPACE:dn,CHAR_ZERO_WIDTH_NOBREAK_SPACE:gn}=rn;var mn=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");const r=e||{},n=typeof r.maxLength=="number"?Math.min(Qt,r.maxLength):Qt;if(t.length>n)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${n})`);const s={type:"root",input:t,nodes:[]},o=[s];let i=s,u=s,a=0;const l=t.length;let p=0,g=0,d;const b=()=>t[p++],R=v=>{if(v.type==="text"&&u.type==="dot"&&(u.type="text"),u&&u.type==="text"&&v.type==="text"){u.value+=v.value;return}return i.nodes.push(v),v.parent=i,v.prev=u,u=v,v};for(R({type:"bos"});p<l;)if(i=o[o.length-1],d=b(),!(d===gn||d===dn)){if(d===tt){R({type:"text",value:(e.keepEscaping?d:"")+b()});continue}if(d===Zt){R({type:"text",value:"\\"+d});continue}if(d===jt){a++;let v;for(;p<l&&(v=b());){if(d+=v,v===jt){a++;continue}if(v===tt){d+=b();continue}if(v===Zt&&(a--,a===0))break}R({type:"text",value:d});continue}if(d===un){i=R({type:"paren",nodes:[]}),o.push(i),R({type:"text",value:d});continue}if(d===ln){if(i.type!=="paren"){R({type:"text",value:d});continue}i=o.pop(),R({type:"text",value:d}),i=o[o.length-1];continue}if(d===hn||d===pn||d===sn){const v=d;let P;for(e.keepQuotes!==!0&&(d="");p<l&&(P=b());){if(P===tt){d+=P+b();continue}if(P===v){e.keepQuotes===!0&&(d+=P);break}d+=P}R({type:"text",value:d});continue}if(d===cn){g++;const P={type:"brace",open:!0,close:!1,dollar:u.value&&u.value.slice(-1)==="$"||i.dollar===!0,depth:g,commas:0,ranges:0,nodes:[]};i=R(P),o.push(i),R({type:"open",value:d});continue}if(d===fn){if(i.type!=="brace"){R({type:"text",value:d});continue}const v="close";i=o.pop(),i.close=!0,R({type:v,value:d}),g--,i=o[o.length-1];continue}if(d===on&&g>0){if(i.ranges>0){i.ranges=0;const v=i.nodes.shift();i.nodes=[v,{type:"text",value:nn(i)}]}R({type:"comma",value:d}),i.commas++;continue}if(d===an&&g>0&&i.commas===0){const v=i.nodes;if(g===0||v.length===0){R({type:"text",value:d});continue}if(u.type==="dot"){if(i.range=[],u.value+=d,u.type="range",i.nodes.length!==3&&i.nodes.length!==5){i.invalid=!0,i.ranges=0,u.type="text";continue}i.ranges++,i.args=[];continue}if(u.type==="range"){v.pop();const P=v[v.length-1];P.value+=u.value+d,u=P,i.ranges--;continue}R({type:"dot",value:d});continue}R({type:"text",value:d})}do if(i=o.pop(),i.type!=="root"){i.nodes.forEach(B=>{B.nodes||(B.type==="open"&&(B.isOpen=!0),B.type==="close"&&(B.isClose=!0),B.nodes||(B.type="text"),B.invalid=!0)});const v=o[o.length-1],P=v.nodes.indexOf(i);v.nodes.splice(P,1,...i.nodes)}while(o.length>0);return R({type:"eos"}),s};const Vt=Ve,An=Jr,yn=tn,_n=mn,oe=(t,e={})=>{let r=[];if(Array.isArray(t))for(const n of t){const s=oe.create(n,e);Array.isArray(s)?r.push(...s):r.push(s)}else r=[].concat(oe.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(r=[...new Set(r)]),r};oe.parse=(t,e={})=>_n(t,e),oe.stringify=(t,e={})=>Vt(typeof t=="string"?oe.parse(t,e):t,e),oe.compile=(t,e={})=>(typeof t=="string"&&(t=oe.parse(t,e)),An(t,e)),oe.expand=(t,e={})=>{typeof t=="string"&&(t=oe.parse(t,e));let r=yn(t,e);return e.noempty===!0&&(r=r.filter(Boolean)),e.nodupes===!0&&(r=[...new Set(r)]),r},oe.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?oe.compile(t,e):oe.expand(t,e);var bn=oe;function de(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function Yt(t,e){for(var r="",n=0,s=-1,o=0,i,u=0;u<=t.length;++u){if(u<t.length)i=t.charCodeAt(u);else{if(i===47)break;i=47}if(i===47){if(!(s===u-1||o===1))if(s!==u-1&&o===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var a=r.lastIndexOf("/");if(a!==r.length-1){a===-1?(r="",n=0):(r=r.slice(0,a),n=r.length-1-r.lastIndexOf("/")),s=u,o=0;continue}}else if(r.length===2||r.length===1){r="",n=0,s=u,o=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+t.slice(s+1,u):r=t.slice(s+1,u),n=u-s-1;s=u,o=0}else i===46&&o!==-1?++o:o=-1}return r}function Rn(t,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+t+n:n}var Te={resolve:function(){for(var e="",r=!1,n,s=arguments.length-1;s>=-1&&!r;s--){var o;s>=0?o=arguments[s]:(n===void 0&&(n=process.cwd()),o=n),de(o),o.length!==0&&(e=o+"/"+e,r=o.charCodeAt(0)===47)}return e=Yt(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(de(e),e.length===0)return".";var r=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=Yt(e,!r),e.length===0&&!r&&(e="."),e.length>0&&n&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return de(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];de(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":Te.normalize(e)},relative:function(e,r){if(de(e),de(r),e===r||(e=Te.resolve(e),r=Te.resolve(r),e===r))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var s=e.length,o=s-n,i=1;i<r.length&&r.charCodeAt(i)===47;++i);for(var u=r.length,a=u-i,l=o<a?o:a,p=-1,g=0;g<=l;++g){if(g===l){if(a>l){if(r.charCodeAt(i+g)===47)return r.slice(i+g+1);if(g===0)return r.slice(i+g)}else o>l&&(e.charCodeAt(n+g)===47?p=g:g===0&&(p=0));break}var d=e.charCodeAt(n+g),b=r.charCodeAt(i+g);if(d!==b)break;d===47&&(p=g)}var R="";for(g=n+p+1;g<=s;++g)(g===s||e.charCodeAt(g)===47)&&(R.length===0?R+="..":R+="/..");return R.length>0?R+r.slice(i+p):(i+=p,r.charCodeAt(i)===47&&++i,r.slice(i))},_makeLong:function(e){return e},dirname:function(e){if(de(e),e.length===0)return".";for(var r=e.charCodeAt(0),n=r===47,s=-1,o=!0,i=e.length-1;i>=1;--i)if(r=e.charCodeAt(i),r===47){if(!o){s=i;break}}else o=!1;return s===-1?n?"/":".":n&&s===1?"//":e.slice(0,s)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');de(e);var n=0,s=-1,o=!0,i;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var u=r.length-1,a=-1;for(i=e.length-1;i>=0;--i){var l=e.charCodeAt(i);if(l===47){if(!o){n=i+1;break}}else a===-1&&(o=!1,a=i+1),u>=0&&(l===r.charCodeAt(u)?--u===-1&&(s=i):(u=-1,s=a))}return n===s?s=a:s===-1&&(s=e.length),e.slice(n,s)}else{for(i=e.length-1;i>=0;--i)if(e.charCodeAt(i)===47){if(!o){n=i+1;break}}else s===-1&&(o=!1,s=i+1);return s===-1?"":e.slice(n,s)}},extname:function(e){de(e);for(var r=-1,n=0,s=-1,o=!0,i=0,u=e.length-1;u>=0;--u){var a=e.charCodeAt(u);if(a===47){if(!o){n=u+1;break}continue}s===-1&&(o=!1,s=u+1),a===46?r===-1?r=u:i!==1&&(i=1):r!==-1&&(i=-1)}return r===-1||s===-1||i===0||i===1&&r===s-1&&r===n+1?"":e.slice(r,s)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Rn("/",e)},parse:function(e){de(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var n=e.charCodeAt(0),s=n===47,o;s?(r.root="/",o=1):o=0;for(var i=-1,u=0,a=-1,l=!0,p=e.length-1,g=0;p>=o;--p){if(n=e.charCodeAt(p),n===47){if(!l){u=p+1;break}continue}a===-1&&(l=!1,a=p+1),n===46?i===-1?i=p:g!==1&&(g=1):i!==-1&&(g=-1)}return i===-1||a===-1||g===0||g===1&&i===a-1&&i===u+1?a!==-1&&(u===0&&s?r.base=r.name=e.slice(1,a):r.base=r.name=e.slice(u,a)):(u===0&&s?(r.name=e.slice(1,i),r.base=e.slice(1,a)):(r.name=e.slice(u,i),r.base=e.slice(u,a)),r.ext=e.slice(i,a)),u>0?r.dir=e.slice(0,u-1):s&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};Te.posix=Te;var rt=Te,ke={};const En=rt,ge="\\\\/",Jt=`[^${ge}]`,_e="\\.",vn="\\+",Cn="\\?",We="\\/",Sn="(?=.)",er="[^/]",nt=`(?:${We}|$)`,tr=`(?:^|${We})`,st=`${_e}{1,2}${nt}`,wn=`(?!${_e})`,xn=`(?!${tr}${st})`,$n=`(?!${_e}{0,1}${nt})`,Nn=`(?!${st})`,On=`[^.${We}]`,Tn=`${er}*?`,rr={DOT_LITERAL:_e,PLUS_LITERAL:vn,QMARK_LITERAL:Cn,SLASH_LITERAL:We,ONE_CHAR:Sn,QMARK:er,END_ANCHOR:nt,DOTS_SLASH:st,NO_DOT:wn,NO_DOTS:xn,NO_DOT_SLASH:$n,NO_DOTS_SLASH:Nn,QMARK_NO_DOT:On,STAR:Tn,START_ANCHOR:tr},Ln={...rr,SLASH_LITERAL:`[${ge}]`,QMARK:Jt,STAR:`${Jt}*?`,DOTS_SLASH:`${_e}{1,2}(?:[${ge}]|$)`,NO_DOT:`(?!${_e})`,NO_DOTS:`(?!(?:^|[${ge}])${_e}{1,2}(?:[${ge}]|$))`,NO_DOT_SLASH:`(?!${_e}{0,1}(?:[${ge}]|$))`,NO_DOTS_SLASH:`(?!${_e}{1,2}(?:[${ge}]|$))`,QMARK_NO_DOT:`[^.${ge}]`,START_ANCHOR:`(?:^|[${ge}])`,END_ANCHOR:`(?:[${ge}]|$)`},Hn={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};var qe={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:Hn,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:En.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?Ln:rr}};(function(t){const e=rt,{REGEX_BACKSLASH:r,REGEX_REMOVE_BACKSLASH:n,REGEX_SPECIAL_CHARS:s,REGEX_SPECIAL_CHARS_GLOBAL:o}=qe;t.isObject=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t.hasRegexChars=i=>s.test(i),t.isRegexChar=i=>i.length===1&&t.hasRegexChars(i),t.escapeRegex=i=>i.replace(o,"\\$1"),t.toPosixSlashes=i=>i.replace(r,"/"),t.removeBackslashes=i=>i.replace(n,u=>u==="\\"?"":u),t.supportsLookbehinds=()=>{const i=process.version.slice(1).split(".").map(Number);return i.length===3&&i[0]>=9||i[0]===8&&i[1]>=10},t.isWindows=i=>i&&typeof i.windows=="boolean"?i.windows:e.sep==="\\",t.escapeLast=(i,u,a)=>{const l=i.lastIndexOf(u,a);return l===-1?i:i[l-1]==="\\"?t.escapeLast(i,u,l-1):`${i.slice(0,l)}\\${i.slice(l)}`},t.removePrefix=(i,u={})=>{let a=i;return a.startsWith("./")&&(a=a.slice(2),u.prefix="./"),a},t.wrapOutput=(i,u={},a={})=>{const l=a.contains?"":"^",p=a.contains?"":"$";let g=`${l}(?:${i})${p}`;return u.negated===!0&&(g=`(?:^(?!${g}).*$)`),g}})(ke);const nr=ke,{CHAR_ASTERISK:it,CHAR_AT:kn,CHAR_BACKWARD_SLASH:Ie,CHAR_COMMA:In,CHAR_DOT:ot,CHAR_EXCLAMATION_MARK:at,CHAR_FORWARD_SLASH:sr,CHAR_LEFT_CURLY_BRACE:ut,CHAR_LEFT_PARENTHESES:lt,CHAR_LEFT_SQUARE_BRACKET:Fn,CHAR_PLUS:Pn,CHAR_QUESTION_MARK:ir,CHAR_RIGHT_CURLY_BRACE:Mn,CHAR_RIGHT_PARENTHESES:or,CHAR_RIGHT_SQUARE_BRACKET:Bn}=qe,ar=t=>t===sr||t===Ie,ur=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)};var Un=(t,e)=>{const r=e||{},n=t.length-1,s=r.parts===!0||r.scanToEnd===!0,o=[],i=[],u=[];let a=t,l=-1,p=0,g=0,d=!1,b=!1,R=!1,v=!1,P=!1,B=!1,J=!1,z=!1,le=!1,te=!1,ce=0,W,x,h={value:"",depth:0,isGlob:!1};const f=()=>l>=n,c=()=>a.charCodeAt(l+1),S=()=>(W=x,a.charCodeAt(++l));for(;l<n;){x=S();let M;if(x===Ie){J=h.backslashes=!0,x=S(),x===ut&&(B=!0);continue}if(B===!0||x===ut){for(ce++;f()!==!0&&(x=S());){if(x===Ie){J=h.backslashes=!0,S();continue}if(x===ut){ce++;continue}if(B!==!0&&x===ot&&(x=S())===ot){if(d=h.isBrace=!0,R=h.isGlob=!0,te=!0,s===!0)continue;break}if(B!==!0&&x===In){if(d=h.isBrace=!0,R=h.isGlob=!0,te=!0,s===!0)continue;break}if(x===Mn&&(ce--,ce===0)){B=!1,d=h.isBrace=!0,te=!0;break}}if(s===!0)continue;break}if(x===sr){if(o.push(l),i.push(h),h={value:"",depth:0,isGlob:!1},te===!0)continue;if(W===ot&&l===p+1){p+=2;continue}g=l+1;continue}if(r.noext!==!0&&(x===Pn||x===kn||x===it||x===ir||x===at)===!0&&c()===lt){if(R=h.isGlob=!0,v=h.isExtglob=!0,te=!0,x===at&&l===p&&(le=!0),s===!0){for(;f()!==!0&&(x=S());){if(x===Ie){J=h.backslashes=!0,x=S();continue}if(x===or){R=h.isGlob=!0,te=!0;break}}continue}break}if(x===it){if(W===it&&(P=h.isGlobstar=!0),R=h.isGlob=!0,te=!0,s===!0)continue;break}if(x===ir){if(R=h.isGlob=!0,te=!0,s===!0)continue;break}if(x===Fn){for(;f()!==!0&&(M=S());){if(M===Ie){J=h.backslashes=!0,S();continue}if(M===Bn){b=h.isBracket=!0,R=h.isGlob=!0,te=!0;break}}if(s===!0)continue;break}if(r.nonegate!==!0&&x===at&&l===p){z=h.negated=!0,p++;continue}if(r.noparen!==!0&&x===lt){if(R=h.isGlob=!0,s===!0){for(;f()!==!0&&(x=S());){if(x===lt){J=h.backslashes=!0,x=S();continue}if(x===or){te=!0;break}}continue}break}if(R===!0){if(te=!0,s===!0)continue;break}}r.noext===!0&&(v=!1,R=!1);let C=a,H="",m="";p>0&&(H=a.slice(0,p),a=a.slice(p),g-=p),C&&R===!0&&g>0?(C=a.slice(0,g),m=a.slice(g)):R===!0?(C="",m=a):C=a,C&&C!==""&&C!=="/"&&C!==a&&ar(C.charCodeAt(C.length-1))&&(C=C.slice(0,-1)),r.unescape===!0&&(m&&(m=nr.removeBackslashes(m)),C&&J===!0&&(C=nr.removeBackslashes(C)));const A={prefix:H,input:t,start:p,base:C,glob:m,isBrace:d,isBracket:b,isGlob:R,isExtglob:v,isGlobstar:P,negated:z,negatedExtglob:le};if(r.tokens===!0&&(A.maxDepth=0,ar(x)||i.push(h),A.tokens=i),r.parts===!0||r.tokens===!0){let M;for(let _=0;_<o.length;_++){const U=M?M+1:p,T=o[_],q=t.slice(U,T);r.tokens&&(_===0&&p!==0?(i[_].isPrefix=!0,i[_].value=H):i[_].value=q,ur(i[_]),A.maxDepth+=i[_].depth),(_!==0||q!=="")&&u.push(q),M=T}if(M&&M+1<t.length){const _=t.slice(M+1);u.push(_),r.tokens&&(i[i.length-1].value=_,ur(i[i.length-1]),A.maxDepth+=i[i.length-1].depth)}A.slashes=o,A.parts=u}return A};const Xe=qe,ae=ke,{MAX_LENGTH:Qe,POSIX_REGEX_SOURCE:Gn,REGEX_NON_SPECIAL_CHARS:zn,REGEX_SPECIAL_CHARS_BACKREF:Kn,REPLACEMENTS:lr}=Xe,Dn=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();const r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(s=>ae.escapeRegex(s)).join("..")}return r},Le=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,ct=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=lr[t]||t;const r={...e},n=typeof r.maxLength=="number"?Math.min(Qe,r.maxLength):Qe;let s=t.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);const o={type:"bos",value:"",output:r.prepend||""},i=[o],u=r.capture?"":"?:",a=ae.isWindows(e),l=Xe.globChars(a),p=Xe.extglobChars(l),{DOT_LITERAL:g,PLUS_LITERAL:d,SLASH_LITERAL:b,ONE_CHAR:R,DOTS_SLASH:v,NO_DOT:P,NO_DOT_SLASH:B,NO_DOTS_SLASH:J,QMARK:z,QMARK_NO_DOT:le,STAR:te,START_ANCHOR:ce}=l,W=E=>`(${u}(?:(?!${ce}${E.dot?v:g}).)*?)`,x=r.dot?"":P,h=r.dot?z:le;let f=r.bash===!0?W(r):te;r.capture&&(f=`(${f})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);const c={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:i};t=ae.removePrefix(t,c),s=t.length;const S=[],C=[],H=[];let m=o,A;const M=()=>c.index===s-1,_=c.peek=(E=1)=>t[c.index+E],U=c.advance=()=>t[++c.index]||"",T=()=>t.slice(c.index+1),q=(E="",w=0)=>{c.consumed+=E,c.index+=w},Y=E=>{c.output+=E.output!=null?E.output:E.value,q(E.value)},N=()=>{let E=1;for(;_()==="!"&&(_(2)!=="("||_(3)==="?");)U(),c.start++,E++;return E%2===0?!1:(c.negated=!0,c.start++,!0)},G=E=>{c[E]++,H.push(E)},X=E=>{c[E]--,H.pop()},O=E=>{if(m.type==="globstar"){const w=c.braces>0&&(E.type==="comma"||E.type==="brace"),y=E.extglob===!0||S.length&&(E.type==="pipe"||E.type==="paren");E.type!=="slash"&&E.type!=="paren"&&!w&&!y&&(c.output=c.output.slice(0,-m.output.length),m.type="star",m.value="*",m.output=f,c.output+=m.output)}if(S.length&&E.type!=="paren"&&(S[S.length-1].inner+=E.value),(E.value||E.output)&&Y(E),m&&m.type==="text"&&E.type==="text"){m.value+=E.value,m.output=(m.output||"")+E.value;return}E.prev=m,i.push(E),m=E},j=(E,w)=>{const y={...p[w],conditions:1,inner:""};y.prev=m,y.parens=c.parens,y.output=c.output;const $=(r.capture?"(":"")+y.open;G("parens"),O({type:E,value:w,output:c.output?"":R}),O({type:"paren",extglob:!0,value:U(),output:$}),S.push(y)},ee=E=>{let w=E.close+(r.capture?")":""),y;if(E.type==="negate"){let $=f;if(E.inner&&E.inner.length>1&&E.inner.includes("/")&&($=W(r)),($!==f||M()||/^\)+$/.test(T()))&&(w=E.close=`)$))${$}`),E.inner.includes("*")&&(y=T())&&/^\.[^\\/.]+$/.test(y)){const F=ct(y,{...e,fastpaths:!1}).output;w=E.close=`)${F})${$})`}E.prev.type==="bos"&&(c.negatedExtglob=!0)}O({type:"paren",extglob:!0,value:A,output:w}),X("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let E=!1,w=t.replace(Kn,(y,$,F,L,k,K)=>L==="\\"?(E=!0,y):L==="?"?$?$+L+(k?z.repeat(k.length):""):K===0?h+(k?z.repeat(k.length):""):z.repeat(F.length):L==="."?g.repeat(F.length):L==="*"?$?$+L+(k?f:""):f:$?y:`\\${y}`);return E===!0&&(r.unescape===!0?w=w.replace(/\\/g,""):w=w.replace(/\\+/g,y=>y.length%2===0?"\\\\":y?"\\":"")),w===t&&r.contains===!0?(c.output=t,c):(c.output=ae.wrapOutput(w,c,e),c)}for(;!M();){if(A=U(),A==="\0")continue;if(A==="\\"){const y=_();if(y==="/"&&r.bash!==!0||y==="."||y===";")continue;if(!y){A+="\\",O({type:"text",value:A});continue}const $=/^\\+/.exec(T());let F=0;if($&&$[0].length>2&&(F=$[0].length,c.index+=F,F%2!==0&&(A+="\\")),r.unescape===!0?A=U():A+=U(),c.brackets===0){O({type:"text",value:A});continue}}if(c.brackets>0&&(A!=="]"||m.value==="["||m.value==="[^")){if(r.posix!==!1&&A===":"){const y=m.value.slice(1);if(y.includes("[")&&(m.posix=!0,y.includes(":"))){const $=m.value.lastIndexOf("["),F=m.value.slice(0,$),L=m.value.slice($+2),k=Gn[L];if(k){m.value=F+k,c.backtrack=!0,U(),!o.output&&i.indexOf(m)===1&&(o.output=R);continue}}}(A==="["&&_()!==":"||A==="-"&&_()==="]")&&(A=`\\${A}`),A==="]"&&(m.value==="["||m.value==="[^")&&(A=`\\${A}`),r.posix===!0&&A==="!"&&m.value==="["&&(A="^"),m.value+=A,Y({value:A});continue}if(c.quotes===1&&A!=='"'){A=ae.escapeRegex(A),m.value+=A,Y({value:A});continue}if(A==='"'){c.quotes=c.quotes===1?0:1,r.keepQuotes===!0&&O({type:"text",value:A});continue}if(A==="("){G("parens"),O({type:"paren",value:A});continue}if(A===")"){if(c.parens===0&&r.strictBrackets===!0)throw new SyntaxError(Le("opening","("));const y=S[S.length-1];if(y&&c.parens===y.parens+1){ee(S.pop());continue}O({type:"paren",value:A,output:c.parens?")":"\\)"}),X("parens");continue}if(A==="["){if(r.nobracket===!0||!T().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(Le("closing","]"));A=`\\${A}`}else G("brackets");O({type:"bracket",value:A});continue}if(A==="]"){if(r.nobracket===!0||m&&m.type==="bracket"&&m.value.length===1){O({type:"text",value:A,output:`\\${A}`});continue}if(c.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(Le("opening","["));O({type:"text",value:A,output:`\\${A}`});continue}X("brackets");const y=m.value.slice(1);if(m.posix!==!0&&y[0]==="^"&&!y.includes("/")&&(A=`/${A}`),m.value+=A,Y({value:A}),r.literalBrackets===!1||ae.hasRegexChars(y))continue;const $=ae.escapeRegex(m.value);if(c.output=c.output.slice(0,-m.value.length),r.literalBrackets===!0){c.output+=$,m.value=$;continue}m.value=`(${u}${$}|${m.value})`,c.output+=m.value;continue}if(A==="{"&&r.nobrace!==!0){G("braces");const y={type:"brace",value:A,output:"(",outputIndex:c.output.length,tokensIndex:c.tokens.length};C.push(y),O(y);continue}if(A==="}"){const y=C[C.length-1];if(r.nobrace===!0||!y){O({type:"text",value:A,output:A});continue}let $=")";if(y.dots===!0){const F=i.slice(),L=[];for(let k=F.length-1;k>=0&&(i.pop(),F[k].type!=="brace");k--)F[k].type!=="dots"&&L.unshift(F[k].value);$=Dn(L,r),c.backtrack=!0}if(y.comma!==!0&&y.dots!==!0){const F=c.output.slice(0,y.outputIndex),L=c.tokens.slice(y.tokensIndex);y.value=y.output="\\{",A=$="\\}",c.output=F;for(const k of L)c.output+=k.output||k.value}O({type:"brace",value:A,output:$}),X("braces"),C.pop();continue}if(A==="|"){S.length>0&&S[S.length-1].conditions++,O({type:"text",value:A});continue}if(A===","){let y=A;const $=C[C.length-1];$&&H[H.length-1]==="braces"&&($.comma=!0,y="|"),O({type:"comma",value:A,output:y});continue}if(A==="/"){if(m.type==="dot"&&c.index===c.start+1){c.start=c.index+1,c.consumed="",c.output="",i.pop(),m=o;continue}O({type:"slash",value:A,output:b});continue}if(A==="."){if(c.braces>0&&m.type==="dot"){m.value==="."&&(m.output=g);const y=C[C.length-1];m.type="dots",m.output+=A,m.value+=A,y.dots=!0;continue}if(c.braces+c.parens===0&&m.type!=="bos"&&m.type!=="slash"){O({type:"text",value:A,output:g});continue}O({type:"dot",value:A,output:g});continue}if(A==="?"){if(!(m&&m.value==="(")&&r.noextglob!==!0&&_()==="("&&_(2)!=="?"){j("qmark",A);continue}if(m&&m.type==="paren"){const $=_();let F=A;if($==="<"&&!ae.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(m.value==="("&&!/[!=<:]/.test($)||$==="<"&&!/<([!=]|\w+>)/.test(T()))&&(F=`\\${A}`),O({type:"text",value:A,output:F});continue}if(r.dot!==!0&&(m.type==="slash"||m.type==="bos")){O({type:"qmark",value:A,output:le});continue}O({type:"qmark",value:A,output:z});continue}if(A==="!"){if(r.noextglob!==!0&&_()==="("&&(_(2)!=="?"||!/[!=<:]/.test(_(3)))){j("negate",A);continue}if(r.nonegate!==!0&&c.index===0){N();continue}}if(A==="+"){if(r.noextglob!==!0&&_()==="("&&_(2)!=="?"){j("plus",A);continue}if(m&&m.value==="("||r.regex===!1){O({type:"plus",value:A,output:d});continue}if(m&&(m.type==="bracket"||m.type==="paren"||m.type==="brace")||c.parens>0){O({type:"plus",value:A});continue}O({type:"plus",value:d});continue}if(A==="@"){if(r.noextglob!==!0&&_()==="("&&_(2)!=="?"){O({type:"at",extglob:!0,value:A,output:""});continue}O({type:"text",value:A});continue}if(A!=="*"){(A==="$"||A==="^")&&(A=`\\${A}`);const y=zn.exec(T());y&&(A+=y[0],c.index+=y[0].length),O({type:"text",value:A});continue}if(m&&(m.type==="globstar"||m.star===!0)){m.type="star",m.star=!0,m.value+=A,m.output=f,c.backtrack=!0,c.globstar=!0,q(A);continue}let E=T();if(r.noextglob!==!0&&/^\([^?]/.test(E)){j("star",A);continue}if(m.type==="star"){if(r.noglobstar===!0){q(A);continue}const y=m.prev,$=y.prev,F=y.type==="slash"||y.type==="bos",L=$&&($.type==="star"||$.type==="globstar");if(r.bash===!0&&(!F||E[0]&&E[0]!=="/")){O({type:"star",value:A,output:""});continue}const k=c.braces>0&&(y.type==="comma"||y.type==="brace"),K=S.length&&(y.type==="pipe"||y.type==="paren");if(!F&&y.type!=="paren"&&!k&&!K){O({type:"star",value:A,output:""});continue}for(;E.slice(0,3)==="/**";){const I=t[c.index+4];if(I&&I!=="/")break;E=E.slice(3),q("/**",3)}if(y.type==="bos"&&M()){m.type="globstar",m.value+=A,m.output=W(r),c.output=m.output,c.globstar=!0,q(A);continue}if(y.type==="slash"&&y.prev.type!=="bos"&&!L&&M()){c.output=c.output.slice(0,-(y.output+m.output).length),y.output=`(?:${y.output}`,m.type="globstar",m.output=W(r)+(r.strictSlashes?")":"|$)"),m.value+=A,c.globstar=!0,c.output+=y.output+m.output,q(A);continue}if(y.type==="slash"&&y.prev.type!=="bos"&&E[0]==="/"){const I=E[1]!==void 0?"|$":"";c.output=c.output.slice(0,-(y.output+m.output).length),y.output=`(?:${y.output}`,m.type="globstar",m.output=`${W(r)}${b}|${b}${I})`,m.value+=A,c.output+=y.output+m.output,c.globstar=!0,q(A+U()),O({type:"slash",value:"/",output:""});continue}if(y.type==="bos"&&E[0]==="/"){m.type="globstar",m.value+=A,m.output=`(?:^|${b}|${W(r)}${b})`,c.output=m.output,c.globstar=!0,q(A+U()),O({type:"slash",value:"/",output:""});continue}c.output=c.output.slice(0,-m.output.length),m.type="globstar",m.output=W(r),m.value+=A,c.output+=m.output,c.globstar=!0,q(A);continue}const w={type:"star",value:A,output:f};if(r.bash===!0){w.output=".*?",(m.type==="bos"||m.type==="slash")&&(w.output=x+w.output),O(w);continue}if(m&&(m.type==="bracket"||m.type==="paren")&&r.regex===!0){w.output=A,O(w);continue}(c.index===c.start||m.type==="slash"||m.type==="dot")&&(m.type==="dot"?(c.output+=B,m.output+=B):r.dot===!0?(c.output+=J,m.output+=J):(c.output+=x,m.output+=x),_()!=="*"&&(c.output+=R,m.output+=R)),O(w)}for(;c.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(Le("closing","]"));c.output=ae.escapeLast(c.output,"["),X("brackets")}for(;c.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(Le("closing",")"));c.output=ae.escapeLast(c.output,"("),X("parens")}for(;c.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(Le("closing","}"));c.output=ae.escapeLast(c.output,"{"),X("braces")}if(r.strictSlashes!==!0&&(m.type==="star"||m.type==="bracket")&&O({type:"maybe_slash",value:"",output:`${b}?`}),c.backtrack===!0){c.output="";for(const E of c.tokens)c.output+=E.output!=null?E.output:E.value,E.suffix&&(c.output+=E.suffix)}return c};ct.fastpaths=(t,e)=>{const r={...e},n=typeof r.maxLength=="number"?Math.min(Qe,r.maxLength):Qe,s=t.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);t=lr[t]||t;const o=ae.isWindows(e),{DOT_LITERAL:i,SLASH_LITERAL:u,ONE_CHAR:a,DOTS_SLASH:l,NO_DOT:p,NO_DOTS:g,NO_DOTS_SLASH:d,STAR:b,START_ANCHOR:R}=Xe.globChars(o),v=r.dot?g:p,P=r.dot?d:p,B=r.capture?"":"?:",J={negated:!1,prefix:""};let z=r.bash===!0?".*?":b;r.capture&&(z=`(${z})`);const le=x=>x.noglobstar===!0?z:`(${B}(?:(?!${R}${x.dot?l:i}).)*?)`,te=x=>{switch(x){case"*":return`${v}${a}${z}`;case".*":return`${i}${a}${z}`;case"*.*":return`${v}${z}${i}${a}${z}`;case"*/*":return`${v}${z}${u}${a}${P}${z}`;case"**":return v+le(r);case"**/*":return`(?:${v}${le(r)}${u})?${P}${a}${z}`;case"**/*.*":return`(?:${v}${le(r)}${u})?${P}${z}${i}${a}${z}`;case"**/.*":return`(?:${v}${le(r)}${u})?${i}${a}${z}`;default:{const h=/^(.*?)\.(\w+)$/.exec(x);if(!h)return;const f=te(h[1]);return f?f+i+h[2]:void 0}}},ce=ae.removePrefix(t,J);let W=te(ce);return W&&r.strictSlashes!==!0&&(W+=`${u}?`),W};var Wn=ct;const qn=rt,Xn=Un,ft=Wn,ht=ke,Qn=qe,jn=t=>t&&typeof t=="object"&&!Array.isArray(t),Z=(t,e,r=!1)=>{if(Array.isArray(t)){const p=t.map(d=>Z(d,e,r));return d=>{for(const b of p){const R=b(d);if(R)return R}return!1}}const n=jn(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");const s=e||{},o=ht.isWindows(e),i=n?Z.compileRe(t,e):Z.makeRe(t,e,!1,!0),u=i.state;delete i.state;let a=()=>!1;if(s.ignore){const p={...e,ignore:null,onMatch:null,onResult:null};a=Z(s.ignore,p,r)}const l=(p,g=!1)=>{const{isMatch:d,match:b,output:R}=Z.test(p,i,e,{glob:t,posix:o}),v={glob:t,state:u,regex:i,posix:o,input:p,output:R,match:b,isMatch:d};return typeof s.onResult=="function"&&s.onResult(v),d===!1?(v.isMatch=!1,g?v:!1):a(p)?(typeof s.onIgnore=="function"&&s.onIgnore(v),v.isMatch=!1,g?v:!1):(typeof s.onMatch=="function"&&s.onMatch(v),g?v:!0)};return r&&(l.state=u),l};Z.test=(t,e,r,{glob:n,posix:s}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};const o=r||{},i=o.format||(s?ht.toPosixSlashes:null);let u=t===n,a=u&&i?i(t):t;return u===!1&&(a=i?i(t):t,u=a===n),(u===!1||o.capture===!0)&&(o.matchBase===!0||o.basename===!0?u=Z.matchBase(t,e,r,s):u=e.exec(a)),{isMatch:!!u,match:u,output:a}},Z.matchBase=(t,e,r,n=ht.isWindows(r))=>(e instanceof RegExp?e:Z.makeRe(e,r)).test(qn.basename(t)),Z.isMatch=(t,e,r)=>Z(e,r)(t),Z.parse=(t,e)=>Array.isArray(t)?t.map(r=>Z.parse(r,e)):ft(t,{...e,fastpaths:!1}),Z.scan=(t,e)=>Xn(t,e),Z.compileRe=(t,e,r=!1,n=!1)=>{if(r===!0)return t.output;const s=e||{},o=s.contains?"":"^",i=s.contains?"":"$";let u=`${o}(?:${t.output})${i}`;t&&t.negated===!0&&(u=`^(?!${u}).*$`);const a=Z.toRegex(u,e);return n===!0&&(a.state=t),a},Z.makeRe=(t,e={},r=!1,n=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let s={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(s.output=ft.fastpaths(t,e)),s.output||(s=ft(t,e)),Z.compileRe(s,e,r,n)},Z.toRegex=(t,e)=>{try{const r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}},Z.constants=Qn;var Zn=Z,Vn=Zn;const cr=Ot,fr=bn,me=Vn,pt=ke,hr=t=>t===""||t==="./",pr=t=>{const e=t.indexOf("{");return e>-1&&t.indexOf("}",e)>-1},D=(t,e,r)=>{e=[].concat(e),t=[].concat(t);let n=new Set,s=new Set,o=new Set,i=0,u=p=>{o.add(p.output),r&&r.onResult&&r.onResult(p)};for(let p=0;p<e.length;p++){let g=me(String(e[p]),{...r,onResult:u},!0),d=g.state.negated||g.state.negatedExtglob;d&&i++;for(let b of t){let R=g(b,!0);(d?!R.isMatch:R.isMatch)&&(d?n.add(R.output):(n.delete(R.output),s.add(R.output)))}}let l=(i===e.length?[...o]:[...s]).filter(p=>!n.has(p));if(r&&l.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${e.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?e.map(p=>p.replace(/\\/g,"")):e}return l};D.match=D,D.matcher=(t,e)=>me(t,e),D.isMatch=(t,e,r)=>me(e,r)(t),D.any=D.isMatch,D.not=(t,e,r={})=>{e=[].concat(e).map(String);let n=new Set,s=[],o=u=>{r.onResult&&r.onResult(u),s.push(u.output)},i=new Set(D(t,e,{...r,onResult:o}));for(let u of s)i.has(u)||n.add(u);return[...n]},D.contains=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${cr.inspect(t)}"`);if(Array.isArray(e))return e.some(n=>D.contains(t,n,r));if(typeof e=="string"){if(hr(t)||hr(e))return!1;if(t.includes(e)||t.startsWith("./")&&t.slice(2).includes(e))return!0}return D.isMatch(t,e,{...r,contains:!0})},D.matchKeys=(t,e,r)=>{if(!pt.isObject(t))throw new TypeError("Expected the first argument to be an object");let n=D(Object.keys(t),e,r),s={};for(let o of n)s[o]=t[o];return s},D.some=(t,e,r)=>{let n=[].concat(t);for(let s of[].concat(e)){let o=me(String(s),r);if(n.some(i=>o(i)))return!0}return!1},D.every=(t,e,r)=>{let n=[].concat(t);for(let s of[].concat(e)){let o=me(String(s),r);if(!n.every(i=>o(i)))return!1}return!0},D.all=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${cr.inspect(t)}"`);return[].concat(e).every(n=>me(n,r)(t))},D.capture=(t,e,r)=>{let n=pt.isWindows(r),o=me.makeRe(String(t),{...r,capture:!0}).exec(n?pt.toPosixSlashes(e):e);if(o)return o.slice(1).map(i=>i===void 0?"":i)},D.makeRe=(...t)=>me.makeRe(...t),D.scan=(...t)=>me.scan(...t),D.parse=(t,e)=>{let r=[];for(let n of[].concat(t||[]))for(let s of fr(String(n),e))r.push(me.parse(s,e));return r},D.braces=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return e&&e.nobrace===!0||!pr(t)?[t]:fr(t,e)},D.braceExpand=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return D.braces(t,{...e,expand:!0})},D.hasBraces=pr;var Yn=D,Fe=Ze(Yn),Jn=function t(e,r){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,s=/(^[ ]*|[ ]*$)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,i=/^0x[0-9a-f]+$/i,u=/^0/,a=function(z){return t.insensitive&&(""+z).toLowerCase()||""+z},l=a(e).replace(s,"")||"",p=a(r).replace(s,"")||"",g=l.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=p.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),b=parseInt(l.match(i),16)||g.length!==1&&l.match(o)&&Date.parse(l),R=parseInt(p.match(i),16)||b&&p.match(o)&&Date.parse(p)||null,v,P;if(R){if(b<R)return-1;if(b>R)return 1}for(var B=0,J=Math.max(g.length,d.length);B<J;B++){if(v=!(g[B]||"").match(u)&&parseFloat(g[B])||g[B]||0,P=!(d[B]||"").match(u)&&parseFloat(d[B])||d[B]||0,isNaN(v)!==isNaN(P))return isNaN(v)?1:-1;if(typeof v!=typeof P&&(v+="",P+=""),v<P)return-1;if(v>P)return 1}return 0},dt=Ze(Jn),es={},dr={};(function(t){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",n="["+e+"]["+r+"]*",s=new RegExp("^"+n+"$"),o=function(u,a){const l=[];let p=a.exec(u);for(;p;){const g=[];g.startIndex=a.lastIndex-p[0].length;const d=p.length;for(let b=0;b<d;b++)g.push(p[b]);l.push(g),p=a.exec(u)}return l},i=function(u){const a=s.exec(u);return!(a===null||typeof a>"u")};t.isExist=function(u){return typeof u<"u"},t.isEmptyObject=function(u){return Object.keys(u).length===0},t.merge=function(u,a,l){if(a){const p=Object.keys(a),g=p.length;for(let d=0;d<g;d++)l==="strict"?u[p[d]]=[a[p[d]]]:u[p[d]]=a[p[d]]}},t.getValue=function(u){return t.isExist(u)?u:""},t.isName=i,t.getAllMatches=o,t.nameRegexp=n})(dr);const gt=dr,ts={allowBooleanAttributes:!1,unpairedTags:[]};es.validate=function(t,e){e=Object.assign({},ts,e);const r=[];let n=!1,s=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let o=0;o<t.length;o++)if(t[o]==="<"&&t[o+1]==="?"){if(o+=2,o=mr(t,o),o.err)return o}else if(t[o]==="<"){let i=o;if(o++,t[o]==="!"){o=Ar(t,o);continue}else{let u=!1;t[o]==="/"&&(u=!0,o++);let a="";for(;o<t.length&&t[o]!==">"&&t[o]!==" "&&t[o]!=="	"&&t[o]!==`
`&&t[o]!=="\r";o++)a+=t[o];if(a=a.trim(),a[a.length-1]==="/"&&(a=a.substring(0,a.length-1),o--),!ls(a)){let g;return a.trim().length===0?g="Invalid space after '<'.":g="Tag '"+a+"' is an invalid name.",V("InvalidTag",g,ne(t,o))}const l=ss(t,o);if(l===!1)return V("InvalidAttr","Attributes for '"+a+"' have open quote.",ne(t,o));let p=l.value;if(o=l.index,p[p.length-1]==="/"){const g=o-p.length;p=p.substring(0,p.length-1);const d=yr(p,e);if(d===!0)n=!0;else return V(d.err.code,d.err.msg,ne(t,g+d.err.line))}else if(u)if(l.tagClosed){if(p.trim().length>0)return V("InvalidTag","Closing tag '"+a+"' can't have attributes or invalid starting.",ne(t,i));if(r.length===0)return V("InvalidTag","Closing tag '"+a+"' has not been opened.",ne(t,i));{const g=r.pop();if(a!==g.tagName){let d=ne(t,g.tagStartPos);return V("InvalidTag","Expected closing tag '"+g.tagName+"' (opened in line "+d.line+", col "+d.col+") instead of closing tag '"+a+"'.",ne(t,i))}r.length==0&&(s=!0)}}else return V("InvalidTag","Closing tag '"+a+"' doesn't have proper closing.",ne(t,o));else{const g=yr(p,e);if(g!==!0)return V(g.err.code,g.err.msg,ne(t,o-p.length+g.err.line));if(s===!0)return V("InvalidXml","Multiple possible root nodes found.",ne(t,o));e.unpairedTags.indexOf(a)!==-1||r.push({tagName:a,tagStartPos:i}),n=!0}for(o++;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="!"){o++,o=Ar(t,o);continue}else if(t[o+1]==="?"){if(o=mr(t,++o),o.err)return o}else break;else if(t[o]==="&"){const g=as(t,o);if(g==-1)return V("InvalidChar","char '&' is not expected.",ne(t,o));o=g}else if(s===!0&&!gr(t[o]))return V("InvalidXml","Extra text at the end",ne(t,o));t[o]==="<"&&o--}}else{if(gr(t[o]))continue;return V("InvalidChar","char '"+t[o]+"' is not expected.",ne(t,o))}if(n){if(r.length==1)return V("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",ne(t,r[0].tagStartPos));if(r.length>0)return V("InvalidXml","Invalid '"+JSON.stringify(r.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return V("InvalidXml","Start tag expected.",1);return!0};function gr(t){return t===" "||t==="	"||t===`
`||t==="\r"}function mr(t,e){const r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const n=t.substr(r,e-r);if(e>5&&n==="xml")return V("InvalidXml","XML declaration allowed only at the start of the document.",ne(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function Ar(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const rs='"',ns="'";function ss(t,e){let r="",n="",s=!1;for(;e<t.length;e++){if(t[e]===rs||t[e]===ns)n===""?n=t[e]:n!==t[e]||(n="");else if(t[e]===">"&&n===""){s=!0;break}r+=t[e]}return n!==""?!1:{value:r,index:e,tagClosed:s}}const is=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function yr(t,e){const r=gt.getAllMatches(t,is),n={};for(let s=0;s<r.length;s++){if(r[s][1].length===0)return V("InvalidAttr","Attribute '"+r[s][2]+"' has no space in starting.",Pe(r[s]));if(r[s][3]!==void 0&&r[s][4]===void 0)return V("InvalidAttr","Attribute '"+r[s][2]+"' is without value.",Pe(r[s]));if(r[s][3]===void 0&&!e.allowBooleanAttributes)return V("InvalidAttr","boolean attribute '"+r[s][2]+"' is not allowed.",Pe(r[s]));const o=r[s][2];if(!us(o))return V("InvalidAttr","Attribute '"+o+"' is an invalid name.",Pe(r[s]));if(!n.hasOwnProperty(o))n[o]=1;else return V("InvalidAttr","Attribute '"+o+"' is repeated.",Pe(r[s]))}return!0}function os(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}function as(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,os(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}function V(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function us(t){return gt.isName(t)}function ls(t){return gt.isName(t)}function ne(t,e){const r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Pe(t){return t.startIndex+t[1].length}function cs(t){return typeof t=="function"?t:Array.isArray(t)?e=>{for(const r of t)if(typeof r=="string"&&e===r||r instanceof RegExp&&r.test(e))return!0}:()=>!1}var fs=cs;const hs=`
`;function ps(t,e){let r="";return e.format&&e.indentBy.length>0&&(r=hs),_r(t,e,"",r)}function _r(t,e,r,n){let s="",o=!1;for(let i=0;i<t.length;i++){const u=t[i],a=ds(u);if(a===void 0)continue;let l="";if(r.length===0?l=a:l=`${r}.${a}`,a===e.textNodeName){let R=u[a];gs(l,e)||(R=e.tagValueProcessor(a,R),R=Rr(R,e)),o&&(s+=n),s+=R,o=!1;continue}else if(a===e.cdataPropName){o&&(s+=n),s+=`<![CDATA[${u[a][0][e.textNodeName]}]]>`,o=!1;continue}else if(a===e.commentPropName){s+=n+`<!--${u[a][0][e.textNodeName]}-->`,o=!0;continue}else if(a[0]==="?"){const R=br(u[":@"],e),v=a==="?xml"?"":n;let P=u[a][0][e.textNodeName];P=P.length!==0?" "+P:"",s+=v+`<${a}${P}${R}?>`,o=!0;continue}let p=n;p!==""&&(p+=e.indentBy);const g=br(u[":@"],e),d=n+`<${a}${g}`,b=_r(u[a],e,l,p);e.unpairedTags.indexOf(a)!==-1?e.suppressUnpairedNode?s+=d+">":s+=d+"/>":(!b||b.length===0)&&e.suppressEmptyNode?s+=d+"/>":b&&b.endsWith(">")?s+=d+`>${b}${n}</${a}>`:(s+=d+">",b&&n!==""&&(b.includes("/>")||b.includes("</"))?s+=n+e.indentBy+b+n:s+=b,s+=`</${a}>`),o=!0}return s}function ds(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const n=e[r];if(t.hasOwnProperty(n)&&n!==":@")return n}}function br(t,e){let r="";if(t&&!e.ignoreAttributes)for(let n in t){if(!t.hasOwnProperty(n))continue;let s=e.attributeValueProcessor(n,t[n]);s=Rr(s,e),s===!0&&e.suppressBooleanAttributes?r+=` ${n.substr(e.attributeNamePrefix.length)}`:r+=` ${n.substr(e.attributeNamePrefix.length)}="${s}"`}return r}function gs(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let n in e.stopNodes)if(e.stopNodes[n]===t||e.stopNodes[n]==="*."+r)return!0;return!1}function Rr(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){const n=e.entities[r];t=t.replace(n.regex,n.val)}return t}var ms=ps;const As=ms,ys=fs,_s={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Ne(t){this.options=Object.assign({},_s,t),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=ys(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Es),this.processTextOrObjNode=bs,this.options.format?(this.indentate=Rs,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Ne.prototype.build=function(t){return this.options.preserveOrder?As(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0,[]).val)},Ne.prototype.j2x=function(t,e,r){let n="",s="";const o=r.join(".");for(let i in t)if(Object.prototype.hasOwnProperty.call(t,i))if(typeof t[i]>"u")this.isAttribute(i)&&(s+="");else if(t[i]===null)this.isAttribute(i)||i===this.options.cdataPropName?s+="":i[0]==="?"?s+=this.indentate(e)+"<"+i+"?"+this.tagEndChar:s+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if(t[i]instanceof Date)s+=this.buildTextValNode(t[i],i,"",e);else if(typeof t[i]!="object"){const u=this.isAttribute(i);if(u&&!this.ignoreAttributesFn(u,o))n+=this.buildAttrPairStr(u,""+t[i]);else if(!u)if(i===this.options.textNodeName){let a=this.options.tagValueProcessor(i,""+t[i]);s+=this.replaceEntitiesValue(a)}else s+=this.buildTextValNode(t[i],i,"",e)}else if(Array.isArray(t[i])){const u=t[i].length;let a="",l="";for(let p=0;p<u;p++){const g=t[i][p];if(!(typeof g>"u"))if(g===null)i[0]==="?"?s+=this.indentate(e)+"<"+i+"?"+this.tagEndChar:s+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if(typeof g=="object")if(this.options.oneListGroup){const d=this.j2x(g,e+1,r.concat(i));a+=d.val,this.options.attributesGroupName&&g.hasOwnProperty(this.options.attributesGroupName)&&(l+=d.attrStr)}else a+=this.processTextOrObjNode(g,i,e,r);else if(this.options.oneListGroup){let d=this.options.tagValueProcessor(i,g);d=this.replaceEntitiesValue(d),a+=d}else a+=this.buildTextValNode(g,i,"",e)}this.options.oneListGroup&&(a=this.buildObjectNode(a,i,l,e)),s+=a}else if(this.options.attributesGroupName&&i===this.options.attributesGroupName){const u=Object.keys(t[i]),a=u.length;for(let l=0;l<a;l++)n+=this.buildAttrPairStr(u[l],""+t[i][u[l]])}else s+=this.processTextOrObjNode(t[i],i,e,r);return{attrStr:n,val:s}},Ne.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function bs(t,e,r,n){const s=this.j2x(t,r+1,n.concat(e));return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,s.attrStr,r):this.buildObjectNode(s.val,e,s.attrStr,r)}Ne.prototype.buildObjectNode=function(t,e,r,n){if(t==="")return e[0]==="?"?this.indentate(n)+"<"+e+r+"?"+this.tagEndChar:this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,o="";return e[0]==="?"&&(o="?",s=""),(r||r==="")&&t.indexOf("<")===-1?this.indentate(n)+"<"+e+r+o+">"+t+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&o.length===0?this.indentate(n)+`<!--${t}-->`+this.newLine:this.indentate(n)+"<"+e+r+o+this.tagEndChar+t+this.indentate(n)+s}},Ne.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e},Ne.prototype.buildTextValNode=function(t,e,r,n){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(n)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(n)+"<"+e+r+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,t);return s=this.replaceEntitiesValue(s),s===""?this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(n)+"<"+e+r+">"+s+"</"+e+this.tagEndChar}},Ne.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t};function Rs(t){return this.options.indentBy.repeat(t)}function Es(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}function vs(t,e){if(t.indexOf(e)>-1)return[e];const r=Fe(t,e);return r.length?r:[]}async function mt(t){if(new Uint16Array(t,0,2)[0]===35615)try{const r=new Response(t),n=new DecompressionStream("gzip"),s=await r.body?.pipeThrough(n),o=await new Response(s).arrayBuffer();return await mt(o)}catch(r){console.error("eee",r)}return t}dt.insensitive=!0;const Cs=/.*\.(avro|dbf|gpkg|gz|h5|jpg|jpeg|omx|png|shp|shx|sqlite|zip|zst)$/,Ss=["simwrapper",".simwrapper"],Me={};class ws{baseUrl;urlId;slug;needsAuth;fsHandle;store;isGithub;isFlask;type;constructor(e,r){this.urlId=e.slug,this.slug=e.slug,this.needsAuth=!!e.needPassword,this.fsHandle=e.handle||null,this.store=r||null,this.isGithub=!!e.isGithub,this.isFlask=!!e.flask,this.type=0,this.fsHandle&&(this.type=1),this.isGithub&&(this.type=2),this.isFlask&&(this.type=3),this.baseUrl=e.baseURL,e.baseURL.endsWith("/")||(this.baseUrl+="/"),Me[this.urlId]||(Me[this.urlId]={})}hasHandle(){return!!this.fsHandle}async getChromePermission(e){return e&&await e.queryPermission({mode:"read"})!=="granted"&&this.store?await new Promise(o=>{this.store.commit("setFileHandleForPermissionRequest",{handle:e,resolve:o})}):!0}clearCache(){Me[this.urlId]={}}cleanURL(e){let r=this.baseUrl+e.replace(/^0-9a-zA-Z_\-\/:+/i,"");return r=r.replaceAll("//","/"),r=r.replaceAll("//","/"),r=r.replace("https:/","https://"),r=r.replace("http:/","http://"),r=new URL(r).href,r}async _getFileResponse(e){switch(this.type){case 1:return this._getFileFromChromeFileSystem(e);case 2:return this._getFileFromGitHub(e);case 3:return this._getFileFromAzure(e);case 0:default:return this._getFileFetchResponse(e)}}async _getFileFetchResponse(e){const r=this.cleanURL(e),n={},s=new Request(r,{headers:n});return await fetch(s).then(i=>{if(i.status!=200)throw console.log("Status:",i.status),i;return i})}async _getDirectoryFromAzure(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r=r.replaceAll("//","/");let n=`${this.baseUrl}list/${this.slug}?prefix=${r}`;const s=new URL(n).href,o={};if(this.needsAuth){let l=localStorage.getItem(`auth-token-${this.slug}`);if(l||(l=prompt("This server requires an access token to continue")),l)localStorage.setItem(`auth-token-${this.slug}`,l),o.AZURETOKEN=l;else return{dirs:[],files:[],handles:{}}}const i=new Request(s,{headers:o}),u=await fetch(i);if(u.status==400){let l=prompt("Authorization failure. This server requires a valid access token to continue");return l?(localStorage.setItem(`auth-token-${this.slug}`,l),o.AZURETOKEN=l,await this._getDirectoryFromAzure(e)):{dirs:[],files:[],handles:{}}}if(u.status!=200)throw console.log("Status:",u.status),u;return await u.json()}getSlug(){return this.slug}async _getFileFromAzure(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r=r.replaceAll("//","/");let n=`${this.baseUrl}file/${this.slug}?prefix=${r}`;const s=new URL(n).href,o={},i=new Request(s,{headers:o}),u=await fetch(i);if(u.status!=200)throw console.log("Status:",u.status),u;return u}async _getFileFromChromeFileSystem(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r=new URL(`http://local/${r}`).href,r=r.substring(13);const n=r.lastIndexOf("/"),s=r.substring(0,n),o=decodeURIComponent(r.substring(n+1)),u=(await this.getDirectory(s)).handles[o];if(!u)throw Error(`File ${o} missing`);const a=await u.getFile();return a.json=()=>new Promise(async(l,p)=>{const g=await a.text(),d=JSON.parse(g);l(d)}),a.blob=()=>new Promise(async(l,p)=>{l(a)}),new Promise((l,p)=>{l(a)})}async _getFileFromGitHub(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r.startsWith("/")&&(r=r.slice(1));const n=r.split("/").filter(d=>!!d);if(n.length<2)return new Promise((d,b)=>{d(null)});const s=`${n[0]}/${n[1]}`;let o=`https://api.github.com/repos/${s}/contents/`;n.shift(),n.shift(),o+=n.join("/");const a={Authorization:`Bearer ${["11","pat","github"].reverse().join("_")}${Et}_SyKezxQUoOKXAx3HwTH51I4funGUSFfxdbGG2X4l3WvUHIW62GOOmO0OMWZ`};let l=await await fetch(o,{headers:a}).then(d=>d.json()),p=l.content;if(p||(o=`https://api.github.com/repos/${s}/git/blobs/${l.sha}`,l=await await fetch(o,{headers:a}).then(d=>d.json()),p=l.content),l.encoding=="base64"){const d=Uint8Array.from(atob(l.content),b=>b.charCodeAt(0));Cs.test(e.toLocaleLowerCase())?p=d:p=new TextDecoder().decode(d)}else l.encoding=="utf-8"?p=new TextDecoder().decode(l.content):p=l.content;return{text:()=>new Promise((d,b)=>{d(p)}),json:()=>new Promise(async(d,b)=>{const R=JSON.parse(p);d(R)}),blob:()=>new Promise(async(d,b)=>{d(new Blob([p],{type:"application/octet-stream"}))})}}async _getDirectoryFromGitHub(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r.startsWith("/")&&(r=r.slice(1));const n={dirs:[],files:[],handles:{}},s=r.split("/").filter(p=>!!p);if(s.length<2)return n;let o=`https://api.github.com/repos/${s[0]}/${s[1]}/contents/`;s.shift(),s.shift(),o+=s.join("/");const a={Authorization:`Bearer ${["11","pat","github"].reverse().join("_")}${Et}_SyKezxQUoOKXAx3HwTH51I4funGUSFfxdbGG2X4l3WvUHIW62GOOmO0OMWZ`};return(await await fetch(o,{headers:a}).then(p=>p.json())).forEach(p=>{p.type=="file"&&n.files.push(p.name),p.type=="dir"&&n.dirs.push(p.name)}),n}async getFileText(e){return(await this._getFileResponse(e)).text()}async getFileJson(e){const s=await(await(await this._getFileResponse(e)).blob()).arrayBuffer(),o=await mt(s),i=new TextDecoder("utf-8").decode(o);return JSON.parse(i)}async getFileBlob(e){return(await this._getFileResponse(e)).blob()}async getFileStream(e){let r;switch(this.type){case 1:return r=await this._getFileFromChromeFileSystem(e).then(s=>s.blob()).then(s=>s.stream()),r;case 0:return r=await this._getFileFetchResponse(e).then(s=>s.body),r;case 3:const n=`/file/${this.slug}?prefix=${e}`;return r=await this._getFileFetchResponse(n).then(s=>s.body),r;default:throw Error(`FileSystemType ${this.type} not implemented`)}}async getDirectory(e){let r=e.replaceAll("//","/");r.endsWith("/")||(r+="/");const n=Me[this.urlId][r];if(n)return n;r=r.replaceAll("/./","/");try{let s;switch(this.type){case 1:s=await this._getDirectoryFromHandle(r);break;case 2:s=await this._getDirectoryFromGitHub(r);break;case 3:s=await this._getDirectoryFromAzure(r);break;case 0:default:s=await this._getDirectoryFromURL(r);break}return s.dirs.sort((o,i)=>dt(o,i)),s.files.sort((o,i)=>dt(o,i)),Me[this.urlId][r]=s,s}catch(s){throw Error(""+s)}}async _getDirectoryFromHandle(e,r){const n={files:[],dirs:[],handles:{}};if(!this.fsHandle||!await this.getChromePermission(this.fsHandle))return n;let o=e.split("/").filter(l=>!!l);function i(l){const p=l.indexOf("..");if(p<=0)return l;const g=l.filter((d,b)=>b!==p-1&&b!==p);return i(g)}const u=i(o);let a=this.fsHandle;if(u.length)for(const l of u){let p=!1;for await(let[g,d]of a)if(g===l){a=d,p=!0;break}if(!p)throw Error(`Could not find folder "${l}"`)}for await(let l of a.values())n.handles&&(n.handles[l.name]=l),l.kind==="file"?n.files.push(l.name):n.dirs.push(l.name);return n}async _getDirectoryFromURL(e){const n=await(await this._getFileResponse(e).then()).text();return this.buildListFromHtml(n)}async findAllYamlConfigs(e){const r={dashboards:{},topsheets:{},vizes:{},configs:{}},n=[];let s="/";const i=(e.startsWith("/")?e:"/"+e).split("/");for(const g of i.slice(0,i.length-1)){s=`${s}${g}/`.replaceAll("//","/");try{const{dirs:d}=await this.getDirectory(s);for(const b of d)Ss.includes(b.toLocaleLowerCase())&&n.push(`${s}/${b}`.replaceAll("//","/"))}catch{}}n.push(e);const u="dashboard*.y?(a)ml",a="(topsheet|table)*.y?(a)ml",l="viz*.y?(a)ml",p="simwrapper-config.y?(a)ml";for(const g of n){const{files:d}=await this.getDirectory(g);Fe.match(d,u).map(b=>r.dashboards[b]=`${g}/${b}`.replaceAll("//","/")),Fe.match(d,a).map(b=>r.topsheets[b]=`${g}/${b}`.replaceAll("//","/")),Fe.match(d,l).map(b=>r.vizes[b]=`${g}/${b}`.replaceAll("//","/")),Fe.match(d,p).map(b=>r.configs[b]=`${g}/${b}`.replaceAll("//","/"))}return r}buildListFromHtml(e){return e.indexOf("SimpleWebServer")>-1?this.buildListFromSimpleWebServer(e):e.indexOf("<ul>")>-1?this.buildListFromSVN(e):e.indexOf('<ul id="files">')>-1?this.buildListFromNpxServe(e):e.indexOf("<table>")>-1?this.buildListFromApache24(e):e.indexOf(`
<a `)>-1?this.buildListFromNGINX(e):{dirs:[],files:[],handles:{}}}buildListFromSimpleWebServer(e){const r=/">(.*?)<\/a/,n=[],s=[],o=e.split(`
`);for(const i of o){if(i.indexOf('<li><a href="')<0)continue;const a=i.match(r);if(!a)continue;const l=a[1];l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l)}return{dirs:n,files:s,handles:{}}}buildListFromNpxServe(e){const r=/"(.*?)"/;let n=[],s=[];const o=e.split("</li>").map(i=>i.slice(i.lastIndexOf("<li")));for(const i of o){const u=i.indexOf('<li> <a href="');if(u<0||u>512)continue;const a=i.match(r);if(!a)continue;let l=a[1];l=l.replaceAll("&#47;","/"),l!=="/"&&l!=="../"&&(l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l))}return n=n.map(i=>i.slice(1+i.lastIndexOf("/"))),s=s.map(i=>i.slice(1+i.lastIndexOf("/"))),{dirs:n,files:s,handles:{}}}buildListFromSVN(e){const r=/"(.*?)"/,n=[],s=[],o=e.split(`
`);for(const i of o){if(i.indexOf('<li><a href="')<0)continue;const a=i.match(r);if(!a)continue;let l=a[1];l!=="../"&&(l.startsWith("./")&&(l=l.substring(2)),l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l))}return{dirs:n,files:s,handles:{}}}buildListFromApache24(e){const r=/"(.*?)"/,n=[],s=[],o=e.split(`
`);for(const i of o){if(i.indexOf('<th "')>-1||i.indexOf("[PARENTDIR]")>-1)continue;const u=i.indexOf('<td><a href="');if(u<0)continue;const a=i.substring(u).match(r);if(!a)continue;const l=a[1];l!=="../"&&(l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l))}return{dirs:n,files:s,handles:{}}}buildListFromNGINX(e){const r=/"(.*?)"/,n=[],s=[],o=e.split(`
`);for(const i of o){const u=i.indexOf('<a href="');if(u<0)continue;const a=i.substring(u).match(r);if(!a)continue;const l=a[1];l!=="../"&&(l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l))}return{dirs:n,files:s,handles:{}}}}let At,Ee="",yt=[],Q={},ue="",_t,bt=!1,Be=[];const be={};onmessage=function(t){xs(t.data)};async function xs(t){if(Q=t.config,ue=Q.dataset,t.options?.highPrecision&&(bt=!0),t.featureProperties){$s(t.featureProperties),postMessage(be[ue]);return}if(t.buffer){_t=t.buffer,Er(ue,_t),postMessage(be[ue]);return}At=new ws(t.fileSystemConfig),Ee=t.subfolder,yt=t.files,_t=t.buffer;try{const e=Q.dataset.indexOf("/");if(e>-1){let r=Ee;Ee&&(r+="/");const n=e===0?Q.dataset:`${r}${Q.dataset}`;ue=n.substring(1+n.lastIndexOf("/")),Ee=n.substring(0,n.lastIndexOf("/"));let s=Ee.startsWith("./")?Ee.slice(2):Ee;const{files:o}=await At.getDirectory(s);yt=o}await Ns(),Be.length&&(be[ue]._comments=Be),postMessage(be[ue])}catch(e){const r=""+e;postMessage({error:r})}}function $s(t){const e={},r=t[0];let n=Object.keys(r).sort();if(Q.drop){let s=Array.isArray(Q.drop)?Q.drop:Q.drop.split(",");s.length&&(console.log("DROPPING",s),n=n.filter(o=>s.indexOf(o)==-1))}if(Q.keep){let s=Array.isArray(Q.keep)?Q.keep:Q.keep.split(",");s.length&&(console.log("KEEPING",s),n=n.filter(o=>s.indexOf(o)>-1))}for(const s of n){let o,i=ie.NUMBER;typeof r[s]=="number"?(o=bt?new Float64Array(t.length):new Float32Array(t.length),o.fill(NaN)):(o=[],i=ie.STRING),e[s]={name:s,values:o,type:i}}for(let s=0;s<t.length;s++){const o=t[s];for(const i of n){const u=o[i];e[i].values[s]=u}}be[ue]=e,Rt(ue,e)}async function Ns(){const t=ue,e=vs(yt,t);if(e.length==0)throw Error(`File not found: "${t}"`);if(e.length>1)throw Error(`More than one file matched "${t}": ${e}`);const r=e[0],n=await Ls(r);Er(r,n)}async function Er(t,e){try{if(t&&t.toLocaleLowerCase().endsWith(".dbf")){const r=$r(e,new TextDecoder("windows-1252"));Rt(ue,r),be[ue]=r}else{const r=new TextDecoder().decode(e);await Os(ue,t,r)}}catch(r){const n=(""+r).replaceAll("Error: ","");postMessage({error:n})}}async function Os(t,e,r){function n(s,o){return Array.isArray(o)&&o.length>0?n(s[o[0]],o.slice(1)):s}if(e.indexOf(".xml")>-1){const s={},o=Q;if(o.xmlElements){const i=o.xmlElements.split(".");n(s,i),be[t]={}}else be[t]={};return}Ts(t,e,r)}function Ts(t,e,r){const n={},s={},o=Lr.parse(r,{delimitersToGuess:["	",";",","," "],comments:"#",skipEmptyLines:!0,dynamicTyping:!0,header:!0,transformHeader:(u,a)=>(s[u]||(s[u]=0),s[u]+=1,s[u]>1?`${u.trim()}_${s[u]-1}`:u.trim())});if(!o.data?.length)throw console.error("NODATA - Papaparse returned nothing!"),Error("Bad format or too large? Error loading");let i=o.meta.fields||[];if(Q.drop){let u=Array.isArray(Q.drop)?Q.drop:Q.drop.split(",");u.length&&(console.log("DROPPING",u),i=i.filter(a=>u.indexOf(a)==-1))}if(Q.keep){let u=Array.isArray(Q.keep)?Q.keep:Q.keep.split(",");u.length&&(console.log("KEEPING",u),i=i.filter(a=>u.indexOf(a)>-1))}for(const u of i){const a=bt?new Float64Array(o.data.length).fill(NaN):new Float32Array(o.data.length).fill(NaN);n[u]={name:u,values:a,type:ie.NUMBER}}for(let u=0;u<o.data.length;u++){const a=o.data[u];for(const l of i){const p=a[l];if(p!=="")if(Number.isFinite(p))n[l].values[u]=p;else if(Array.isArray(n[l].values))n[l].values[u]=p;else{const g=Array.from(n[l].values.slice(0,u));typeof p=="string"&&(n[l].type=ie.STRING),typeof p=="boolean"&&(n[l].type=ie.BOOLEAN),g[u]=p,n[l].values=g}}}Rt(t,n),be[t]=n,Be=[...new Set(o.comments)],Be.length&&console.log({_comments:Be})}function Rt(t,e){for(const r of Object.values(e)){if(r.type!==ie.NUMBER)continue;let n=-1/0;for(const s of r.values)n=Math.max(n,s);r.max=n}}async function Ls(t){const e=`${Ee}/${t}`,r=await At.getFileBlob(e);if(!r)throw Error("BLOB IS NULL");const n=await r.arrayBuffer();return await mt(n)}})();
