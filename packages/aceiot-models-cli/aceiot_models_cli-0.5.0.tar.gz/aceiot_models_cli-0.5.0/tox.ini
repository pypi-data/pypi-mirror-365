[tox]
requires = 
    tox>=4
    tox-uv>=1
env_list = py310, py311, py312, py313, lint, type
min_version = 4.0

[testenv]
description = run unit tests
extras = dev
deps = 
    pytest>=8.4.1
    pytest-cov>=6.0.0
commands = 
    pytest {posargs:tests} -v --cov=aceiot_models_cli --cov-report=term-missing

[testenv:lint]
description = run linters
skip_install = true
deps = 
    ruff>=0.12.4
commands = 
    ruff check src tests
    ruff format --check src tests

[testenv:type]
description = run type checks with pyright
deps = 
    pyright>=1.1.380
    {[testenv]deps}
commands = 
    pyright src

[testenv:format]
description = format code with ruff
skip_install = true
deps = 
    ruff>=0.12.4
commands = 
    ruff format src tests
    ruff check --fix src tests

[gh-actions]
python =
    3.10: py310
    3.11: py311
    3.12: py312
    3.13: py313