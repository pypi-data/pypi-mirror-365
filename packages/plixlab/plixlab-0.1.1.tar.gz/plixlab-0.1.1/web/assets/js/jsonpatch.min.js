/**
 * Minified by jsDelivr using Terser v5.17.1.
 * Original file: /npm/jsonpatch@3.1.0/lib/jsonpatch.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
/* @preserve
 * JSONPatch.js
 *
 * A Dharmafly project written by Thomas Parslow
 * <tom@almostobsolete.net> and released with the kind permission of
 * NetDev.
 *
 * Copyright 2011-2013 Thomas Parslow. All rights reserved.
 * Permission is hereby granted,y free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * Implements the JSON Patch IETF RFC 6902 as specified at:
 *
 *   http://tools.ietf.org/html/rfc6902
 *
 * Also implements the JSON Pointer IETF RFC 6901 as specified at:
 *
 *   http://tools.ietf.org/html/rfc6901
 *
 */
!function(t,e){"object"==typeof exports?e(module.exports):"function"==typeof define&&define.amd?define(["exports"],e):(t.jsonpatch={},t.returnExports=e(t.jsonpatch))}(this,(function(t){var e,n,r,o;function i(t){Error.call(this,t),this.message=t}function a(t){Error.call(this,t),this.message=t}function p(t,e){var n;if(t===e)return!0;if(typeof t!=typeof e)return!1;if("object"==typeof t){var r=o(t);if(r!==o(e))return!1;if(r){if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(!p(t[i],e[i]))return!1;return!0}for(n in t)if(Object.hasOwnProperty(t,n)&&(!Object.hasOwnProperty(e,n)||!p(t[n],e[n])))return!1;for(n in e)if(Object.hasOwnProperty(e,n)&&!Object.hasOwnProperty(t,n))return!1;return!0}return!1}function u(t,e){!function(t){var e,n;if(!t.op)throw new i("Operation missing!");if(!r.hasOwnProperty(t.op))throw new i("Invalid operation!");if(!("path"in t))throw new i("Path missing!");for(n=r[t.op],e=0;e<n.length;e++)if(!(n[e]in t))throw new i(t.op+" must have key "+n[e])}(t);var o=t.op,u=new n(t.path),c=t.value,f=t.from?new n(t.from):null;switch(o){case"add":return function(t){return u.add(t,c,e)};case"remove":return function(t){return u.remove(t,e)};case"replace":return function(t){return u.replace(t,c,e)};case"move":if(u.subsetOf(f))throw new i("destination must not be a child of source");return function(t){var n=f.get(t),r=f.remove(t,e);return u.add(r,n,e)};case"copy":return function(t){var n=f.get(t);return u.add(t,n,e)};case"test":return function(t){if(!p(u.get(t),c))throw new a("Test operation failed. Value did not match.");return t}}}o=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},t.apply_patch=function(t,n){return new e(n).apply(t)},t.InvalidPatch=i,i.prototype=new Error,t.PatchApplyError=a,a.prototype=new Error,t.JSONPointer=n=function(t){var e,n,r=[];if(""!==(n=t.split("/"))[0])throw new i("JSONPointer must start with a slash (or be an empty string)!");for(e=1;e<n.length;e++)r[e-1]=n[e].replace(/~1/g,"/").replace(/~0/g,"~");this.path=r,this.length=r.length},n.prototype._get_segment=function(t,e){var n=this.path[t];if(o(e))if("-"===n)n=e.length;else{if(!n.match(/^0$|^[1-9][0-9]*$/))throw new a("Expected a number to segment an array");n=parseInt(n,10)}return n},n.prototype._action=function(t,e,n){var r=this;return function t(i,p){var u,c;if(n||(i=function(t){var e,n;if(o(t))return t.slice();if(null===t)return t;if("object"==typeof t){for(n in e={},t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return t}(i)),u=r._get_segment(p,i),p==r.path.length-1)i=e(i,u);else{if(o(i)){if(i.length<=u)throw new a("Path not found in document")}else{if("object"!=typeof i)throw new a("Path not found in document");if(!Object.hasOwnProperty.call(i,u))throw new a("Path not found in document")}c=t(i[u],p+1),n||(i[u]=c)}return i}(t,0)},n.prototype.add=function(t,e,n){return 0===this.length?e:this._action(t,(function(t,n){if(o(t)){if(n>t.length)throw new a("Add operation must not attempt to create a sparse array!");t.splice(n,0,e)}else t[n]=e;return t}),n)},n.prototype.remove=function(t,e){if(0!==this.length)return this._action(t,(function(t,e){if(!Object.hasOwnProperty.call(t,e))throw new a("Remove operation must point to an existing value!");return o(t)?t.splice(e,1):delete t[e],t}),e)},n.prototype.replace=function(t,e,n){return 0===this.length?e:this._action(t,(function(t,n){if(!Object.hasOwnProperty.call(t,n))throw new a("Replace operation must point to an existing value!");return o(t)?t.splice(n,1,e):t[n]=e,t}),n)},n.prototype.get=function(t){var e;return 0===this.length?t:(this._action(t,(function(t,n){if(!Object.hasOwnProperty.call(t,n))throw new a("Path not found in document");return e=t[n],t}),!0),e)},n.prototype.subsetOf=function(t){if(this.length<=t.length)return!1;for(var e=0;e<t.length;e++)if(t.path[e]!==this.path[e])return!1;return!0},r={add:["value"],replace:["value"],test:["value"],remove:[],move:["from"],copy:["from"]},t.JSONPatch=e=function(t,e){this._compile(t,e)},e.prototype._compile=function(t,e){var n;if(this.compiledOps=[],"string"==typeof t&&(t=JSON.parse(t)),!o(t))throw new i("Patch must be an array of operations");for(n=0;n<t.length;n++){var r=u(t[n],e);this.compiledOps.push(r)}},t.JSONPatch.prototype.apply=function(t){var e;for(e=0;e<this.compiledOps.length;e++)t=this.compiledOps[e](t);return t}}));
//# sourceMappingURL=/sm/504e59fef0f8452521654147656a5ea87eecc6e5a2fca84f7261357d658c86b4.map