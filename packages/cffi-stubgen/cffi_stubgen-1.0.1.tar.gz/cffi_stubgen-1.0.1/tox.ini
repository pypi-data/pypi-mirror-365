[tox]
envlist = py310, py311, py312, py313, lint, typecheck

[testenv]
deps =
    pytest
    mypy
    flake8
    cffi>=1.10
    types-cffi>=1.10
    pycparser>=2
    ./example/example_module
commands =
    pytest

[testenv:lint]
description = Run flake8 for code style checks
deps = flake8
commands = flake8 cffi_stubgen

[testenv:typecheck]
description = Run mypy for type checking
deps = mypy
commands = mypy cffi_stubgen

[flake8]
exclude = .venv,.tox,build,dist
ignore=
    # line too long
    E501,
    #line break after binary operator
    W503

[mypy]
python_version = 3.10
ignore_missing_imports = True
strict = True