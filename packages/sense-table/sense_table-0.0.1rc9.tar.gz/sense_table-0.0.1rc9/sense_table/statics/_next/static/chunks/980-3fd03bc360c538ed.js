"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[980],{58243:function(n,e,t){t.d(e,{G7:function(){return a},HK:function(){return i},Je:function(){return s},Z6:function(){return r},fF:function(){return c},o$:function(){return o},vb:function(){return u},xW:function(){return l}});var r={FolderBrowser:"FolderBrowser",Table:"Table"},o=32,a={ColumnNavigation:"ColumnNavigation",MainTable:"MainTable",Histogram:"Histogram",BubblePlot:"BubblePlot",BoxPlot:"BoxPlot",HeatMap:"HeatMap",Gallery:"Gallery",ColumnFilters:"ColumnFilters",RowDetails:"RowDetails",DistributionSummary:"DistributionSummary",FreeFormSQL:"FreeFormSQL",BrowseFolder:"BrowseFolder",Playground:"Playground"},c="Three columns",u="Side by side",i="Two columns",s={TEXT:"Text",NUMBER:"Number",CATEGORY:"Category",JSON:"JSON",IFRAME:"IFrame",LINK:"Link",VIDEO_URL:"VideoUrl",IMAGE_URL:"ImageUrl"},l="https://smoosenseai.github.io/sense-table/"},20619:function(n,e,t){t.d(e,{Ch:function(){return l},Fj:function(){return s},Kb:function(){return c},OS:function(){return m},nU:function(){return d},oW:function(){return p},qv:function(){return u}});var r=t(98656),o=t(31032),a=t(37736),c=(0,r.oM)({name:"agColDefs",initialState:{columnDefs:[],sorting:[],filters:{},baselineFilters:{}},reducers:{setColumnDefs:function(n,e){n.columnDefs=e.payload},setSorting:function(n,e){n.sorting=e.payload},updateDef:function(n,e){var t=e.payload,r=t.field,o=t.name,a=t.value,c=n.columnDefs.find(function(n){return n.field===r});c&&(c[o]=a)},setFilters:function(n,e){n.filters=e.payload},setFilterForColumn:function(n,e){var t=e.payload,r=t.field,o=t.filter;n.filters[r]=o},clearFilterForColumn:function(n,e){var t=e.payload.field;delete n.filters[t]},setBaselineFilters:function(n){n.baselineFilters=n.filters}}}),u=function(n){return(0,o.map)(n.getColumnDefs(),function(n){return(0,o.pick)(n,["hide","pinned","field"])})},i=function(n){n(a.Kf.actions.refreshAllData()),n(a.It.actions.setShouldRefresh())},s=function(n,e,t){n(b({field:e,filter:t})),i(n)},l=function(n,e){n(c.actions.clearFilterForColumn({field:e})),i(n)},f=c.actions,p=f.setColumnDefs,d=f.updateDef,m=(f.setFilters,f.setSorting),b=f.setFilterForColumn;f.clearFilterForColumn,f.setBaselineFilters},4456:function(n,e,t){t.d(e,{Z:function(){return l},n:function(){return f}});var r=t(69380),o=t(40679),a=t.n(o),c=t(37736),u=t(78356),i=t(5490),s=t(81476),l=(0,c.vQ)("boxPlot"),f=function(n){var e,t=n.boxPlotColumns;return e=(0,r.Z)(a().mark(function n(e,r){var o,f,p,d,m,b,y,h,v;return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(f=(o=r().boxPlot||c.E3).data,p=o.loading,d=o.shouldRefresh,m=r().settings.boxPlotBreakdownColumn,!((f||p)&&!d)){n.next=4;break}return n.abrupt("return");case 4:return e(l.actions.fetchStart()),n.prev=5,b=function(n){var e=(0,s.q)(n);return"{\n        'min' : MIN(".concat(e,"),\n        'max' : MAX(").concat(e,"),\n        'std' : STDDEV_POP(").concat(e,"),\n        'skewness': SKEWNESS(").concat(e,"),\n        'avg' : AVG(").concat(e,"),\n        'q25' : QUANTILE_CONT(").concat(e,", 0.25),\n        'q50' : QUANTILE_CONT(").concat(e,", 0.5),\n        'q75' : QUANTILE_CONT(").concat(e,", 0.75)\n      } AS ").concat(e)},y=(0,u.kA)(r()),h="\n    WITH filtered AS (\n          SELECT ".concat((0,s.q)(m)," AS breakdown, \n          ").concat(t.map(s.q).join(", "),"\n          ").concat(y.from,"\n          ").concat(y.where,"\n      ) SELECT breakdown, COUNT(*) AS count, ").concat(t.map(function(n){return b(n)}).join(", "),"\n      FROM filtered\n      GROUP BY breakdown\n    "),n.next=11,(0,i.Vn)({dispatch:e,key:"boxPlot",query:h});case 11:v=n.sent,e(l.actions.fetchSuccess(v)),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(5),console.error(n.t0),e(l.actions.fetchError(n.t0.message));case 19:case"end":return n.stop()}},n,null,[[5,15]])})),function(n,t){return e.apply(this,arguments)}}},94582:function(n,e,t){t.d(e,{B:function(){return p},X:function(){return f}});var r=t(67856),o=t(69380),a=t(40679),c=t.n(a),u=t(37736),i=t(78356),s=t(5490),l=t(81476),f=(0,u.vQ)("bubblePlot"),p=function(n){var e,t=n.bubblePlotXColumn,a=n.bubblePlotYColumn,p=n.xBin,d=n.yBin;return e=(0,o.Z)(c().mark(function n(e,o){var m,b,y,h,v,g,O,w,S;return c().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(b=(m=o().bubblePlot||u.E3).data,y=m.loading,h=m.shouldRefresh,v=o().settings.bubblePlotBreakdownColumn,!((b||y)&&!h)){n.next=4;break}return n.abrupt("return");case 4:return e(f.actions.fetchStart()),n.prev=5,g=(0,i.kA)(o()),O="\n    WITH filtered AS (\n          SELECT \n            ".concat((0,l.q)(t)," AS x,\n            ").concat((0,l.q)(a)," AS y,\n            ").concat((0,l.q)(v)," AS breakdown\n          ").concat(g.from,"\n          ").concat(g.where," AND x IS NOT NULL AND y IS NOT NULL\n      ), binned AS (\n      SELECT\n          p.*,\n          FLOOR((p.x - ").concat(p.min,") / ").concat(p.step,")::INT AS bin_x,\n          FLOOR((p.y - ").concat(d.min,") / ").concat(d.step,")::INT AS bin_y\n      FROM filtered AS p\n      )\n      SELECT breakdown, bin_x, bin_y,\n      -- Compute the “bubble” center as the average x and y within that bin\n      AVG(x)            AS x,\n      AVG(y)            AS y,\n      COUNT(*)          AS count\n      FROM binned\n      GROUP BY 1, 2, 3\n    "),n.next=10,(0,s.Vn)({dispatch:e,key:"bubblePlot",query:O});case 10:w=n.sent,S=_(w).groupBy("breakdown").toPairs().map(function(n){var e=(0,r.Z)(n,2),o=e[0],c=e[1];return{name:o,x:_.map(c,"x"),y:_.map(c,"y"),customdata:_.map(c,function(n){var e=n.bin_x*p.step+p.min,r=e+p.step,o=n.bin_y*d.step+d.min,c=o+d.step,u=(0,l.q)(t),i=(0,l.q)(a);return{condExpr:["".concat(u," >= ").concat(e),"".concat(u," < ").concat(r),"".concat(i," >= ").concat(o),"".concat(i," < ").concat(c)].join(" AND "),count:n.count}})}}).value(),e(f.actions.fetchSuccess(S)),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(5),console.error(n.t0),e(f.actions.fetchError(n.t0.message));case 19:case"end":return n.stop()}},n,null,[[5,15]])})),function(n,t){return e.apply(this,arguments)}}},75492:function(n,e,t){t.d(e,{HW:function(){return l},I5:function(){return p},q1:function(){return d}});var r=t(71921),o=t(28755),a=t(98656),c=["name"],u=["name"];function i(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function s(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?i(Object(t),!0).forEach(function(e){(0,r.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var l=(0,a.oM)({name:"columnPreference",initialState:{data:{}},reducers:{initAllColumnPreference:function(n,e){n.data=e.payload},setColumnPreference:function(n,e){var t=e.payload,r=t.name,a=(0,o.Z)(t,c);r&&(n.data[r]=a)},updateColumnPreference:function(n,e){var t=e.payload,r=t.name,a=(0,o.Z)(t,u);r&&(n.data[r]=s(s({},n.data[r]||{}),a))}}}),f=l.actions,p=f.setColumnPreference,d=(f.initAllColumnPreference,f.updateColumnPreference)},37736:function(n,e,t){t.d(e,{E3:function(){return o},It:function(){return p},Kf:function(){return l},ae:function(){return i},kY:function(){return f},uG:function(){return d},vQ:function(){return a},wL:function(){return s}});var r=t(98656),o={data:null,loading:!1,shouldRefresh:!1,error:null},a=function(n){return(0,r.oM)({name:n,initialState:o,reducers:{setData:function(n,e){n.data=e.payload},setShouldRefresh:function(n,e){n.shouldRefresh=!0},fetchStart:function(n){n.loading=!0,n.error=null,n.shouldRefresh=!1},fetchSuccess:function(n,e){n.data=e.payload,n.loading=!1,n.error=null,n.shouldRefresh=!1},fetchError:function(n,e){n.error=e.payload,n.loading=!1,n.shouldRefresh=!1}}})},c=function(n,e){var t,r=null===(t=e.payload)||void 0===t?void 0:t.name;return r||alert("Name is required in ".concat(JSON.stringify(e))),n[r]||(n[r]={}),r},u=function(n){return(0,r.oM)({name:n,initialState:{},reducers:{resetAllData:function(n){Object.keys(n).forEach(function(e){n[e]={data:null,loading:!1,error:null,shouldRefresh:!1}})},refreshAllData:function(n){Object.keys(n).forEach(function(e){n[e].shouldRefresh=!0})},resetData:function(n,e){var t=c(n,e);n[t]=null},setShouldRefresh:function(n,e){var t=c(n,e);n[t].shouldRefresh=!0},fetchSuccess:function(n,e){var t=c(n,e);n[t]={data:e.payload,loading:!1,error:null,shouldRefresh:!1}},fetchStart:function(n,e){var t=c(n,e);n[t].loading=!0,n[t].shouldRefresh=!1},fetchError:function(n,e){var t=c(n,e);n[t]={data:null,loading:!1,error:e.payload.error,shouldRefresh:!1}}}})},i=a("columnMeta"),s=u("baselineColumnStats"),l=u("filteredColumnStats"),f=u("cardinality"),p=a("rowData"),d=a("initSettings")},83611:function(n,e,t){t.d(e,{FV:function(){return E},KU:function(){return h},LJ:function(){return w},Lv:function(){return g},xU:function(){return S}});var r,o,a,c=t(69380),u=t(40679),i=t.n(u),s=t(98656),l=t(58243),f=t(99722),p=t.n(f),d=t(31032),m=t.n(d);function b(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return y(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return y(n,e)}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,u=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return c=n.done,n},e:function(n){u=!0,a=n},f:function(){try{c||null==t.return||t.return()}finally{if(u)throw a}}}}function y(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}var h=function(n){return"image_url"in n&&"bbox"in n&&"category_name"in n?[{name:"bbox_url",renderType:l.Je.IFRAME,baseUrl:"./viz-bbox.html",params:{image:"image_url",bboxes:'[{"bbox": bbox, "label": category_name}]',autorange:'"true"'}}]:[]},v=(0,s.oM)({name:"derivedColumns",initialState:[],reducers:{addDerivedColumn:function(n,e){n.push(e.payload)},removeDerivedColumn:function(n,e){var t=e.payload;return n.filter(function(n){return n.name!==t})}}}),g=function(n){var e=n.baseUrl,t=n.params;return e+"?"+m().map(t,function(n,e){return"".concat(e,"=").concat(encodeURIComponent(n))}).join("&")},O=(r=(0,c.Z)(i().mark(function n(e){var t,r,o;return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.expr,r=e.singleRowData,n.next=3,p()(t).evaluate(r);case 3:if("object"!=typeof(o=n.sent)){n.next=8;break}return n.abrupt("return",JSON.stringify(o));case 8:return n.abrupt("return",o);case 9:case"end":return n.stop()}},n)})),function(n){return r.apply(this,arguments)}),w=(o=(0,c.Z)(i().mark(function n(e){var t,r,o,a,c;return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.params,r=e.singleRowData,o=m().keys(t),a=m().map(o,function(n){return O({expr:t[n],singleRowData:r})}),n.next=5,Promise.all(a);case 5:return c=n.sent,n.abrupt("return",m().zipObject(o,c));case 7:case"end":return n.stop()}},n)})),function(n){return o.apply(this,arguments)}),S=(a=(0,c.Z)(i().mark(function n(e){var t,r,o,a,c,u,s,l,f,p,d;return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=e.derivedColumns,o=b(r=e.rowData),n.prev=2,o.s();case 4:if((a=o.n()).done){n.next=29;break}c=a.value,u=b(t),n.prev=7,u.s();case 9:if((s=u.n()).done){n.next=19;break}return f=(l=s.value).params,n.next=14,w({params:f,singleRowData:c});case 14:p=n.sent,d=g({baseUrl:l.baseUrl,params:p}),c[l.name]=d;case 17:n.next=9;break;case 19:n.next=24;break;case 21:n.prev=21,n.t0=n.catch(7),u.e(n.t0);case 24:return n.prev=24,u.f(),n.finish(24);case 27:n.next=4;break;case 29:n.next=34;break;case 31:n.prev=31,n.t1=n.catch(2),o.e(n.t1);case 34:return n.prev=34,o.f(),n.finish(34);case 37:return n.abrupt("return",r);case 38:case"end":return n.stop()}},n,null,[[2,31,34,37],[7,21,24,27]])})),function(n){return a.apply(this,arguments)}),x=v.actions,E=x.addDerivedColumn;x.removeDerivedColumn,e.ZP=v.reducer},98358:function(n,e,t){t.d(e,{ES:function(){return E},WH:function(){return O},ZJ:function(){return S},pG:function(){return h},pk:function(){return x},tC:function(){return C}});var r=t(69380),o=t(71921),a=t(9807),c=t(40679),u=t.n(c),i=t(98656),s=t(5490),l=t(33364),f=t.n(l),p=t(31032),d=t.n(p);function m(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function b(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?m(Object(t),!0).forEach(function(e){(0,o.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var y={treeData:[],viewingItemId:"",viewFolderAs:{},expandedItems:[]};function h(n,e){var t=e.split("/")[0],r=n.find(function(n){return n.id.split("/").pop()===t});return e.includes("/")?h(r.children,e.slice(t.length+1)):r}function v(n){return"loading-".concat(n)}var g=(0,i.oM)({name:"folderBrowser",initialState:y,reducers:{setViewingItemId:function(n,e){n.viewingItemId=e.payload},resetAll:function(n){Object.keys(y).forEach(function(e){n[e]=y[e]})},setExpandedItems:function(n,e){n.expandedItems=e.payload},toggleItemExpansion:function(n,e){var t=e.payload;n.expandedItems=n.expandedItems.includes(t)?n.expandedItems.filter(function(n){return n!==t}):[].concat((0,a.Z)(n.expandedItems),[t])},setViewFolderAs:function(n,e){var t=e.payload,r=t.id,o=t.viewAs;n.viewFolderAs[r]=o},updateChildrenSuccess:function(n,e){var t=e.payload,r=t.itemId,o=t.children.map(function(n){return b(b({id:f().join(r,n.name),label:n.name,secondaryLabel:n.isDir?"Folder":"File"},d().pick(n,["lastModified","isDir","size"])),{},{children:n.isDir?[{id:v(f().join(r,n.name)),label:"Loading..."}]:[]})});""===r?n.treeData=o:h(n.treeData,r).children=o}}}),O=function(n){var e,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=(0,r.Z)(u().mark(function e(o,a){var c,i,l,p,d;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p=function(){return(p=(0,r.Z)(u().mark(function e(){var t,r,a,l;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=f().join(i,n),r=c.settings.folderBrowserShowHiddenFiles,a=c.settings.folderBrowserListLimit,e.next=5,(0,s.Wu)({parentPath:t,showHidden:r,limit:a});case 5:l=e.sent,o(g.actions.updateChildrenSuccess({itemId:n,children:l}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)},l=function(){return p.apply(this,arguments)},i=(c=a()).settings.folderBrowserRootFolder){e.next=8;break}return e.abrupt("return");case 8:if(""!==n){e.next=13;break}return e.next=11,l();case 11:e.next=17;break;case 13:if(d=h(c.folderBrowser.treeData,n),!(t||d&&d.children&&1===d.children.length&&d.children[0].id===v(n))){e.next=17;break}return e.next=17,l();case 17:case"end":return e.stop()}},e)})),function(n,t){return e.apply(this,arguments)}},w=g.actions,S=w.setViewingItemId,x=w.setViewFolderAs,E=w.setExpandedItems,C=w.toggleItemExpansion;e.ZP=g.reducer},41208:function(n,e,t){t.d(e,{Mx:function(){return y},v5:function(){return g},wH:function(){return b}});var r=t(69380),o=t(71921),a=t(40679),c=t.n(a),u=t(37736),i=t(78356),s=t(5490),l=t(81476),f=t(31032),p=t.n(f);function d(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function m(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?d(Object(t),!0).forEach(function(e){(0,o.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var b="__y__label__value__",y=(0,u.vQ)("heatMap"),h=function(n){return{min:p().min(n),max:p().max(n),sum:p().sum(n)}},v=function(n){var e=p()(n).map("x").uniq().map(String).value(),t=p()(n).groupBy("y").map(function(n,e){return m(m({},p()(n).map(function(n){return[n.x,n]}).fromPairs().value()),{},(0,o.Z)({},b,e))}).value(),r=h(p().map(n,"cnt")),a=p().fromPairs(p().map(t,function(n,e){var t=p()(n).values().map("cnt").value();return[n[b],h(t)]})),c=p().fromPairs(p().map(e,function(n,e){var r=p().map(t,function(e){var t;return null===(t=e[n])||void 0===t?void 0:t.cnt});return[n,h(r)]}));return{xLabels:e,rowData:p().map(t,function(n){return m({rowTotal:a[n[b]].sum},n)}),xStats:c,yStats:a,allStats:r}},g=function(n){var e,t=n.heatmapXColumn,o=n.heatmapYColumn;return e=(0,r.Z)(c().mark(function n(e,r){var a,u,f,p,d,m,b;return c().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(u=(a=r().heatMap||{data:null,loading:!1,shouldRefresh:!1}).data,f=a.loading,p=a.shouldRefresh,!((u||f)&&!p)){n.next=3;break}return n.abrupt("return");case 3:return e(y.actions.fetchStart()),n.prev=4,d=(0,i.kA)(r()),m="\n    WITH filtered AS (\n          SELECT \n            ".concat((0,l.q)(t)," AS x, \n            ").concat((0,l.q)(o)," AS y\n          ").concat(d.from,"\n          ").concat(d.where,"\n      ) SELECT x, y, COUNT(*) AS cnt \n       FROM filtered\n       GROUP BY x, y\n      "),n.next=9,(0,s.Vn)({dispatch:e,key:"heatMap",query:m});case 9:b=v(n.sent),e(y.actions.fetchSuccess(b)),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(4),console.error(n.t0),e(y.actions.fetchError(n.t0.message));case 18:case"end":return n.stop()}},n,null,[[4,14]])})),function(n,t){return e.apply(this,arguments)}}},45325:function(n,e,t){t.d(e,{J:function(){return y},S:function(){return b}});var r=t(67856),o=t(69380),a=t(40679),c=t.n(a),u=t(37736),i=t(78356),s=t(5490),l=t(31032),f=t.n(l),p=t(99064),d=t(81476),m=t(96975),b=(0,u.vQ)("histogram"),y=function(n){var e,t=n.histogramColumn,a=n.bin;return e=(0,o.Z)(c().mark(function n(e,o){var l,y,h,v,g,O,w,S,x,E,C,k;return c().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(y=(l=o().histogram||u.E3).data,h=l.loading,v=l.shouldRefresh,!((y||h)&&!v)){n.next=3;break}return n.abrupt("return");case 3:return g=o().settings.histogramBreakdownColumn,e(b.actions.fetchStart()),n.prev=5,O=a.min,w=a.step,S=a.round_to,x=(0,i.kA)(o()),E="\n   WITH filtered AS (\n      SELECT \n        ".concat((0,d.q)(t)," AS value, \n        ").concat((0,d.q)(g)," AS breakdown\n      ").concat(x.from,"\n      ").concat(x.where," AND value IS NOT NULL  \n    )\n    SELECT breakdown, FLOOR((value - ").concat(O,") / ").concat(w,") AS binIdx, \n        COUNT(*) AS cnt\n    FROM filtered\n    GROUP BY 1, 2\n    ORDER BY 1, 2\n "),n.next=11,(0,s.Vn)({dispatch:e,key:"histogram",query:E});case 11:C=n.sent,k=f()(C).groupBy("breakdown").toPairs().map(function(n){var e=(0,r.Z)(n,2),o=e[0],a=e[1],c=(0,p._)({min:O,step:w,round_to:S,cntValues:a}),u=f().map(c,"value"),i=f().map(c,"cnt"),s=f().map(c,function(n){return{condExpr:[].concat(["".concat((0,d.q)(t)," >= ").concat(n.binMin),"".concat((0,d.q)(t)," < ").concat(n.binMax)],(0,m.XE)(g)?[]:["".concat((0,d.q)(g)," = '").concat(o,"'")]).join(" AND ")}});return{name:o,x:u,y:i,customdata:s}}).value(),e(b.actions.fetchSuccess(k)),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(5),console.error(n.t0),e(b.actions.fetchError(n.t0.message));case 20:case"end":return n.stop()}},n,null,[[5,16]])})),function(n,t){return e.apply(this,arguments)}}},92633:function(n,e,t){t.d(e,{V:function(){return u}});var r=t(67856),o=t(98656),a={mode:(0,t(96975).X0)("theme")||"dark",boxPlotBreakdownColumn:null},c=(0,o.oM)({name:"settings",initialState:a,reducers:{updateSettings:function(n,e){Object.entries(e.payload||{}).forEach(function(e){var t=(0,r.Z)(e,2),o=t[0],a=t[1];n[o]=a,"mode"===o&&localStorage.setItem("theme",a)})}}}),u=c.actions.updateSettings;e.Z=c.reducer},33311:function(n,e,t){t.d(e,{M:function(){return u}});var r=t(67856),o=t(98656),a=t(82751),c=(0,o.oM)({name:"sql",initialState:{},reducers:{updateSqlRecord:function(n,e){var t=e.payload,o=t.key,c=t.records;o in n||(n[o]={}),Object.entries(c).forEach(function(e){var t=(0,r.Z)(e,2),c=t[0],u=t[1];if("query"===c){try{n[o].query=(0,a.WU)(u,{language:"duckdb"})+"\n"}catch(e){n[o].query=u+"\n",console.warn(e)}n[o].lastUpdated=Date.now()}else n[o][c]=u})}}}),u=c.actions.updateSqlRecord;e.Z=c.reducer},58055:function(n,e,t){t.d(e,{CE:function(){return y},Ik:function(){return s},O1:function(){return f},Rw:function(){return d},W_:function(){return b},d2:function(){return m},dZ:function(){return p},gU:function(){return h},jY:function(){return l},nn:function(){return u}});var r=t(71921);function o(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function a(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o(Object(t),!0).forEach(function(e){(0,r.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var c=(0,t(98656).oM)({name:"viewing",initialState:{justClickedColumn:null,justClickedRow:null,pagination:{pageSize:10,pageNumber:0},rowDataSource:null,sampleCondition:"True",heatmapColumnSort:{},visibleColumns:[]},reducers:{setJustClickedColumn:function(n,e){n.justClickedColumn=e.payload},setJustClickedRow:function(n,e){n.justClickedRow=e.payload},updatePagination:function(n,e){n.pagination=a(a({},n.pagination),e.payload)},updateCountBaseline:function(n,e){n.pagination.countBaseline=e.payload},updateCountFiltered:function(n,e){n.pagination.countFiltered=e.payload},setRowDataSource:function(n,e){n.rowDataSource=e.payload},setSampleCondition:function(n,e){n.sampleCondition=e.payload},toggleHeatmapColumnSort:function(n,e){var t=e.payload,r=["desc","asc","none"],o=n.heatmapColumnSort,a=o.byRow,c=o.order;a===t?n.heatmapColumnSort={byRow:t,order:r[(r.indexOf(c)+1)%r.length]}:n.heatmapColumnSort={byRow:t,order:r[0]}},setFreeFormQuery:function(n,e){n.freeFormQuery=e.payload},setVisibleColumns:function(n,e){n.visibleColumns=e.payload}}}),u=function(n){var e=n.dispatch,t=n.columnName,r=c.actions.setJustClickedColumn;e(r(t)),setTimeout(function(){e(r(null))},1e3)},i=c.actions,s=i.updatePagination,l=i.setJustClickedRow,f=i.setRowDataSource,p=i.setSampleCondition,d=i.toggleHeatmapColumnSort,m=i.setFreeFormQuery,b=i.updateCountBaseline,y=i.updateCountFiltered,h=i.setVisibleColumns;e.ZP=c.reducer},5490:function(n,e,t){t.d(e,{PD:function(){return S},Vn:function(){return O},Wu:function(){return x},qG:function(){return w}});var r,o,a,c,u,i=t(9807),s=t(71921),l=t(69380),f=t(40679),p=t.n(f),d=t(31032),m=t.n(d),b=t(33311),y=t(38899);function h(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function v(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?h(Object(t),!0).forEach(function(e){(0,s.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var g=(r=(0,l.Z)(p().mark(function n(e){var t,r,o,a,c;return p().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.url,o=void 0===(r=e.data)?{}:r,n.next=3,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 3:if((a=n.sent).ok){n.next=6;break}throw Error("Failed to fetch");case 6:return n.next=8,a.json();case 8:return c=n.sent,n.abrupt("return",c);case 10:case"end":return n.stop()}},n)})),function(n){return r.apply(this,arguments)}),O=(o=(0,l.Z)(p().mark(function n(e){var t,r,o,a,c,u,s;return p().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.dispatch,r=e.key,o=e.query,c=void 0===(a=e.transformResult)?"listOfDicts":a,t((0,b.M)({key:r,records:{query:o,status:"running",data:null,runtime:null}})),n.next=4,g({url:"".concat(y.vU,"/query"),data:{query:o}});case 4:"error"===(u=n.sent).status&&console.error(u.error),t((0,b.M)({key:r,records:{runtime:u.runtime,error:u.error,status:u.status,data:u.rows.map(function(n){return m().zipObject(u.column_names,n)})}})),n.t0=c,n.next="listOfDicts"===n.t0?10:"dictOfLists"===n.t0?12:"none"===n.t0?13:14;break;case 10:return s=u.rows.map(function(n,e){return v(v({},m().zipObject(u.column_names,n)),{},{rowIndex:e})}),n.abrupt("return",s);case 12:return n.abrupt("return",m().zipObject(u.column_names,m().zip.apply(m(),(0,i.Z)(u.rows))));case 13:return n.abrupt("return",m().pick(u,["column_names","rows"]));case 14:throw Error("Invalid way of transforming result: ".concat(c));case 15:case"end":return n.stop()}},n)})),function(n){return o.apply(this,arguments)}),w=(a=(0,l.Z)(p().mark(function n(e){var t,r,o,a;return p().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.dispatch,r=e.dataFile,o=e.sqlKey,a="WITH meta AS (\n    SELECT \n        path_in_schema AS column_name,\n        SUM(num_values) AS cntAll,\n        SUM(stats_null_count) AS cntNull,\n        MIN(stats_min_value) AS min,\n        MAX(stats_max_value) AS max\n    FROM parquet_metadata('".concat(r,"')\n    GROUP BY path_in_schema\n  )\n  SELECT column_name, column_type, cntAll, cntNull, min, max\n  FROM (DESCRIBE SELECT * FROM read_parquet ('").concat(r,"'))\n      LEFT JOIN meta USING (column_name)\n  "),n.next=4,O({dispatch:t,key:o,query:a});case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}},n)})),function(n){return a.apply(this,arguments)}),S=(c=(0,l.Z)(p().mark(function n(e){var t,r,o,a;return p().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.dispatch,r=e.dataFile,o=e.sqlKey,a="SELECT * FROM read_csv ('".concat(r,"') LIMIT 10"),n.next=4,O({dispatch:t,key:o,query:a});case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}},n)})),function(n){return c.apply(this,arguments)}),x=(u=(0,l.Z)(p().mark(function n(e){var t,r,o,a,c,u,i;return p().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.parentPath,o=void 0!==(r=e.showHidden)&&r,c=void 0===(a=e.limit)?100:a,n.next=3,fetch("".concat(y.vU,"/ls?path=").concat(t,"&show_hidden=").concat(o,"&limit=").concat(c));case 3:if((u=n.sent).ok){n.next=6;break}throw Error("Failed to fetch ls");case 6:return n.next=8,u.json();case 8:return i=n.sent,n.abrupt("return",i);case 10:case"end":return n.stop()}},n)})),function(n){return u.apply(this,arguments)})},96975:function(n,e,t){t.d(e,{$x:function(){return i},X0:function(){return u},XE:function(){return a},kX:function(){return c}});var r=t(31032),o=t.n(r),a=function(n){return null==n},c=function(){for(var n=arguments.length,e=Array(n),t=0;t<n;t++)e[t]=arguments[t];if(e.length>0){var r=e.find(function(n){return!a(n)});return a(r)?null:r}throw Error("No arguments provided to coalesce")},u=function(n){return localStorage.getItem(n)},i=function(n,e){return o().isEqual(o().sortBy(n),o().sortBy(e))}},99064:function(n,e,t){t.d(e,{_:function(){return u}});var r=t(71921),o=t(31032),a=t.n(o);function c(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}var u=function(n){var e,t=n.min,u=n.step,i=n.round_to,s=n.cntValues,l=null===(e=a().maxBy(s,"binIdx"))||void 0===e?void 0:e.binIdx,f=a().fromPairs(a().map(s,function(n){return[n.binIdx,n]}));return a().range(l+1).map(function(n){var e=(0,o.round)(n*u+t,i),a=(0,o.round)(e+u,i);return function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?c(Object(t),!0).forEach(function(e){(0,r.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}({binIdx:n,value:"[".concat(e,", ").concat(a,")"),binMin:e,binMax:a},f[n]||{})})}},81476:function(n,e,t){t.d(e,{M:function(){return c},q:function(){return u}});var r=t(96975),o=t(31032),a=t.n(o),c=function n(e){if((0,r.XE)(e))return"NULL";if("string"==typeof e)return"'".concat(e,"'");if("number"==typeof e)return"".concat(e);if("boolean"==typeof e)return e?"TRUE":"FALSE";if(Array.isArray(e))return"("+a()(e).map(n).join(",")+")";throw Error("Unknown value type: ".concat(typeof e))},u=function n(e){if((0,r.XE)(e))return"NULL";if("string"!=typeof e)throw Error("Expecting a string for name, but got ".concat(typeof e,": ").concat(e));if(""===(e=e.trim()))throw Error("Empty name");return/^[a-zA-Z0-9_]+$/.test(e)?e:e.includes(".")?e.split(".").map(n).join("."):'"'.concat(e,'"')}},73139:function(n,e,t){t.d(e,{f:function(){return f}});var r=t(31032),o=t.n(r),a=t(96975),c=t(81476),u=function(n,e){var t=e||{},r=t.contains,o=t.null;if((0,a.XE)(r)||""===r)return s(n,null,o);var u="CAST(".concat((0,c.q)(n)," AS VARCHAR) LIKE '%").concat(r,"%'");return s(n,u,o)},i=function(n,e){var t=e||{},r=t.including,o=t.null;if((0,a.XE)(r)||0===r.length)return s(n,null,o);var u="".concat((0,c.q)(n)," IN ").concat((0,c.M)(r));return s(n,u,o)},s=function(n,e,t){switch(t){case"include":return e?"".concat(e," OR ").concat((0,c.q)(n)," IS NULL"):null;case"exclude":return e?"".concat(e):"".concat((0,c.q)(n)," IS NOT NULL");case"only":return"".concat((0,c.q)(n)," IS NULL");case"N/A":return e;default:throw Error("Unknown null filter: ".concat(t))}},l=function(n,e){var t=e||{},r=t.range,u=t.null;if((0,a.XE)(r))return s(n,null,u);if(!Array.isArray(r)||2!==r.length||r.some(function(n){return!o().isNumber(n)}))throw Error("Invalid range: ".concat(r));var i="".concat((0,c.q)(n)," BETWEEN ").concat(r[0]," AND ").concat(r[1]);return s(n,i,u)},f=function(n,e){var t=e||{},r=t.filterType,o=t.null;if((0,a.XE)(o))throw Error("Null filter is required for ".concat(n));switch(r){case"myText":return u(n,e);case"myEnum":return i(n,e);case"myRange":return l(n,e);default:throw Error("Unknown filter type: ".concat(r))}}},78356:function(n,e,t){t.d(e,{Gg:function(){return u},kA:function(){return s}});var r=t(31032),o=t.n(r),a=t(73139),c=t(81476),u=function(n){return o().map(n,function(n,e){try{if(null===n)return null;return(0,a.f)(e,n)}catch(n){return console.error("Error parsing filter for column ".concat(e,":"),n),null}}).filter(Boolean).map(function(n){return"(".concat(n,")")}).join(" AND ")},i=function(n){var e=n.filters,t=n.baselineFilters;return[u(e),u(t)].filter(Boolean).join(" AND ")||"True"},s=function(n){var e=n.dataFile.tableExpr,t=n.agColDefs,r=t.filters,o=t.baselineFilters,a=n.viewing.pagination,u=a.pageSize,s=a.pageNumber,l=n.agColDefs.sorting,f=0===l.length?"":"ORDER BY ".concat(l.map(function(n){return"".concat((0,c.q)(n.field)," ").concat(n.order.toUpperCase())}).join(", "));return{from:"FROM ".concat(e),where:"WHERE ".concat(i({filters:r,baselineFilters:o})),order:f,pagination:"LIMIT ".concat(u," OFFSET ").concat(s*u)}}},38899:function(n,e,t){t.d(e,{k9:function(){return o},vU:function(){return r}});var r="./api",o=function(n){return["http","https",""].includes(n&&n.includes("://")?n.split("://")[0].toLowerCase():"")?n:"".concat(r,"/s3-proxy?url=").concat(encodeURIComponent(n))}}}]);