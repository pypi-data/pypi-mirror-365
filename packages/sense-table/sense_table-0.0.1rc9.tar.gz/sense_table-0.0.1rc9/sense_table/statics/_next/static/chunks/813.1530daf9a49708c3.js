"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[813],{43813:function(t,e,r){r.r(e);var o=r(71921),n=r(56801),a=r(2617),c=r.n(a),i=r(32699),l=r(98672),s=r(31032),u=r.n(s),p=r(36444),d=r(58055),b=r(28289),f=r(63401);function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach(function(e){(0,o.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var h=c()(function(){return r.e(880).then(r.bind(r,33880))},{loadableGenerated:{webpack:()=>[33880]},ssr:!1,loadableGenerated:{webpack:function(){return[33880]}}}),g=n.memo(function(t){var e=t.data,r=(0,l.I0)(),o=(0,i.Z)(),a=(0,n.useState)(!1),c=a[0],s=a[1],m=(0,n.useState)(null),g=m[0],x=m[1],v=(0,l.v9)(function(t){return t.settings.bubblePlotXColumn}),k=(0,l.v9)(function(t){return t.settings.bubblePlotYColumn}),w=(0,l.v9)(function(t){return t.settings.bubblePlotMaxMarkerSize}),j=(0,l.v9)(function(t){return t.settings.bubblePlotOpacity}),O=(0,b.U)({xTitle:"X: ".concat(v),yTitle:"Y: ".concat(k)});(0,n.useEffect)(function(){s(!0)},[]);var P=(0,n.useMemo)(function(){if(!e||!Array.isArray(e))return[];try{return e.map(function(t,e){return{x:t.x,y:t.y,name:t.name,mode:"markers",type:"scatter",marker:{size:t.customdata.map(function(t){return Math.min(Math.sqrt(t.count),w)}),opacity:j,line:{color:o.palette.text.primary,width:1}},customdata:t.customdata,hovertemplate:"<b>X ".concat(v,":</b> %{x}<br>")+"<b>Y ".concat(k,":</b> %{y}<br>")+"<b>Count:</b> %{customdata.count}<br><extra></extra>"}})}catch(t){return console.error("Error preparing plot data:",t),x(t.message),[]}},[e,o,v,k,j,w]),C=(0,n.useMemo)(function(){return y(y({},O),{},{selectdirection:"any"})},[O]),E=(0,n.useMemo)(function(){return{responsive:!0,displayModeBar:!0,scrollZoom:!0,modeBarButtonsToRemove:["autoScale2d","resetScale2d","zoomIn2d","zoomOut2d","toImage","select2d","zoom2d"],displaylogo:!1}},[]),S=(0,n.useCallback)(function(t){try{if(t.points&&t.points.length>0){var e=t.points[0].customdata.condExpr;r((0,d.dZ)(e)),r((0,p.h)({source:"Samples from bubble plot"}))}}catch(t){console.error("Error handling click:",t)}},[r]),z=(0,n.useCallback)(function(t){try{if(t&&t.points&&t.points.length>0){var e=u()(t.points).map(function(t){return"(".concat(t.customdata.condExpr,")")}).join(" OR ");e&&(r((0,d.dZ)(e)),r((0,p.h)({source:"Samples from bubble plot"})))}}catch(t){console.error("Error handling selection:",t)}},[r]);return c?g?(0,f.jsxs)("div",{style:{width:"100%",height:"400px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:o.palette.background.paper,color:o.palette.error.main,flexDirection:"column",gap:"10px"},children:[(0,f.jsx)("div",{children:"Error loading chart"}),(0,f.jsx)("div",{style:{fontSize:"12px",opacity:.7},children:g})]}):(0,f.jsx)("div",{style:{width:"100%",height:"100%",minHeight:"400px"},children:(0,f.jsx)(h,{data:P,layout:C,config:E,style:{width:"100%",height:"100%"},useResizeHandler:!0,onClick:S,onSelected:z,onError:function(t){console.error("Plotly error:",t),x(t.message||"Unknown plotting error")}})}):(0,f.jsx)("div",{style:{width:"100%",height:"400px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:o.palette.background.paper,color:o.palette.text.secondary},children:"Loading chart..."})});e.default=g},28289:function(t,e,r){r.d(e,{U:function(){return n}});var o=r(32699),n=function(t){var e=t.xTitle,r=t.yTitle,n=(0,o.Z)();return{title:{text:"",font:{color:n.palette.text.primary}},xaxis:{title:{text:void 0===e?"":e,font:{color:n.palette.text.primary,size:n.typography.fontSize+2}},showticklabels:!1,showline:!1,showgrid:!1,tickfont:{color:n.palette.text.secondary}},yaxis:{title:{text:void 0===r?"":r,font:{color:n.palette.text.primary}},showticklabels:!0,showline:!1,showgrid:!1,tickfont:{color:n.palette.text.secondary}},paper_bgcolor:n.palette.background.paper,plot_bgcolor:n.palette.background.card,font:{color:n.palette.text.primary},margin:{l:60,r:30,t:30,b:60},dragmode:"pan",legend:{orientation:"h",x:0,y:1.02,font:{color:n.palette.text.primary}}}}}}]);