# Star## Staran âœ¨ v0.6.1 æ–°ç‰¹æ€§

- ï¿½ **å®Œå–„çš„åŒ…ç®¡ç†** - ä¼˜åŒ–setup.pyé…ç½®ï¼Œç§»é™¤ä¸å¿…è¦çš„æ ‡å‡†åº“ä¾èµ–
- ï¿½ğŸ“‹ **ç‹¬ç«‹Schemaæ¨¡å—** - ä¸“é—¨çš„è¡¨ç»“æ„å®šä¹‰å’Œç®¡ç†æ¨¡å—
- ğŸ“„ **æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ** - æ”¯æŒMarkdown/PDF/HTMLæ ¼å¼çš„æŠ€æœ¯æ–‡æ¡£ç”Ÿæˆ
- ğŸ¢ **ä¸šåŠ¡åŸŸæ”¯æŒ** - AUMç­‰ä¸šåŠ¡é¢†åŸŸçš„æ ‡å‡†è¡¨ç»“æ„å®šä¹‰
- ğŸ”— **æ— ç¼é›†æˆ** - Schemaä¸ç‰¹å¾å·¥ç¨‹æ¨¡å—å®Œç¾é›†æˆ
- ğŸ› ï¸ **æ¨¡å—åŒ–å¼•æ“æ¶æ„** - ç‹¬ç«‹çš„å¼•æ“æ¨¡å—ï¼Œæ”¯æŒSparkã€Hiveã€å›¾çµå¹³å°
- ğŸ”§ **ç»Ÿä¸€æ¥å£è®¾è®¡** - æ‰€æœ‰å¼•æ“æä¾›ä¸€è‡´çš„SQLç”Ÿæˆã€æ‰§è¡Œå’Œä¸‹è½½æ¥å£
- ğŸ¯ **ç»§æ‰¿å¤ç”¨æ¶æ„** - TuringEngineç»§æ‰¿SparkEngineï¼Œå¤ç”¨SQLç”Ÿæˆé€»è¾‘
- ğŸ“¦ **æ¸…æ™°ä»£ç åˆ†ç¦»** - SQLç”Ÿæˆä¸å¹³å°ç‰¹å®šæ‰§è¡Œé€»è¾‘å®Œå…¨åˆ†ç¦»
- ğŸš€ **æ˜“äºæ‰©å±•** - æ–°å¢æ•°æ®åº“æ”¯æŒåªéœ€å®ç°BaseEngineæ¥å£
- ğŸ“ **ç‹¬ç«‹å¼•æ“å­˜å‚¨** - engines/æ–‡ä»¶å¤¹ä¸“é—¨å­˜æ”¾æ‰€æœ‰æ•°æ®åº“å¼•æ“
- ğŸ”„ **å‘åå…¼å®¹** - ä¿æŒå¯¹åŸæœ‰APIçš„å®Œå…¨å…¼å®¹

## ğŸ¯ ä¸“ä¸ºæœºå™¨å­¦ä¹ è®¾è®¡çš„Pythonå·¥å…·åŒ…

Staranæ˜¯ä¸€ä¸ªå¼ºå¤§çš„ç‰¹å¾å·¥ç¨‹å’Œæ•°æ®å¤„ç†å·¥å…·åŒ…ï¼Œæä¾›ä»æ•°æ®åˆ°æ¨¡å‹çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚ç‰¹åˆ«é’ˆå¯¹å·¥é“¶å›¾çµå¹³å°ä¼˜åŒ–ï¼Œè®©ç‰¹å¾å·¥ç¨‹å’Œæ¨¡å‹è®­ç»ƒå˜å¾—å‰æ‰€æœªæœ‰çš„ç®€å•ã€‚

## âœ¨ v0.6.1 æ–°ç‰¹æ€§

- ğŸ”§ **å®Œå–„çš„åŒ…ç®¡ç†** - ä¼˜åŒ–setup.pyé…ç½®ï¼Œç§»é™¤ä¸å¿…è¦çš„æ ‡å‡†åº“ä¾èµ–
- ğŸ› ï¸ **æ¨¡å—åŒ–å¼•æ“æ¶æ„** - ç‹¬ç«‹çš„å¼•æ“æ¨¡å—ï¼Œæ”¯æŒSparkã€Hiveã€å›¾çµå¹³å°
- ğŸ”§ **ç»Ÿä¸€æ¥å£è®¾è®¡** - æ‰€æœ‰å¼•æ“æä¾›ä¸€è‡´çš„SQLç”Ÿæˆã€æ‰§è¡Œå’Œä¸‹è½½æ¥å£
- ğŸ¯ **ç»§æ‰¿å¤ç”¨æ¶æ„** - TuringEngineç»§æ‰¿SparkEngineï¼Œå¤ç”¨SQLç”Ÿæˆé€»è¾‘
- ğŸ“¦ **æ¸…æ™°ä»£ç åˆ†ç¦»** - SQLç”Ÿæˆä¸å¹³å°ç‰¹å®šæ‰§è¡Œé€»è¾‘å®Œå…¨åˆ†ç¦»
- ğŸš€ **æ˜“äºæ‰©å±•** - æ–°å¢æ•°æ®åº“æ”¯æŒåªéœ€å®ç°BaseEngineæ¥å£
- ğŸ“ **ç‹¬ç«‹å¼•æ“å­˜å‚¨** - engines/æ–‡ä»¶å¤¹ä¸“é—¨å­˜æ”¾æ‰€æœ‰æ•°æ®åº“å¼•æ“
- ğŸ”„ **å‘åå…¼å®¹** - ä¿æŒå¯¹åŸæœ‰APIçš„å®Œå…¨å…¼å®¹

## ï¿½ ä¸“ä¸ºæœºå™¨å­¦ä¹ è®¾è®¡çš„Pythonå·¥å…·åŒ…

Staranæ˜¯ä¸€ä¸ªå¼ºå¤§çš„ç‰¹å¾å·¥ç¨‹å’Œæ•°æ®å¤„ç†å·¥å…·åŒ…ï¼Œæä¾›ä»æ•°æ®åˆ°æ¨¡å‹çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚ç‰¹åˆ«é’ˆå¯¹å·¥é“¶å›¾çµå¹³å°ä¼˜åŒ–ï¼Œè®©ç‰¹å¾å·¥ç¨‹å’Œæ¨¡å‹è®­ç»ƒå˜å¾—å‰æ‰€æœªæœ‰çš„ç®€å•ã€‚

## âœ¨ v0.6.0 æ–°ç‰¹æ€§

- ï¿½ï¸ **æ¨¡å—åŒ–å¼•æ“æ¶æ„** - ç‹¬ç«‹çš„å¼•æ“æ¨¡å—ï¼Œæ”¯æŒSparkã€Hiveã€å›¾çµå¹³å°
- ğŸ”§ **ç»Ÿä¸€æ¥å£è®¾è®¡** - æ‰€æœ‰å¼•æ“æä¾›ä¸€è‡´çš„SQLç”Ÿæˆã€æ‰§è¡Œå’Œä¸‹è½½æ¥å£
- ğŸ¯ **ç»§æ‰¿å¤ç”¨æ¶æ„** - TuringEngineç»§æ‰¿SparkEngineï¼Œå¤ç”¨SQLç”Ÿæˆé€»è¾‘
- ğŸ“¦ **æ¸…æ™°ä»£ç åˆ†ç¦»** - SQLç”Ÿæˆä¸å¹³å°ç‰¹å®šæ‰§è¡Œé€»è¾‘å®Œå…¨åˆ†ç¦»
- ï¿½ **æ˜“äºæ‰©å±•** - æ–°å¢æ•°æ®åº“æ”¯æŒåªéœ€å®ç°BaseEngineæ¥å£
- ï¿½ **ç‹¬ç«‹å¼•æ“å­˜å‚¨** - engines/æ–‡ä»¶å¤¹ä¸“é—¨å­˜æ”¾æ‰€æœ‰æ•°æ®åº“å¼•æ“
- ğŸ”„ **å‘åå…¼å®¹** - ä¿æŒå¯¹åŸæœ‰APIçš„å®Œå…¨å…¼å®¹

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…
```bash
pip install staran
# æˆ–åœ¨å›¾çµå¹³å°ä¸­ç›´æ¥ä½¿ç”¨
```

### åŸºç¡€ç”¨æ³• - æ—¥æœŸå¤„ç†

```python
from staran import Date

# åˆ›å»ºæ—¥æœŸ - æ™ºèƒ½æ ¼å¼è®°å¿†
date1 = Date('202504')      # è¾“å‡º: 202504 (è®°ä½å¹´æœˆæ ¼å¼)
date2 = Date('20250415')    # è¾“å‡º: 20250415 (è®°ä½å®Œæ•´æ ¼å¼)
date3 = Date(2025, 4, 15)   # è¾“å‡º: 2025-04-15

# æ—¥æœŸè¿ç®—ä¿æŒæ ¼å¼
new_date = date1.add_months(2)  # è¾“å‡º: 202506 (ä¿æŒYYYYMMæ ¼å¼)
```

### å¼•æ“æ¶æ„ - å¤šå¹³å°æ”¯æŒ

```python
from staran.engines import create_engine, create_turing_engine

# 1. ä½¿ç”¨Sparkå¼•æ“
spark_engine = create_engine('spark', 'analytics_db')

# 2. ä½¿ç”¨Hiveå¼•æ“  
hive_engine = create_engine('hive', 'warehouse_db')

# 3. ä½¿ç”¨å›¾çµå¹³å°å¼•æ“ (ç»§æ‰¿Spark + turingPythonLib)
turing_engine = create_turing_engine('analytics_db')

# ç»Ÿä¸€æ¥å£ - æ‰€æœ‰å¼•æ“éƒ½æ”¯æŒç›¸åŒæ–¹æ³•
sql = spark_engine.generate_aggregation_sql(schema, 2025, 7, ['sum', 'avg'])
result = turing_engine.create_table('my_table', sql, execute=True)
download = turing_engine.download_table_data('my_table', 'file:///nfsHome/data.parquet')
```

### Schemaæ¨¡å— - è¡¨ç»“æ„ç®¡ç†ä¸æ–‡æ¡£ç”Ÿæˆ

```python
from staran import get_aum_schemas, export_aum_docs, SchemaDocumentGenerator

# 1. è·å–é¢„å®šä¹‰ä¸šåŠ¡è¡¨ç»“æ„
schemas = get_aum_schemas()  # è·å–AUMä¸šåŠ¡åŸŸçš„æ‰€æœ‰è¡¨ç»“æ„

for table_type, schema in schemas.items():
    print(f"{table_type}: {schema.table_name} ({len(schema.fields)}ä¸ªå­—æ®µ)")

# 2. ç”Ÿæˆä¸šåŠ¡æ–‡æ¡£
docs = export_aum_docs('./docs', 'markdown')  # ç”ŸæˆMarkdownæ ¼å¼æ–‡æ¡£

# 3. è‡ªå®šä¹‰æ–‡æ¡£ç”Ÿæˆ
generator = SchemaDocumentGenerator()
doc_path = generator.export_schema_doc(
    schema=schemas['behavior'],
    business_domain="AUM",
    table_type="behavior",
    format_type="markdown"
)

# 4. ä¸ç‰¹å¾å·¥ç¨‹é›†æˆ
from staran import create_aum_example, run_aum_example

# åŸºäºé¢„å®šä¹‰schemaåˆ›å»ºç‰¹å¾å·¥ç¨‹ç¤ºä¾‹
example = create_aum_example()
summary = example.get_summary()  # è·å–ç‰¹å¾ç»Ÿè®¡ä¿¡æ¯

# ä¸€é”®è¿è¡Œå®Œæ•´æµç¨‹
results = run_aum_example('202507')  # ç”Ÿæˆ916ä¸ªç‰¹å¾
```

### ç‰¹å¾å·¥ç¨‹ - SQLè‡ªåŠ¨ç”Ÿæˆ

```python
from staran import TableSchema, FeatureGenerator, FeatureManager

# 1. å®šä¹‰è¡¨ç»“æ„
schema = TableSchema('user_behavior')
schema.add_primary_key('user_id', 'string')
schema.add_date_field('date', 'date')
schema.add_field('amount', 'decimal', aggregatable=True)
schema.add_field('category', 'string')
schema.set_monthly_unique(True)

# 2. åˆ›å»ºç‰¹å¾ç®¡ç†å™¨ (åŸºäºå¼•æ“æ¶æ„)
manager = FeatureManager('analytics_db', engine_type='spark')

# 3. ç”Ÿæˆç‰¹å¾SQL
generator = FeatureGenerator(schema, manager)
result = generator.generate_feature_by_type('aggregation', 2025, 7)
print(result['sql'])  # è‡ªåŠ¨ç”Ÿæˆçš„èšåˆç‰¹å¾SQL
```

### ğŸ¦ å›¾çµå¹³å°é›†æˆ - ä¸€é”®MLæµç¨‹

```python
from staran.engines import create_turing_engine

# 1. åˆ›å»ºå›¾çµå¼•æ“
turing = create_turing_engine("ml_analytics")

# 2. åˆ›å»ºç‰¹å¾è¡¨
create_result = turing.create_table(
    table_name="user_features_2025_07_raw",
    select_sql="SELECT user_id, sum(amount) as total_amount FROM user_behavior GROUP BY user_id",
    execute=True,
    mode="cluster"
)

# 3. ä¸‹è½½ç‰¹å¾æ•°æ®
download_result = turing.download_table_data(
    table_name="user_features_2025_07_raw",
    output_path="file:///nfsHome/ml_features/user_features.parquet",
    mode="cluster"
)

# 4. æ‰¹é‡ä¸‹è½½æŸ¥è¯¢ç»“æœ
query_result = turing.download_query_result(
    sql="SELECT user_id, label FROM ml.training_labels WHERE dt='2025-07-28'",
    output_path="file:///nfsHome/ml_labels/labels.parquet"
)

print(f"ç‰¹å¾è¡¨åˆ›å»º: {create_result['status']}")
print(f"æ•°æ®ä¸‹è½½: {download_result['status']}")
```

## ğŸ“– æ ¸å¿ƒåŠŸèƒ½

### ï¿½ï¸ å¼•æ“æ¶æ„è®¾è®¡

**æ¨¡å—åŒ–å¼•æ“æ¶æ„ï¼Œæ¸…æ™°åˆ†ç¦»å…³æ³¨ç‚¹ï¼š**

```
BaseEngine (æŠ½è±¡åŸºç±»)
â”œâ”€â”€ SparkEngine (Spark SQLå®ç°)
â”‚   â””â”€â”€ TuringEngine (ç»§æ‰¿Spark + turingPythonLib)
â””â”€â”€ HiveEngine (Hive SQLå®ç°)
```

| å¼•æ“ç±»å‹ | SQLç”Ÿæˆ | æ‰§è¡Œæ–¹å¼ | ä¸‹è½½æ–¹å¼ | é€‚ç”¨åœºæ™¯ |
|---------|---------|---------|---------|---------|
| SparkEngine | Spark SQL | æœ¬åœ°æ‰§è¡Œå™¨ | DataFrameä¿å­˜ | æœ¬åœ°å¼€å‘ã€æµ‹è¯• |
| HiveEngine | Hive SQL | æœ¬åœ°æ‰§è¡Œå™¨ | ç›®å½•å¯¼å‡º | ä¼ ç»ŸHiveç¯å¢ƒ |
| TuringEngine | Spark SQL | turingPythonLib | tp.download() | å·¥é“¶å›¾çµå¹³å° |

| åŠŸèƒ½å¯¹æ¯” | åŸç”ŸturingPythonLib | Starané›†æˆ |
|---------|-------------------|------------|
| å‚æ•°ç®¡ç† | æ‰‹åŠ¨æ„å»ºå®Œæ•´å‚æ•°å­—å…¸ | ç®€åŒ–APIï¼Œæ™ºèƒ½é»˜è®¤å€¼ |
| ç‰¹å¾å·¥ç¨‹ | æ‰‹å†™SQLï¼Œæ‰‹åŠ¨ç®¡ç†è¡¨å | è‡ªåŠ¨ç”ŸæˆSQLï¼Œæ™ºèƒ½è¡¨åç®¡ç† |
| æ‰¹é‡æ“ä½œ | å¾ªç¯è°ƒç”¨ï¼Œæ‰‹åŠ¨é”™è¯¯å¤„ç† | ä¸€é”®æ‰¹é‡ï¼Œå®Œæ•´é”™è¯¯å¤„ç† |
| ä»£ç é‡ | 100+ è¡Œæ ·æ¿ä»£ç  | 5-10è¡Œæ ¸å¿ƒä»£ç  |

```python
# ğŸš€ å®Œæ•´MLå·¥ä½œæµç¤ºä¾‹
from staran.sql.turing_integration import create_turing_integration

turing = create_turing_integration("production_analytics")

# æ­¥éª¤1: è¯»å–åŸå§‹æ•°æ®
raw_data = turing.read_hive_table(
    table_name="dwh.user_behavior_detail",
    condition='pt_dt="2025-07-28" limit 500000',
    local_path="/nfsHome/raw_data.csv"
)

# æ­¥éª¤2: ä¸€é”®ç‰¹å¾å·¥ç¨‹
pipeline_result = turing.create_and_download_features(
    feature_sqls=auto_generated_feature_sqls,
    base_table="ml_user_features", 
    output_dir="file:///nfsHome/features/",
    mode="cluster"
)

# æ­¥éª¤3: æ‰¹é‡ä¸‹è½½è®­ç»ƒæ•°æ®
batch_result = turing.feature_manager.batch_download_features(
    base_table="ml_user_features",
    year=2025, month=7,
    output_dir="file:///nfsHome/training_data/",
    mode="cluster"
)

# ç°åœ¨å¯ä»¥ç›´æ¥ç”¨äºæ¨¡å‹è®­ç»ƒï¼
```

### ğŸ”§ æ™ºèƒ½ç‰¹å¾å·¥ç¨‹ - è‡ªåŠ¨SQLç”Ÿæˆ

**æ”¯æŒ4ç§ç‰¹å¾ç±»å‹çš„è‡ªåŠ¨åŒ–ç”Ÿæˆï¼š**

1. **åŸå§‹ç‰¹å¾æ‹·è´** (Raw Copy) - éèšåˆå­—æ®µæ™ºèƒ½æ‹·è´
2. **èšåˆç»Ÿè®¡ç‰¹å¾** (Aggregation) - sum/avg/count/min/maxç­‰
3. **ç¯æ¯”ç‰¹å¾** (MoM) - æœˆåº¦å·®åˆ†å¯¹æ¯”åˆ†æ  
4. **åŒæ¯”ç‰¹å¾** (YoY) - å¹´åº¦å·®åˆ†å¯¹æ¯”åˆ†æ

```python
from staran import TableSchema, FeatureGenerator, FeatureConfig

# å®šä¹‰è¡¨ç»“æ„
schema = TableSchema('user_monthly_behavior')
schema.add_primary_key('user_id', 'string')
schema.add_date_field('month_date', 'date')
schema.add_field('purchase_amount', 'decimal', aggregatable=True)
schema.add_field('order_count', 'int', aggregatable=True)
schema.add_field('user_level', 'string')

# é…ç½®ç‰¹å¾ç”Ÿæˆç­–ç•¥
config = FeatureConfig()
config.enable_feature('aggregation')  # å¯ç”¨èšåˆç‰¹å¾
config.enable_feature('mom')         # å¯ç”¨ç¯æ¯”ç‰¹å¾
config.aggregation_types = ['sum', 'avg', 'count']
config.mom_periods = [1, 3]         # 1æœˆå’Œ3æœˆç¯æ¯”

# ç”Ÿæˆç‰¹å¾
generator = FeatureGenerator(schema)
generator.config = config

# æŸ¥çœ‹ç‰¹å¾æ‘˜è¦
summary = generator.get_feature_summary()
print(f"å°†ç”Ÿæˆ {summary['total']} ä¸ªç‰¹å¾")

# ç”Ÿæˆç‰¹å®šç±»å‹çš„SQL
agg_result = generator.generate_feature_by_type('aggregation', 2025, 7)
print("èšåˆç‰¹å¾SQL:", agg_result['sql'])
```

### ğŸ“¥ æ™ºèƒ½æ•°æ®ä¸‹è½½ - å…¼å®¹turingPythonLib

**3ç§ä¸‹è½½æ–¹å¼ï¼Œæ»¡è¶³ä¸åŒéœ€æ±‚ï¼š**

```python
from staran import SQLManager, FeatureTableManager

manager = SQLManager("analytics_db")

# 1. åŸºç¡€æ•°æ®ä¸‹è½½
result = manager.download_data(
    sql="SELECT * FROM user_behavior WHERE year=2025 AND month=7",
    output_path="file:///nfsHome/data/user_behavior_202507/",
    mode="cluster",
    spark_resource={
        'num_executors': '8',
        'driver_memory': '8G',
        'executor_memory': '8G'
    }
)

# 2. å•ä¸ªç‰¹å¾è¡¨ä¸‹è½½
feature_manager = FeatureTableManager(manager)
single_result = feature_manager.download_feature_table(
    table_name="analytics_db.user_features_2025_07_f001",
    output_path="file:///nfsHome/features/agg_features/",
    condition="WHERE purchase_amount > 1000"
)

# 3. æ‰¹é‡ç‰¹å¾è¡¨ä¸‹è½½
batch_result = feature_manager.batch_download_features(
    base_table="user_features",
    year=2025, month=7,
    output_dir="file:///nfsHome/batch_features/",
    feature_nums=[1, 2, 3]  # æŒ‡å®šä¸‹è½½çš„ç‰¹å¾ç¼–å·
)
```

### ğŸ—“ï¸ Dateå·¥å…· - æ™ºèƒ½æ ¼å¼è®°å¿†

**Dateç±»ä¼šæ ¹æ®è¾“å…¥æ ¼å¼è‡ªåŠ¨è®¾ç½®é»˜è®¤è¾“å‡ºæ ¼å¼ï¼š**

| è¾“å…¥æ–¹å¼ | é»˜è®¤è¾“å‡º | è¯´æ˜ |
|---------|---------|------|
| `Date('202504')` | `202504` | å¹´æœˆç´§å‡‘æ ¼å¼ |
| `Date('20250415')` | `20250415` | å®Œæ•´ç´§å‡‘æ ¼å¼ |
| `Date(2025, 4)` | `2025-04` | å¹´æœˆæ ¼å¼ |
| `Date(2025, 4, 15)` | `2025-04-15` | å®Œæ•´æ ¼å¼ |

```python
date = Date('202504')

# é»˜è®¤æ ¼å¼ï¼ˆä¿æŒè¾“å…¥é£æ ¼ï¼‰
print(date)                         # 202504

# å¤šç§è¾“å‡ºæ ¼å¼
print(date.format_full())          # 2025-04-01
print(date.format_chinese())       # 2025å¹´04æœˆ01æ—¥
print(date.format_year_month())    # 2025-04
print(date.format_compact())       # 20250401

# æ—¥æœŸè¿ç®—ä¿æŒæ ¼å¼
next_month = date.add_months(1)     # 202505
tomorrow = date.add_days(1)         # 202504 (æ™ºèƒ½å¤„ç†)
```

## ğŸ¯ è®¾è®¡ç‰¹è‰²

- **ğŸ¦ å›¾çµå¹³å°ä¸“ç”¨** - æ·±åº¦é›†æˆturingPythonLibï¼Œç®€åŒ–95%ä»£ç 
- **ğŸš€ ç«¯åˆ°ç«¯è‡ªåŠ¨åŒ–** - ä»ç‰¹å¾å·¥ç¨‹åˆ°æ¨¡å‹è®­ç»ƒæ•°æ®çš„å®Œæ•´æµç¨‹
- **ğŸ“Š æ™ºèƒ½ç‰¹å¾å·¥ç¨‹** - è‡ªåŠ¨ç”Ÿæˆ4ç±»ç‰¹å¾SQLï¼Œæ— éœ€æ‰‹å†™å¤æ‚æŸ¥è¯¢
- **ğŸ“¥ æ™ºèƒ½æ•°æ®ä¸‹è½½** - å…¼å®¹turingPythonLibæ ¼å¼ï¼Œæ”¯æŒæ‰¹é‡æ“ä½œ
- **ğŸ”„ æ™ºèƒ½è¡¨ç®¡ç†** - è‡ªåŠ¨ç”Ÿæˆè§„èŒƒè¡¨åï¼Œç‰ˆæœ¬æ§åˆ¶å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†
- **âš¡ ç®€åŒ–APIè®¾è®¡** - ç›´è§‚æ˜“ç”¨ï¼Œç¬¦åˆPythonä¹ æƒ¯
- **ğŸ›¡ï¸ å®Œæ•´é”™è¯¯å¤„ç†** - æ™ºèƒ½é‡è¯•ã€è¯¦ç»†æ—¥å¿—å’Œæ“ä½œæŠ¥å‘Š

## ğŸ“ é¡¹ç›®ç»“æ„

```
staran/
â”œâ”€â”€ __init__.py                    # ä¸»åŒ…å…¥å£ï¼Œv0.6.0åŠŸèƒ½å¯¼å‡º
â”œâ”€â”€ schemas/                       # ğŸ†• è¡¨ç»“æ„å®šä¹‰ä¸æ–‡æ¡£ç”Ÿæˆæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py               # Schemaæ¨¡å—å…¥å£
â”‚   â”œâ”€â”€ document_generator.py     # æ–‡æ¡£ç”Ÿæˆå™¨ (MD/PDF/HTML)
â”‚   â””â”€â”€ aum/                      # AUMä¸šåŠ¡åŸŸè¡¨ç»“æ„
â”‚       â””â”€â”€ __init__.py           # AUMè¡¨ç»“æ„å®šä¹‰
â”œâ”€â”€ engines/                       # ğŸ†• æ¨¡å—åŒ–å¼•æ“æ¶æ„
â”‚   â”œâ”€â”€ __init__.py               # å¼•æ“æ¨¡å—å…¥å£
â”‚   â”œâ”€â”€ base.py                   # BaseEngineæŠ½è±¡åŸºç±»
â”‚   â”œâ”€â”€ spark.py                  # SparkEngineå®ç°
â”‚   â”œâ”€â”€ hive.py                   # HiveEngineå®ç°
â”‚   â””â”€â”€ turing.py                 # TuringEngine (ç»§æ‰¿SparkEngine)
â”œâ”€â”€ features/                      # ğŸ†• ç‰¹å¾å·¥ç¨‹æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py               # ç‰¹å¾æ¨¡å—å…¥å£
â”‚   â”œâ”€â”€ manager.py                # FeatureManager (ä½¿ç”¨å¼•æ“æ¶æ„)
â”‚   â”œâ”€â”€ schema.py                 # è¡¨ç»“æ„å®šä¹‰
â”‚   â””â”€â”€ generator.py              # ç‰¹å¾ç”Ÿæˆå™¨
â”œâ”€â”€ examples/                      # ğŸ†• å®Œæ•´ç¤ºä¾‹æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py               # ç¤ºä¾‹æ¨¡å—å…¥å£
â”‚   â””â”€â”€ aum_longtail.py           # AUMä»£å‘é•¿å°¾æ¨¡å‹ç¤ºä¾‹
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ __init__.py               # å·¥å…·æ¨¡å—
â”‚   â””â”€â”€ date.py                   # Dateç±»å®ç°
â”œâ”€â”€ setup.py                      # å®‰è£…é…ç½®  
â”œâ”€â”€ README.md                     # æœ¬æ–‡æ¡£ v0.6.0
â””â”€â”€ quick-upload.sh               # å¿«é€Ÿéƒ¨ç½²è„šæœ¬
```

## ğŸ§ª å¿«é€Ÿæµ‹è¯•

### å¼•æ“æ¶æ„æµ‹è¯•
```python
from staran import create_engine, create_turing_engine

# æµ‹è¯•SparkEngine
spark = create_engine('spark')
print(f"Sparkå¼•æ“: {spark.__class__.__name__}")

# æµ‹è¯•TuringEngineç»§æ‰¿
turing = create_turing_engine("test_analytics")
print(f"Turingå¼•æ“çˆ¶ç±»: {turing.__class__.__bases__[0].__name__}")
print(f"æ˜¯å¦ä¸ºSparkEngineå­ç±»: {isinstance(turing, spark.__class__)}")

# æµ‹è¯•å¼•æ“åŠŸèƒ½
sql = turing.generate_sql("SELECT user_id, amount FROM users", {"table": "test"})
print(f"SQLç”Ÿæˆæµ‹è¯•: {'success' if sql else 'failed'}")
```

### AUMç¤ºä¾‹æµ‹è¯•  
```python
from staran import create_aum_example

# åˆ›å»ºç¤ºä¾‹å¹¶æŸ¥çœ‹æ‘˜è¦
example = create_aum_example("dwegdata03000")
example.print_summary()

# å¿«é€Ÿè¿è¡Œï¼ˆæµ‹è¯•æ¨¡å¼ï¼Œä¸æ‰§è¡Œå®é™…SQLï¼‰
print("ğŸ¯ AUMé•¿å°¾æ¨¡å‹ç¤ºä¾‹å·²å‡†å¤‡å°±ç»ª")
print("ğŸ“Š åŒ…å«4å¼ ä¸šåŠ¡è¡¨çš„å®Œæ•´ç‰¹å¾å·¥ç¨‹æµç¨‹")
```

### ä¸€é”®è¿è¡Œç¤ºä¾‹
```python
from staran import run_aum_example

# æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼
results = run_aum_example("202507")  # æŒ‡å®šç‰¹å¾æœˆä»½
print(f"âœ… å¤„ç†å®Œæˆ: {len(results)} ä¸ªè¡¨")
```

### Dateå·¥å…·æµ‹è¯•
```python
from staran import Date

# æµ‹è¯•æ ¼å¼è®°å¿†
date = Date('202504')
print(f"åŸå§‹: {date}")                    # 202504
print(f"åŠ 2æœˆ: {date.add_months(2)}")     # 202506

# æµ‹è¯•å¤šæ ¼å¼è¾“å‡º
print(f"ä¸­æ–‡: {date.format_chinese()}")   # 2025å¹´04æœˆ01æ—¥
print(f"å®Œæ•´: {date.format_full()}")      # 2025-04-01
```

## ğŸš€ åœ¨å›¾çµNoteBookä¸­å¼€å§‹ä½¿ç”¨

### 1. ç¯å¢ƒå‡†å¤‡
```python
# åœ¨å›¾çµNoteBookä¸­æ‰§è¡Œ
import sys
sys.path.append("/nfsHome/staran")  # å‡è®¾å·²ä¸Šä¼ staranåŒ…

# æ£€æŸ¥æ–°å¼•æ“æ¶æ„
from staran import create_turing_engine
turing = create_turing_engine("your_analytics_db")
print(f"âœ… å¼•æ“ç±»å‹: {turing.__class__.__name__}")
print(f"âœ… ç»§æ‰¿å…³ç³»: ç»§æ‰¿è‡ª{turing.__class__.__bases__[0].__name__}")
print("ğŸš€ ç¯å¢ƒå°±ç»ªï¼å¼€å§‹ç‰¹å¾å·¥ç¨‹ä¹‹æ—…")
```

### 2. è¿è¡ŒAUMç¤ºä¾‹
```python
# æœ€ç®€å•çš„æ–¹å¼ - ä¸€è¡Œä»£ç å®Œæˆå¤æ‚ç‰¹å¾å·¥ç¨‹
from staran import run_aum_example

results = run_aum_example(
    feature_date="202507",           # ç‰¹å¾æœˆä»½
    database="dwegdata03000",        # æ•°æ®åº“å
    output_path="file:///nfsHome/aum_features"  # è¾“å‡ºè·¯å¾„
)

print(f"âœ… æˆåŠŸï¼å¤„ç†äº†4å¼ è¡¨ï¼Œç”Ÿæˆäº†å®Œæ•´çš„ç‰¹å¾æ•°æ®é›†")
print("ğŸ“‚ æ•°æ®å·²ä¿å­˜åˆ° /nfsHome/aum_features/ ç›®å½•")
```

### 3. è‡ªå®šä¹‰ç‰¹å¾å·¥ç¨‹
```python
# å¦‚éœ€æ›´å¤šæ§åˆ¶ï¼Œä½¿ç”¨è¯¦ç»†API
from staran import create_aum_example

example = create_aum_example("dwegdata03000")

# æŸ¥çœ‹ä¼šç”Ÿæˆå“ªäº›ç‰¹å¾
example.print_summary()

# è¿è¡Œç‰¹å¾å·¥ç¨‹
results = example.run("202507")

# æŸ¥çœ‹ç»“æœ
for table_type, result in results.items():
    if 'table_name' in result:
        print(f"{table_type}: {result['table_name']}")
```

## ğŸ“Š æ€§èƒ½ä¼˜åŠ¿

### å¼€å‘æ•ˆç‡æå‡
- **ä»£ç å‡å°‘**: ä»100+è¡Œæ ·æ¿ä»£ç é™è‡³5-10è¡Œæ ¸å¿ƒé€»è¾‘
- **å¼€å‘æ—¶é—´**: ç‰¹å¾å·¥ç¨‹æ—¶é—´å‡å°‘80%
- **ç»´æŠ¤æˆæœ¬**: è‡ªåŠ¨åŒ–ç®¡ç†å‡å°‘æ‰‹åŠ¨é”™è¯¯

### è¿è¡Œæ€§èƒ½ä¼˜åŒ–  
- **é›†ç¾¤èµ„æº**: æ™ºèƒ½Sparkèµ„æºåˆ†é…å’Œä¼˜åŒ–
- **æ‰¹é‡å¤„ç†**: å¹¶è¡Œä¸‹è½½å’Œå¢é‡å¤„ç†
- **é”™è¯¯æ¢å¤**: è‡ªåŠ¨é‡è¯•å’Œæ–­ç‚¹ç»­ä¼ 

## ğŸ¯ å®Œæ•´ç¤ºä¾‹

### AUMä»£å‘é•¿å°¾æ¨¡å‹ - ç®€åŒ–API
ä½ç½®ï¼š`staran.examples` æ¨¡å—

åŸºäºçœŸå®é‡‘èä¸šåŠ¡åœºæ™¯çš„å®Œæ•´ç‰¹å¾å·¥ç¨‹ç¤ºä¾‹ï¼Œå±•ç¤ºäº†æ–°çš„å¼•æ“æ¶æ„ä¼˜åŠ¿ï¼š

```python
# æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼
from staran import run_aum_example

# ä¸€é”®è¿è¡Œå®Œæ•´ç‰¹å¾å·¥ç¨‹æµç¨‹
results = run_aum_example(
    feature_date="202507",  # å¯é€‰ï¼Œé»˜è®¤å½“å‰æœˆ
    database="dwegdata03000",
    output_path="file:///nfsHome/aum_longtail"
)

print(f"âœ… ç‰¹å¾å·¥ç¨‹å®Œæˆï¼å¤„ç†äº† {len(results)} ä¸ªè¡¨")
```

**æ›´å¤šæ§åˆ¶çš„æ–¹å¼ï¼š**
```python
from staran import create_aum_example

# åˆ›å»ºç¤ºä¾‹å®ä¾‹
example = create_aum_example("dwegdata03000")

# æŸ¥çœ‹ç‰¹å¾æ‘˜è¦
example.print_summary()

# è¿è¡Œç‰¹å¾å·¥ç¨‹
results = example.run("202507")
```

**ç¤ºä¾‹ç‰¹ç‚¹ï¼š**
- ğŸ¦ **çœŸå®ä¸šåŠ¡åœºæ™¯** - 4å¼ é“¶è¡Œæ ¸å¿ƒä¸šåŠ¡è¡¨çš„å®Œæ•´å¤„ç†
- ğŸ”§ **æ™ºèƒ½ç‰¹å¾é…ç½®** - Aè¡¨(æºè¡¨+èšåˆ)ï¼Œå…¶ä»–è¡¨(å…¨ç‰¹å¾ï¼šç¯æ¯”5ä¸ªæœˆ+åŒæ¯”1å¹´)
- ğŸ“Š **å¤šç»´åº¦ç‰¹å¾** - å®¢æˆ·è¡Œä¸ºã€èµ„äº§é…ç½®ã€äº¤æ˜“ç»Ÿè®¡ã€å¢ƒå¤–äº¤æ˜“ç­‰
- ğŸš€ **ç®€åŒ–API** - ä¸€è¡Œä»£ç å®Œæˆå¤æ‚ç‰¹å¾å·¥ç¨‹
- ğŸ“‹ **å®Œæ•´æ–‡æ¡£** - æ¯ä¸ªå­—æ®µéƒ½æœ‰è¯¦ç»†çš„ä¸šåŠ¡å«ä¹‰è¯´æ˜

**æ•°æ®è¡¨è¯´æ˜ï¼š**
- **Aè¡¨** (`bi_hlwj_dfcw_f1_f4_wy`): å®¢æˆ·è¡Œä¸ºç‰¹å¾ â†’ ä»…ç”ŸæˆåŸå§‹æ‹·è´+èšåˆç‰¹å¾
- **Bè¡¨** (`bi_hlwj_zi_chan_avg_wy`): èµ„äº§å¹³å‡ä½™é¢ â†’ ç”Ÿæˆå…¨éƒ¨ç‰¹å¾(èšåˆ+ç¯æ¯”5ä¸ªæœˆ+åŒæ¯”1å¹´)
- **Cè¡¨** (`bi_hlwj_zi_chang_month_total_zb`): æœˆåº¦èµ„äº§é…ç½® â†’ ç”Ÿæˆå…¨éƒ¨ç‰¹å¾
- **Dè¡¨** (`bi_hlwj_realy_month_stat_wy`): æœˆåº¦å®é™…ç»Ÿè®¡ â†’ ç”Ÿæˆå…¨éƒ¨ç‰¹å¾

## ğŸ“„ è®¸å¯è¯

MIT License

---

**Staran v0.6.0** - æ¨¡å—åŒ–å¼•æ“æ¶æ„ï¼Œè®©æœºå™¨å­¦ä¹ ç‰¹å¾å·¥ç¨‹å˜å¾—å‰æ‰€æœªæœ‰çš„ç®€å• ğŸŒŸ
