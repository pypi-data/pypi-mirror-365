import{_ as A,b as _,u as R,g as m,h as l,i as t,d as I,c as S,o as D}from"./index-BA5nENc7.js";import{p}from"./parameters-D7GvY13G.js";import{_ as g}from"./ConnectedLayout-DZLdEDMc.js";import{u as b}from"./parameters.store-OjyEFwc3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VContainer-CWsXUJRX.js";/* empty css              */import"./tag-BQLfwzbO.js";import"./VApp-BkjZPyh4.js";import"./layout-DYUfCptT.js";import"./ssrBoot-CTcujE2n.js";import"./global.store-DKpKwgQU.js";import"./admin-B-kSn9RO.js";import"./layout.store-BpB_lwEX.js";import"./VAvatar-BLlAVJo2.js";import"./VProgressCircular--49P1TOW.js";import"./forwardRefs-DulMu961.js";import"./VMenu-ds-uYle9.js";import"./VCard-CgG7Sw1Z.js";import"./VRow-CnohEaAX.js";import"./VSheet-CajYOL8i.js";const h={getCapabilities(){return A.get("/capabilities/")}},J={__name:"AdminLayout",setup(x){const{$gettext:i}=_(),c=R(),e=b(),o=m(!1),r=m("/rspamd"),d=l(()=>c.authUser),E=l(()=>e.imapMigrationEnabled),u=()=>{window.location=r.value},n=[],M=[{text:i("Dashboard"),to:{name:"Dashboard"},exact:!0,icon:"mdi-view-dashboard-outline"},{text:i("Domains"),to:{name:"DomainList"},icon:"mdi-domain",roles:[t.DOMAIN_ADMIN,t.RESELLER,t.SUPER_ADMIN]},{text:i("Identities"),to:{name:"Identities"},icon:"mdi-account",roles:[t.DOMAIN_ADMIN,t.RESELLER,t.SUPER_ADMIN]},{text:i("Alarms"),to:{name:"Alarms"},icon:"mdi-bell"},{icon:"mdi-history",text:i("Monitoring"),roles:[t.SUPER_ADMIN,t.RESELLER,t.DOMAIN_ADMIN],children:[{text:i("Statistics"),to:{name:"Statistics"},roles:[t.SUPER_ADMIN]},{text:i("Audit trail"),to:{name:"AuditTrail"},roles:[t.SUPER_ADMIN]},{text:i("Messages"),to:{name:"MessageLog"},roles:[t.DOMAIN_ADMIN,t.RESELLER,t.SUPER_ADMIN]}]},{icon:"mdi-email-sync-outline",text:i("IMAP Migration"),roles:[t.SUPER_ADMIN,t.RESELLER],condition:()=>E.value,children:[{text:i("Email providers"),to:{name:"ProvidersList"},roles:[t.SUPER_ADMIN,t.RESELLER]},{text:i("Migrations"),to:{name:"MigrationsList"},roles:[t.RESELLER,t.SUPER_ADMIN]}]},{icon:"mdi-cog",text:i("Settings"),children:n,roles:[t.SUPER_ADMIN]},{icon:"mdi-email-check-outline",text:"Rspamd",action:u,roles:[t.SUPER_ADMIN],condition:()=>o.value},{icon:"mdi-information",text:i("Information"),roles:[t.SUPER_ADMIN],to:{name:"Information"},withBell:!0}];return I(()=>{d.value.role===t.SUPER_ADMIN&&(p.getGlobalApplications().then(a=>{a.data.forEach(s=>{n.push({text:s.label,to:{name:"ParametersEdit",params:{app:s.name}}})})}),e.imapMigrationEnabled===null&&p.getGlobalApplication("imap_migration").then(a=>{e.imapMigrationEnabled=a.data.params.enabled_imapmigration}),h.getCapabilities().then(a=>{o.value="rspamd"in a.data.capabilities,o.value&&(r.value=a.data.capabilities.rspamd.location||"/rspamd")}))}),(a,s)=>(D(),S(g,{"menu-items":M}))}};export{J as default};
