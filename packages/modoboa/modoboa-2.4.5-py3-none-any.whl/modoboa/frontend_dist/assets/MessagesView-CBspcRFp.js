import{b as y,g as l,c as b,w as a,a as s,k as n,t as p,f as h,o as V,l as T,F as M}from"./index-BA5nENc7.js";import{l as $}from"./logs-DYj_x8NI.js";import{d as D}from"./index-DSETu0oI.js";import{V as v,a as F}from"./VToolbar-J3yNZ_TP.js";import{V as S}from"./VTextField-4NZ7IznA.js";import{V as C}from"./VDataTableServer-D_lPUXtC.js";import{b as I}from"./VCard-CgG7Sw1Z.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./tag-BQLfwzbO.js";import"./VAvatar-BLlAVJo2.js";import"./VProgressCircular--49P1TOW.js";import"./forwardRefs-DulMu961.js";import"./ssrBoot-CTcujE2n.js";import"./VDataTable-C75c5ugx.js";import"./VSelect-BiP6crf0.js";import"./VMenu-ds-uYle9.js";import"./VCheckboxBtn-Bxy-LfII.js";import"./VSelectionControl-CCdZN5dG.js";import"./VChip-DtLoN5pb.js";import"./VTable-Dtu3KidF.js";import"./filter-C-VZW-D6.js";const U={__name:"MessageList",setup(k){const{$gettext:t}=y(),c=[{title:t("Queue ID"),key:"queue_id"},{title:t("Date"),key:"date",width:"20%"},{title:t("Status"),key:"status"},{title:t("To"),key:"rcpt"},{title:t("From"),key:"sender"}],d=l(!0),u=l([]),i=l(""),f=l(0);function m({page:o,itemsPerPage:r,sortBy:e,search:w}){let g;e.length&&(g=(e[0].order==="desc"?"-":"")+e[0].key);const x={ordering:g,page:o,page_size:r,search:w};d.value=!0,$.getMessages(x).then(_=>{u.value=_.data.results,f.value=_.data.count,d.value=!1})}return m=D(m,500),(o,r)=>(V(),b(I,{class:"mt-6"},{default:a(()=>[s(C,{headers:c,items:u.value,search:i.value,class:"elevation-0","items-length":f.value,"onUpdate:options":m},{top:a(()=>[s(v,{flat:"",color:"white"},{default:a(()=>[s(S,{modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=e=>i.value=e),"prepend-inner-icon":"mdi-magnify",placeholder:h(t)("Search"),variant:"outlined","hide-details":"",density:"compact",class:"flex-grow-0 w-33"},null,8,["modelValue","placeholder"])]),_:1})]),"item.date":a(({item:e})=>[n(p(o.$date(e.date)),1)]),"item.sender":a(({item:e})=>[n(p(o.$truncate(e.sender,50)),1)]),_:2},1032,["items","search","items-length"])]),_:1}))}},q={__name:"MessagesView",setup(k){return(t,c)=>(V(),T(M,null,[s(v,{flat:""},{default:a(()=>[s(F,null,{default:a(()=>[n(p(t.$gettext("Message history")),1)]),_:1})]),_:1}),s(h(U))],64))}},se=N(q,[["__scopeId","data-v-9c91b6c8"]]);export{se as default};
