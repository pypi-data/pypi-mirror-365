import{c as ge,a as be,d as fe,u as ye,p as Ve,e as pe,r as Te,g as xe,h as De,i as Ie,j as we,l as S,m as R,s as Se,o as Re,t as Pe}from"./VDataTable-C75c5ugx.js";import{u as ke,m as Be,a as Fe}from"./VSelect-BiP6crf0.js";import{s as Ge,v as He,V as Ee,ab as s,h as g,aa as P,X as Ne,a as d,A as b,T as Ae,e as o,a6 as f}from"./index-BA5nENc7.js";import{u as Oe,m as Ue}from"./filter-C-VZW-D6.js";import{V as k}from"./VTable-Dtu3KidF.js";import{u as _e}from"./tag-BQLfwzbO.js";const je=He({...Ae(Re(),["hideDefaultFooter"]),...Se(),...Be(),...Ue()},"VDataTableVirtual"),Je=Ge()({name:"VDataTableVirtual",props:je(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,B){let{attrs:F,slots:a}=B;const{groupBy:u}=ge(e),{sortBy:i,multiSort:G,mustSort:H}=be(e),{disableSort:E}=Ee(e),{columns:c,headers:N,filterFunctions:A,sortFunctions:O,sortRawFunctions:U}=fe(e,{groupBy:u,showSelect:s(()=>e.showSelect),showExpand:s(()=>e.showExpand)}),{items:_}=ye(e,c),y=s(()=>e.search),{filteredItems:j}=Oe(e,_,y,{transform:t=>t.columns,customKeyFilter:A}),{toggleSort:z}=Ve({sortBy:i,multiSort:G,mustSort:H}),{sortByWithGroups:C,opened:K,extractRows:W,isGroupOpen:X,toggleGroup:q}=pe({groupBy:u,sortBy:i,disableSort:E}),{sortedItems:J}=Te(e,j,C,{transform:t=>({...t.raw,...t.columns}),sortFunctions:O,sortRawFunctions:U}),{flatItems:v}=xe(J,u,K),m=g(()=>W(v.value)),{isSelected:L,select:M,selectAll:Q,toggleSelect:Y,someSelected:Z,allSelected:$}=De(e,{allItems:m,currentPage:m}),{isExpanded:ee,toggleExpand:ae}=Ie(e),{containerRef:te,markerRef:le,paddingTop:re,paddingBottom:oe,computedItems:se,handleItemResize:ne,handleScroll:de,handleScrollend:ue,calculateVisibleItems:ie,scrollToIndex:ce}=ke(e,v),me=g(()=>se.value.map(t=>t.raw));we({sortBy:i,page:P(1),itemsPerPage:P(-1),groupBy:u,search:y}),Ne({VDataTableRows:{hideNoData:s(()=>e.hideNoData),noDataText:s(()=>e.noDataText),loading:s(()=>e.loading),loadingText:s(()=>e.loadingText)}});const l=g(()=>({sortBy:i.value,toggleSort:z,someSelected:Z.value,allSelected:$.value,isSelected:L,select:M,selectAll:Q,toggleSelect:Y,isExpanded:ee,toggleExpand:ae,isGroupOpen:X,toggleGroup:q,items:m.value.map(t=>t.raw),internalItems:m.value,groupedItems:v.value,columns:c.value,headers:N.value}));return _e(()=>{const t=S.filterProps(e),ve=R.filterProps(e),he=k.filterProps(e);return d(k,b({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},he,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var r;return(r=a.top)==null?void 0:r.call(a,l.value)},wrapper:()=>{var r,V,p,T,x,D;return o("div",{ref:te,onScrollPassive:de,onScrollend:ue,class:"v-table__wrapper",style:{height:f(e.height)}},[o("table",null,[(r=a.colgroup)==null?void 0:r.call(a,l.value),!e.hideDefaultHeader&&o("thead",{key:"thead"},[d(S,t,a)]),(V=a.thead)==null?void 0:V.call(a,l.value),!e.hideDefaultBody&&o("tbody",{key:"tbody"},[o("tr",{ref:le,style:{height:f(re.value),border:0}},[o("td",{colspan:c.value.length,style:{height:0,border:0}},null)]),(p=a["body.prepend"])==null?void 0:p.call(a,l.value),d(R,b(F,ve,{items:me.value}),{...a,item:n=>d(Fe,{key:n.internalItem.index,renderless:!0,"onUpdate:height":h=>ne(n.internalItem.index,h)},{default:h=>{var w;let{itemRef:I}=h;return((w=a.item)==null?void 0:w.call(a,{...n,itemRef:I}))??d(Pe,b(n.props,{ref:I,key:n.internalItem.index,index:n.internalItem.index}),a)}})}),(T=a["body.append"])==null?void 0:T.call(a,l.value),o("tr",{style:{height:f(oe.value),border:0}},[o("td",{colspan:c.value.length,style:{height:0,border:0}},null)])]),(x=a.tbody)==null?void 0:x.call(a,l.value),(D=a.tfoot)==null?void 0:D.call(a,l.value)])])},bottom:()=>{var r;return(r=a.bottom)==null?void 0:r.call(a,l.value)}})}),{calculateVisibleItems:ie,scrollToIndex:ce}}});export{Je as V};
