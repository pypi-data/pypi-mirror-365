import{C as M}from"./ChoiceField-BRXxbiWf.js";import{b as g,h as R,g as b,c as x,o as v,w as h,a as r,f as l,e as D,_ as K,d as S,l as U,p as C,t as N,F as q,E as T}from"./index-BA5nENc7.js";import{r as y,V as $}from"./VForm-B967suxO.js";import{V as k}from"./VTextField-4NZ7IznA.js";import{V as B}from"./VSwitch-PAZTCa-8.js";import{V as j}from"./VAutocomplete-QADGK4Mr.js";import{V as A}from"./VCheckbox-DPPPkFg8.js";const X={__name:"DomainGeneralForm",props:{modelValue:{type:Object,default:null}},emits:["update:modelValue"],setup(V,{expose:c,emit:o}){const{$gettext:m}=g(),i=V,a=o,u=R({get(){return i.modelValue},set(_){a("update:modelValue",_)}}),t=b();function e(_){_==="relaydomain"&&u.value.transport==null&&(u.value.transport={})}const s=[{label:m("Domain"),icon:"mdi-earth",value:"domain"},{label:m("Relay domain"),icon:"mdi-earth",value:"relaydomain"}];return c({vFormRef:t}),(_,p)=>(v(),x($,{ref_key:"vFormRef",ref:t},{default:h(()=>[r(k,{modelValue:u.value.name,"onUpdate:modelValue":p[0]||(p[0]=d=>u.value.name=d),label:l(m)("Domain name (ex: domain.tld)"),rules:[l(y).required],variant:"outlined",class:"mb-5"},null,8,["modelValue","label","rules"]),r(l(M),{modelValue:u.value.type,"onUpdate:modelValue":[p[1]||(p[1]=d=>u.value.type=d),e],label:l(m)("Type"),choices:s},null,8,["modelValue","label"]),r(B,{modelValue:u.value.enabled,"onUpdate:modelValue":p[2]||(p[2]=d=>u.value.enabled=d),label:l(m)("Enabled"),hint:l(m)("Control if this domain will be allowed to send and receive messages"),color:"primary","persistent-hint":""},null,8,["modelValue","label","hint"])]),_:1},512))}},Y={__name:"DomainDNSForm",props:{modelValue:{type:Object,default:()=>{}}},setup(V,{expose:c}){const{$gettext:o}=g(),m=V,i=b(),a=R(()=>m.modelValue),u=b([{label:"1024",value:1024},{label:"2048",value:2048},{label:"4096",value:4096}]);return c({vFormRef:i}),(t,e)=>(v(),x($,{ref_key:"vFormRef",ref:i},{default:h(()=>[D("div",null,[r(B,{modelValue:a.value.enable_dns_checks,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.enable_dns_checks=s),label:l(o)("Enable DNS checks"),color:"primary"},null,8,["modelValue","label"]),r(B,{modelValue:a.value.enable_dkim,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.enable_dkim=s),label:l(o)("Enable DKIM signing"),color:"primary"},null,8,["modelValue","label"]),r(k,{modelValue:a.value.dkim_key_selector,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.dkim_key_selector=s),label:l(o)("DKIM key selector"),disabled:!a.value.enable_dkim,variant:"outlined"},null,8,["modelValue","label","disabled"]),r(l(M),{modelValue:a.value.dkim_key_length,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.dkim_key_length=s),label:l(o)("DKIM key length"),choices:u.value,disabled:!a.value.enable_dkim},null,8,["modelValue","label","choices","disabled"])])]),_:1},512))}},Z={__name:"DomainLimitationsForm",props:{modelValue:{type:Object,default:null}},setup(V,{expose:c}){const{$gettext:o}=g(),m=V,i=b(),a=R(()=>m.modelValue);return c({vFormRef:i}),(u,t)=>(v(),x($,{ref_key:"vFormRef",ref:i},{default:h(()=>[r(k,{modelValue:a.value.quota,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value.quota=e),label:l(o)("Quota"),hint:l(o)("Quota shared between mailboxes. Can be expressed in KB, MB (default) or GB. A value of 0 means no quota."),"persistent-hint":"",class:"mb-4",variant:"outlined",rules:[l(y).required]},null,8,["modelValue","label","hint","rules"]),r(k,{modelValue:a.value.default_mailbox_quota,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value.default_mailbox_quota=e),label:l(o)("Default mailbox quota"),hint:l(o)("Default quota applied to mailboxes. Can be expressed in KB, MB (default) or GB. A value of 0 means no quota."),"persistent-hint":"",class:"mb-4",variant:"outlined",rules:[l(y).required]},null,8,["modelValue","label","hint","rules"]),r(k,{modelValue:a.value.message_limit,"onUpdate:modelValue":t[2]||(t[2]=e=>a.value.message_limit=e),label:l(o)("Message sending limit"),hint:l(o)("Number of messages this domain can send per day. Leave empty for no limit."),type:"number","persistent-hint":"",variant:"outlined",rules:[l(y).numericOrNull]},null,8,["modelValue","label","hint","rules"])]),_:1},512))}},E="transports",O={getAll(){return K.get(`/${E}/`)}},G={class:"m-label"},I={class:"m-label"},ee={__name:"DomainTransportForm",props:{modelValue:{type:Object,default:()=>{}}},emits:["update:modelValue"],setup(V,{expose:c,emit:o}){const{$gettext:m}=g(),i=V,a=o,u=b(),t=b({}),e=b(),s=b([]);function _(d){for(const f of e.value.settings)if(f.type==="int"){const n=`${e.value.name}_${f.name}`;d.transport.settings[n]=parseInt(d.transport.settings[n])}}function p(){t.value.service=e.value.name,a("update:modelValue",t.value)}return S(()=>{t.value={...i.modelValue},O.getAll().then(d=>{s.value=d.data,t.value.service&&(e.value=s.value.find(f=>f.name===t.value.service))})}),c({checkSettingTypes:_,service:e,vFormRef:u}),(d,f)=>(v(),x($,{ref_key:"vFormRef",ref:u},{default:h(()=>[D("label",G,N(l(m)("Service")),1),r(j,{modelValue:e.value,"onUpdate:modelValue":f[0]||(f[0]=n=>e.value=n),items:s.value,"item-title":"name","return-object":"",variant:"outlined",rules:[l(y).required]},null,8,["modelValue","items","rules"]),e.value?(v(!0),U(q,{key:0},T(e.value.settings,(n,w)=>(v(),U(q,{key:w},[n.type==="str"||n.type==="int"?(v(),U(q,{key:0},[D("label",I,N(n.label),1),r(k,{modelValue:t.value.settings[`${e.value.name}_${n.name}`],"onUpdate:modelValue":[F=>t.value.settings[`${e.value.name}_${n.name}`]=F,p],variant:"outlined",type:t.value.type==="int"?"number":"text",rules:[!!n.required||l(y).required]},null,8,["modelValue","onUpdate:modelValue","type","rules"])],64)):n.type==="boolean"?(v(),x(A,{key:1,modelValue:t.value.settings[`${e.value.name}_${n.name}`],"onUpdate:modelValue":[F=>t.value.settings[`${e.value.name}_${n.name}`]=F,p],label:n.label},null,8,["modelValue","onUpdate:modelValue","label"])):C("",!0)],64))),128)):C("",!0)]),_:1},512))}};export{ee as _,Z as a,Y as b,X as c};
