Metadata-Version: 2.3
Name: openrouter-observer
Version: 0.0.1
Summary: 
Author: Rajesh Marudhachalam
Author-email: rajesh.marudhachalam@gmail.com
Requires-Python: >=3.10,<3.11
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Requires-Dist: colorama (==0.4.6)
Requires-Dist: python-box (==6.1.0)
Description-Content-Type: text/markdown

# ðŸ§  OpenRouter Observer

OpenRouter Observer is a CLI utility that monitors and analyzes LLM requests from structured logs â€” built for teams using [OpenRouter](https://openrouter.ai/) and logging structured JSON per request.

It provides a streamlined way to:
- ðŸ“„ Tail logs live
- ðŸ“Š Aggregate stats (successes, failures, model breakdown)
- ðŸ“¤ Export parsed entries to JSONL
- ðŸ” Run dry-run parsing validations

---

## ðŸ“¦ Installation

Requires **Python 3.10+** and [Poetry](https://python-poetry.org/):

```bash
git clone https://github.com/rajesh1804/openrouter_observer.git
cd openrouter_observer
poetry install
```

---

## âš™ï¸ Configuration

Edit `config/default.yaml` to configure paths and behavior:

```yaml
app:
  name: "OpenRouter Observer"
  mode: "dev"
  log_path: "logs/sample.log"
  export_path: "exports/observer_output.jsonl"
  poll_interval: 1.0
```

---

## ðŸš€ Usage

Run all CLI commands via:

```bash
poetry run python -m openrouter_observer.main [OPTIONS]
```

### âœ… Available Commands

| Command         | Description |
|----------------|-------------|
| `--hello`       | Print a welcome message |
| `--run`         | Run the main observer (WIP) |
| `--tail`        | Tail the log file in real time |
| `--report`      | Ingest full log and print aggregated stats |
| `--export`      | Export valid log entries to JSONL |
| `--head N`      | Show the last N log entries |
| `--dry-run`     | Parse and count valid/invalid lines, without output |

---

### ðŸ” Log Format (Input)

The observer expects each log line to be **a valid JSON object** like:

```json
{
  "model": "mistralai/mistral-7b-instruct",
  "prompt": "Write a story about...",
  "latency": 1.24,
  "status": "success"
}
```

---

## ðŸ“‚ Project Structure

```
openrouter_observer/
â”œâ”€â”€ config/             # YAML config files
â”œâ”€â”€ exports/            # Exported JSONL logs
â”œâ”€â”€ logs/               # Source log files
â”œâ”€â”€ src/                # Main source code
â”œâ”€â”€ tests/              # Pytest-based test suite
```

---

## ðŸ§ª Example

```bash
poetry run python -m openrouter_observer.main --report
```

Outputs:

```
ðŸ“Š Ingest Summary from sample.log
-------------------------------
ðŸ”¢ Total Requests     : 42
âœ… Successes          : 40
âŒ Failures           : 2
ðŸ¤– Models Used        : 3
âœï¸ Longest Prompt     : 123 characters
â†’ Tell me a story about the ocean and...

ðŸ“ˆ Model Breakdown:
- gpt-4: 20 reqs | â±ï¸ Avg Latency: 2.34s
- mistral: 15 reqs | â±ï¸ Avg Latency: 1.12s
...
```

---

## ðŸ› ï¸ Limitations

- Only works with structured JSON logs (one per line)
- No real-time alerts or metrics yet
- No web UI or dashboard (yet)

---

## ðŸ“Œ Road to v0.1.x

The following are out of scope for `v0.0.1` but coming soon:

- Rich TUI mode
- Filtering/sorting by model or latency
- Exporting to CSV or SQLite
- Alerts or anomaly detection
- Plugins for non-OpenRouter logs

---

## ðŸ Version

This is `v0.0.1`. Ready for internal use and light testing.

---

## ðŸ“„ License

MIT License

