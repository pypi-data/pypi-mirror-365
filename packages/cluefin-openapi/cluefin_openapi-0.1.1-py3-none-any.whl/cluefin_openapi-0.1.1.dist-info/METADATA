Metadata-Version: 2.4
Name: cluefin-openapi
Version: 0.1.1
Summary: OpenAPI Client for Cluefin
Author-email: Hangoo Kang <kgcrom@hotmail.com>
Requires-Python: >=3.10
Requires-Dist: loguru>=0.7.3
Requires-Dist: pydantic>=2.11.7
Requires-Dist: requests>=2.32.4
Description-Content-Type: text/markdown

# cluefin-openapi

> **cluefin-openapi**: íˆ¬ì OpenAPIë¥¼ ìœ„í•œ Python í´ë¼ì´ì–¸íŠ¸

---

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

- **ê³„ì¢Œ ì •ë³´ ì¡°íšŒ**: ì”ê³ , ë³´ìœ ì¢…ëª©, ìˆ˜ìµë¥  ë“± ê³„ì¢Œ ê´€ë ¨ ì •ë³´
- **êµ­ë‚´/í•´ì™¸ ì£¼ì‹ ì •ë³´**: ì‹¤ì‹œê°„ ì‹œì„¸, ì¢…ëª© ì •ë³´, ê¸°ì—… ì •ë³´
- **ì°¨íŠ¸ ë°ì´í„° ë° ë¶„ì„**: ì¼/ì£¼/ì›” ì°¨íŠ¸, ê¸°ìˆ ì  ì§€í‘œ, ì‹œê³„ì—´ ë°ì´í„°
- **ETF, ì„¹í„°, í…Œë§ˆ**: ETF ì •ë³´, ì—…ì¢…ë³„ ì •ë³´, í…Œë§ˆë³„ ì¢…ëª© ë¶„ë¥˜
- **ì‹œì¥ ìƒí™© ëª¨ë‹ˆí„°ë§**: ì‹œì¥ ì§€ìˆ˜, ê±°ë˜ëŸ‰, ì‹œì¥ ë™í–¥
- **ì£¼ë¬¸ ê´€ë¦¬**: ë§¤ìˆ˜/ë§¤ë„ ì£¼ë¬¸, ì£¼ë¬¸ ì¡°íšŒ, ì‹¤ì‹œê°„ ì²´ê²° ì•Œë¦¼

## âš¡ Quick Start

### ì„¤ì¹˜

```bash
# ê¸°ë³¸ ì„¤ì¹˜
pip install cluefin-openapi

# ê°œë°œ í™˜ê²½ì—ì„œ ì„¤ì¹˜
git clone https://github.com/kgcrom/cluefin
cd cluefin
pip install -e .
```

### ê¸°ë³¸ ì‚¬ìš©ë²•

```python
import os
from cluefin_openapi.kiwoom._auth import Auth
from cluefin_openapi.kiwoom._client import Client

# ì¸ì¦ ì„¤ì •
auth = Auth(
    app_key=os.getenv("KIWOOM_APP_KEY"),
    secret_key=os.getenv("KIWOOM_SECRET_KEY"),
    env="dev",  # ê°œë°œí™˜ê²½: "dev", ìš´ì˜í™˜ê²½: "prod"
)

# í† í° ìƒì„± ë° í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
token = auth.generate_token()
client = Client(token=token.token, env="dev")

# ì‚¼ì„±ì „ì(005930) ì¼ë³„ ì‹¤í˜„ì†ìµ ì¡°íšŒ
response = client.account.get_daily_stock_realized_profit_loss_by_date("005930", "20250630")
print("ì‘ë‹µ í—¤ë”:", response.headers)
print("ì‘ë‹µ ë°ì´í„°:", response.body)
```


## ğŸ¯ ì™œ cluefin-openapiì¸ê°€ìš”?

### í†µí•©ëœ ì¸í„°í˜ì´ìŠ¤
í‚¤ì›€ì¦ê¶Œ, DART, KRX ë“± ì—¬ëŸ¬ ê¸ˆìœµ OpenAPIë¥¼ í•˜ë‚˜ì˜ Python ì¸í„°í˜ì´ìŠ¤ë¡œ í†µí•©í•˜ì—¬ ì œê³µí•©ë‹ˆë‹¤.

### ê°œë°œ ì‹œê°„ ë‹¨ì¶•
ë³µì¡í•œ ê¸ˆìœµ API í†µí•© ì‘ì—…ì„ ëŒ€ì‹  ì²˜ë¦¬í•˜ì—¬, íˆ¬ì ë„êµ¬ ê°œë°œì— ì§‘ì¤‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### íƒ€ì… ì•ˆì „ì„±
Pydanticì„ í™œìš©í•œ ê°•ë ¥í•œ íƒ€ì… ê²€ì¦ìœ¼ë¡œ ëŸ°íƒ€ì„ ì—ëŸ¬ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.

### í’ë¶€í•œ ê¸°ëŠ¥
- ì‹¤ì‹œê°„ ë°ì´í„° ìŠ¤íŠ¸ë¦¬ë°
- ìë™ í† í° ê°±ì‹ 
- ìš”ì²­ ì œí•œ ê´€ë¦¬
- í¬ê´„ì ì¸ ì—ëŸ¬ ì²˜ë¦¬

## ğŸ“– ì‹œì‘í•˜ê¸°

### 1. í‚¤ì›€ì¦ê¶Œ API ì‹ ì²­

1. [í‚¤ì›€ì¦ê¶Œ OpenAPI ì‚¬ì´íŠ¸](https://apiportal.kiwoom.com/)ì—ì„œ ê³„ì • ìƒì„±
2. API ì‚¬ìš© ì‹ ì²­ ë° ìŠ¹ì¸ ëŒ€ê¸°
3. APP_KEY ë° SECRET_KEY ë°œê¸‰ ë°›ê¸°


### 2. í•œêµ­ê±°ë˜ì†Œ OpenAPI ì‹ ì²­

1. [í•œêµ­ê±°ë˜ì†Œ OpenAPI ì‚¬ì´íŠ¸](http://openapi.krx.co.kr/contents/OPP/MAIN/main/index.cmd)ì—ì„œ ê³„ì • ìƒì„±
2. API ì¸ì¦í‚¤ ì‹ ì²­ ë° ìŠ¹ì¸ ëŒ€ê¸°
3. ì‚¬ìš©í•  API ë§ˆë‹¤ ì‹ ì²­ ë° ìŠ¹ì¸ ëŒ€ê¸°

### 3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

```bash
$> cp .env.sample .env

# .env íŒŒì¼ ìˆ˜ì •

# í‚¤ì›€ì¦ê¶Œ API í‚¤ ì„¤ì •
KIWOOM_APP_KEY=your_app_key_here
KIWOOM_SECRET_KEY=your_secret_key_here

# í•œêµ­ê±°ë˜ì†Œ API í‚¤ ì„¤ì •
KRX_AUTH_KEY=your_krx_auth_key_here
```

## ğŸ“š API ë¬¸ì„œ

### ì¸ì¦ (Authentication)

```python
# í‚¤ì›€ì¦ê¶Œ
from cluefin_openapi.kiwoom._auth import Auth

auth = Auth(
    app_key="your_app_key",
    secret_key="your_secret_key",
    env="dev"  # "dev" ë˜ëŠ” "prod"
)

# í† í° ìƒì„±
token = auth.generate_token()
```

### í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”

```python
# í‚¤ì›€ì¦ê¶Œ
from cluefin_openapi.kiwoom._client import Client

client = Client(
    token=token.token,
    env="dev",
)

# í•œêµ­ê±°ë˜ì†Œ
from cluefin_openapi.krx._client import Client as KRXClient
krx_client = KRXClient(auth_key="your_krx_auth_key", timeout=30)
```

## ğŸ”§ êµ¬ì„± ì˜µì…˜

### ë¡œê¹… ì„¤ì •

```python
import logging
from loguru import logger

# ë¡œê·¸ ë ˆë²¨ ì„¤ì •
logger.add("kiwoom_api.log", level="INFO", rotation="10 MB")
```

### ìš”ì²­ ì œí•œ ê´€ë¦¬

ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ìë™ìœ¼ë¡œ API ìš”ì²­ ì œí•œì„ ê´€ë¦¬í•©ë‹ˆë‹¤:

- ì´ˆë‹¹ ìš”ì²­ ìˆ˜ ì œí•œ
- ì¼ì¼ ìš”ì²­ ìˆ˜ ì œí•œ
- ìë™ ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜

## âš ï¸ ì—ëŸ¬ ì²˜ë¦¬

```python
from cluefin_openapi.kiwoom._exceptions import KiwoomAPIError

try:
    response = client.account.get_inquire_balance()
except KiwoomAPIError as e:
    print(f"API ì—ëŸ¬: {e.message}")
    print(f"ì—ëŸ¬ ì½”ë“œ: {e.error_code}")
except Exception as e:
    print(f"ì¼ë°˜ ì—ëŸ¬: {str(e)}")
```

### ì¼ë°˜ì ì¸ ì—ëŸ¬ ì½”ë“œ

- `40010000`: ì˜ëª»ëœ ìš”ì²­ í˜•ì‹
- `40080000`: í† í° ë§Œë£Œ
- `50010000`: ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜

## ğŸ§ª í…ŒìŠ¤íŠ¸

```bash
# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
pytest packages/cluefin-openapi/tests/unit/ -v

# í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (API í‚¤ í•„ìš”)
pytest packages/cluefin-openapi/tests/integration/ -v

# ì½”ë“œ ì»¤ë²„ë¦¬ì§€ í™•ì¸
pytest --cov=cluefin_openapi --cov-report=html
```

## ğŸ› ï¸ ê°œë°œ ê°€ì´ë“œ

í”„ë¡œì íŠ¸ëŠ” ë‹¤ìŒ ë„êµ¬ë“¤ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

- **Uv**: Rustë¡œ ë§Œë“¤ì–´ì§„ Python íŒ¨í‚¤ì§€ ë©”ë‹ˆì €
- **Ruff**: ì½”ë“œ í¬ë§·íŒ… ë° ë¦°íŒ…
- **pytest**: í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬
- **Pydantic**: ë°ì´í„° ê²€ì¦

```bash
# ì½”ë“œ í¬ë§·íŒ…
ruff format packages/cluefin-openapi/

# ë¦°íŒ… í™•ì¸
ruff check packages/cluefin-openapi/
```

## ğŸ“ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](../../LICENSE) íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

## ğŸ“ ì§€ì› ë° ë¬¸ì˜

- **ì´ìŠˆ ë° ë²„ê·¸ ë¦¬í¬íŠ¸**: [GitHub Issues](https://github.com/kgcrom/cluefin/issues)
- **ê¸°ëŠ¥ ìš”ì²­**: [GitHub Discussions](https://github.com/kgcrom/cluefin/discussions)

## ğŸ”— ê´€ë ¨ ë§í¬

- [í‚¤ì›€ì¦ê¶Œ OpenAPI í¬í„¸](https://openapi.kiwoom.com/)
- [í•œêµ­ê±°ë˜ì†Œ OpenAPI í¬í„¸](http://openapi.krx.co.kr)
- [Cluefin ë©”ì¸ í”„ë¡œì íŠ¸](https://github.com/kgcrom/cluefin)

---

> âš ï¸ **íˆ¬ì ì£¼ì˜ì‚¬í•­**: ì´ í”„ë¡œì íŠ¸ëŠ” í‚¤ì›€ì¦ê¶Œê³¼ ê³µì‹ì ìœ¼ë¡œ ì—°ê´€ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. 
> íˆ¬ìëŠ” ì‹ ì¤‘í•˜ê²Œ í•˜ì‹œê³ , ëª¨ë“  íˆ¬ì ì†ì‹¤ì— ëŒ€í•œ ì±…ì„ì€ íˆ¬ìì ë³¸ì¸ì—ê²Œ ìˆìŠµë‹ˆë‹¤.
