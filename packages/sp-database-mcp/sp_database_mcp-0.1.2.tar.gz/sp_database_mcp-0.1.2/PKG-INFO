Metadata-Version: 2.4
Name: sp-database-mcp
Version: 0.1.2
Summary: A Model Context Protocol server for database schema information
Project-URL: Homepage, https://github.com/alexliu/sp-database-mcp
Project-URL: Repository, https://github.com/alexliu/sp-database-mcp
Project-URL: Issues, https://github.com/alexliu/sp-database-mcp/issues
Project-URL: Documentation, https://github.com/alexliu/sp-database-mcp#readme
Author-email: Alex Liu <drowning524@gmail.com>
License: MIT
License-File: LICENSE
Keywords: database,mcp,model-context-protocol,schema
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Database
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.10
Requires-Dist: mcp>=1.4.1
Requires-Dist: requests>=2.31.0
Requires-Dist: sqlalchemy>=2.0.0
Provides-Extra: dev
Requires-Dist: black>=23.0.0; extra == 'dev'
Requires-Dist: pytest-asyncio>=0.21.0; extra == 'dev'
Requires-Dist: pytest>=7.0.0; extra == 'dev'
Requires-Dist: ruff>=0.1.0; extra == 'dev'
Provides-Extra: mysql
Requires-Dist: pymysql>=1.1.0; extra == 'mysql'
Provides-Extra: postgresql
Requires-Dist: psycopg2-binary>=2.9.0; extra == 'postgresql'
Description-Content-Type: text/markdown

# SP Database MCP Server

ä¸€ä¸ªç”¨äºå®æ—¶è·å–æ•°æ®åº“è¡¨ç»“æ„ä¿¡æ¯çš„ Model Context Protocol (MCP) æœåŠ¡å™¨ã€‚é€šè¿‡ MCP åè®®ï¼Œå¯ä»¥è®© AI åŠ©æ‰‹å®æ—¶è·å–æ•°æ®åº“çš„è¡¨ç»“æ„ä¿¡æ¯ï¼Œè§£å†³ä¿¡æ¯ä¸åŠæ—¶æ›´æ–°çš„é—®é¢˜ã€‚

## åŠŸèƒ½ç‰¹æ€§

- **æ™ºèƒ½è¡¨ç»“æ„æŸ¥è¯¢**ï¼šæ”¯æŒä¸¤ç§æŸ¥è¯¢æ¨¡å¼
  - **ä½ä»£ç ç³»ç»Ÿ Schema æŸ¥è¯¢**ï¼šé€šè¿‡ `da_logic_entity` å’Œ `da_entity_attribute` è¡¨è·å–è¯¦ç»†çš„ä¸šåŠ¡å­—æ®µä¿¡æ¯
  - **ä¼ ç»Ÿæ•°æ®åº“å…ƒæ•°æ®æŸ¥è¯¢**ï¼šç›´æ¥ä»æ•°æ®åº“ç³»ç»Ÿè¡¨è·å–æŠ€æœ¯å­—æ®µä¿¡æ¯
- ğŸ”„ å®æ—¶è·å–æ•°æ®åº“è¡¨ç»“æ„ä¿¡æ¯
- ğŸ“Š æ”¯æŒå¤šç§æ•°æ®åº“ç±»å‹ (MySQL, PostgreSQL)
- ğŸš€ é€šè¿‡ API æ¥å£åŠ¨æ€è·å–æœ€æ–°çš„è¡¨å­—æ®µä¿¡æ¯
- ğŸ” æ”¯æŒè¡¨ä¿¡æ¯æŸ¥è¯¢å’Œå­—æ®µè¯¦æƒ…è·å–
- ğŸ“ è‡ªåŠ¨ç”Ÿæˆè¡¨ç»“æ„æ–‡æ¡£

## å®‰è£…

```bash
cd ~/Project/sp-database-mcp
uv sync
```

## é…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
# æ•°æ®åº“è¿æ¥é…ç½®
DATABASE_URL=mysql://username:password@localhost:3306/database_name
# æˆ–è€… PostgreSQL
# DATABASE_URL=postgresql://username:password@localhost:5432/database_name

# API æ¥å£é…ç½®ï¼ˆå¦‚æœé€šè¿‡ API è·å–ï¼‰
API_BASE_URL=https://your-api-server.com
API_TOKEN=your-api-token
```

## ä½¿ç”¨æ–¹å¼

### å¯åŠ¨ MCP æœåŠ¡å™¨

```bash
uv run sp-database-mcp
```

### åœ¨ Claude Desktop ä¸­é…ç½®

åœ¨ Claude Desktop çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```json
{
  "mcpServers": {
    "sp-database": {
      "command": "uv",
      "args": ["run", "sp-database-mcp"],
      "cwd": "/Users/alexliu/Project/sp-database-mcp"
    }
  }
}
```

### ä½¿ç”¨ç¤ºä¾‹

- "ä»‹ç»ä¸€ä¸‹æ´»åŠ¨è¡¨æœ‰å“ªäº›å­—æ®µ"
- "è·å– activity_node è¡¨çš„ç»“æ„ä¿¡æ¯"
- "æŸ¥çœ‹ç”¨æˆ·è¡¨çš„å­—æ®µå®šä¹‰"

## ä½¿ç”¨ç¤ºä¾‹

### æŸ¥è¯¢è¡¨ç»“æ„ä¿¡æ¯

ç°åœ¨æ”¯æŒä¸¤ç§æŸ¥è¯¢æ¨¡å¼ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¼˜å…ˆä½¿ç”¨ä½ä»£ç ç³»ç»Ÿçš„ schema æŸ¥è¯¢ï¼š

```python
# é€šè¿‡ MCP å·¥å…·æŸ¥è¯¢è¡¨ä¿¡æ¯
# è¾“å…¥ï¼šè¯·è·å– activity_node è¡¨çš„è¯¦ç»†ä¿¡æ¯

# è¾“å‡ºç¤ºä¾‹ï¼ˆä½ä»£ç ç³»ç»Ÿ schema æŸ¥è¯¢ç»“æœï¼‰ï¼š
# activity_node è¡¨ç»“æ„ä¿¡æ¯
# 
# **è¡¨è¯´æ˜**: æ´»åŠ¨
# 
# ## å­—æ®µä¿¡æ¯
# 
# | å­—æ®µå | ç±»å‹ | å¯ç©º | é»˜è®¤å€¼ | ä¸»é”® | è¯´æ˜ |
# |--------|------|------|--------|------|---------|
# | id | BIGINT | å¦ | - | æ˜¯ | ä¸»é”®ID |
# | name | VARCHAR(1000) | æ˜¯ | - | å¦ | æ´»åŠ¨åç§° |
# | activity_code | VARCHAR(64) | æ˜¯ | - | å¦ | æ´»åŠ¨ç¼–ç  |
# | business_object_id | BIGINT | æ˜¯ | - | å¦ | ä¸šåŠ¡å¯¹è±¡id |
# | ... | ... | ... | ... | ... | ... |
```

### æŸ¥è¯¢æ¨¡å¼è¯´æ˜

1. **ä½ä»£ç ç³»ç»Ÿ Schema æŸ¥è¯¢**ï¼ˆä¼˜å…ˆï¼‰
   - æŸ¥è¯¢ `da_logic_entity` è¡¨è·å–å®ä½“åŸºæœ¬ä¿¡æ¯
   - æŸ¥è¯¢ `da_entity_attribute` è¡¨è·å–å­—æ®µè¯¦ç»†ä¿¡æ¯
   - æä¾›ä¸­æ–‡å­—æ®µåã€ä¸šåŠ¡æè¿°ã€æ•°æ®ç±»å‹ç­‰ä¸°å¯Œä¿¡æ¯
   - æ”¯æŒå¤–é”®å…³ç³»è§£æ

2. **ä¼ ç»Ÿæ•°æ®åº“å…ƒæ•°æ®æŸ¥è¯¢**ï¼ˆå›é€€ï¼‰
   - å½“ä½ä»£ç ç³»ç»ŸæŸ¥è¯¢å¤±è´¥æ—¶è‡ªåŠ¨å›é€€
   - ç›´æ¥ä»æ•°æ®åº“ç³»ç»Ÿè¡¨è·å–æŠ€æœ¯å­—æ®µä¿¡æ¯
   - æä¾›åŸºç¡€çš„å­—æ®µç±»å‹ã€çº¦æŸç­‰ä¿¡æ¯

## é¡¹ç›®ç»“æ„

```
sp-database-mcp/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ sp_database_mcp/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ server.py          # MCP æœåŠ¡å™¨ä¸»æ–‡ä»¶
â”‚       â”œâ”€â”€ database.py        # æ•°æ®åº“è¿æ¥å’ŒæŸ¥è¯¢
â”‚       â”œâ”€â”€ api_client.py      # API å®¢æˆ·ç«¯
â”‚       â””â”€â”€ models.py          # æ•°æ®æ¨¡å‹
â”œâ”€â”€ tests/
â”œâ”€â”€ .env.example
â”œâ”€â”€ pyproject.toml
â””â”€â”€ README.md
```

## å¼€å‘

```bash
# å®‰è£…å¼€å‘ä¾èµ–
uv sync --dev

# è¿è¡Œæµ‹è¯•
uv run pytest

# ä»£ç æ ¼å¼åŒ–
uv run black .
uv run isort .

# ç±»å‹æ£€æŸ¥
uv run mypy .
```
