# Pretty Build TUI - Textual 版本

## 概述

Pretty Build 现在使用 **Textual** 框架提供现代化的文本用户界面 (TUI)。Textual 是一个先进的 Python TUI 框架，提供了丰富的组件和现代化的界面体验。

## 功能特性

### 界面特性
- 🎨 **现代化设计**: 基于 Textual 的专业 TUI 框架
- 📱 **响应式布局**: 自适应终端大小的界面
- 🎯 **标签页导航**: 清晰的功能分区
- ⌨️ **键盘快捷键**: 高效的键盘操作
- 🎭 **主题支持**: 支持多种颜色主题
- 📊 **实时更新**: 动态状态和进度显示

### 主要屏幕

#### 1. 主页 (Main)
- 🔨 构建按钮 (Build)
- 🧹 清理按钮 (Clean) 
- 🔄 重新构建按钮 (Rebuild)
- ⏹️ 停止按钮 (Stop)
- 📁 快速操作 (打开输出、查看日志、设置)

#### 2. 配置 (Config)
- ⚙️ 构建命令配置
- 📂 输出目录设置
- 💾 配置保存和加载

#### 3. 日志 (Logs)
- 📜 实时构建日志显示
- 🎨 彩色日志分类 (错误、警告、信息、成功)
- 🕒 时间戳显示
- 📜 自动滚动

#### 4. 性能 (Performance)
- 📊 CPU 使用率监控
- 💾 内存使用率显示
- ⏱️ 构建时间统计
- 📈 实时性能图表

#### 5. 插件 (Plugins)
- 🔌 插件列表管理
- ✅ 插件状态显示
- ⚙️ 插件配置选项
- 🔄 插件启用/禁用

#### 6. 帮助 (Help)
- 📖 完整的帮助文档
- ⌨️ 键盘快捷键说明
- 🛠️ 使用指南

## 使用方法

### 启动 TUI
```bash
python pretty_build.py --tui
```

### 键盘快捷键

#### 全局快捷键
- **Ctrl+C**: 退出应用
- **Ctrl+B**: 开始构建
- **Ctrl+L**: 清理构建
- **Ctrl+R**: 重新构建 (清理 + 构建)
- **F1**: 显示帮助
- **F5**: 刷新界面

#### 导航
- **Tab**: 在组件间切换
- **Shift+Tab**: 反向切换
- **Enter**: 激活按钮/选项
- **Esc**: 返回/取消

## 技术实现

### 核心组件

#### PrettyBuildTUI (主应用)
- 基于 `textual.app.App` 的主应用类
- 管理整个 TUI 的生命周期
- 处理全局事件和状态

#### BuildStatus (状态组件)
- 显示当前构建状态
- 跟踪构建次数和时间
- 实时状态更新

#### ConfigPanel (配置面板)
- 构建配置管理
- 输入字段和保存功能
- 配置文件集成

#### LogViewer (日志查看器)
- 基于 `textual.widgets.Log`
- 彩色日志分类显示
- 自动滚动和时间戳

#### PerformancePanel (性能面板)
- 系统资源监控
- 进度条显示
- 实时数据更新

#### PluginManager (插件管理器)
- 插件列表显示
- 状态管理
- 配置界面

### 依赖库
- **textual**: 现代 TUI 框架 (>=0.41.0)
- **rich**: 富文本和样式支持
- **psutil**: 系统性能监控 (可选)

### 架构设计
```
PrettyBuildTUI (主应用)
├── Header (标题栏)
├── BuildStatus (状态面板)
├── TabbedContent (标签内容)
│   ├── Main (主页)
│   ├── Config (配置)
│   ├── Logs (日志)
│   ├── Performance (性能)
│   ├── Plugins (插件)
│   └── Help (帮助)
├── ProgressBar (进度条)
└── Footer (状态栏)
```

## 当前状态

### ✅ 已实现
- [x] 基础 Textual TUI 框架
- [x] 标签页导航系统
- [x] 构建状态显示
- [x] 配置面板界面
- [x] 日志查看器
- [x] 性能监控面板
- [x] 插件管理界面
- [x] 帮助系统
- [x] 键盘快捷键支持
- [x] 响应式布局
- [x] 模拟构建过程
- [x] 实时状态更新

### 🚧 开发中
- [ ] 真实构建系统集成
- [ ] 配置文件读写
- [ ] 插件系统集成
- [ ] 性能数据收集
- [ ] 主题自定义

### 📋 计划功能
- [ ] 构建历史记录
- [ ] 错误高亮和跳转
- [ ] 文件监控和自动构建
- [ ] 远程构建支持
- [ ] 构建缓存管理
- [ ] 多项目支持
- [ ] 自定义构建脚本
- [ ] 通知集成

## 版本历史

### v2.0.0 - Textual 重构 (当前版本)
- ✨ 完全重写为 Textual 框架
- 🎨 现代化界面设计
- 📱 响应式布局支持
- ⌨️ 完整的键盘快捷键
- 📊 实时性能监控
- 🔌 插件管理界面
- 📜 彩色日志显示
- 🎯 标签页导航

### v1.1.0 - Rich 版本 (已弃用)
- 基于 Rich 库的简单 TUI
- 基础键盘交互
- 屏幕切换功能
- 简单状态显示

## 贡献指南

1. 确保安装了 Textual: `pip install textual`
2. 运行测试: `python pretty_build.py --tui`
3. 查看 Textual 文档: https://textual.textualize.io/
4. 提交 PR 前请测试所有功能

## 许可证

本项目采用 MIT 许可证。