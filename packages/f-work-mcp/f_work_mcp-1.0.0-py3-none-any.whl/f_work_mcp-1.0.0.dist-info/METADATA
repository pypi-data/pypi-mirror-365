Metadata-Version: 2.4
Name: f-work-mcp
Version: 1.0.0
Summary: A MCP server for tracking work progress and generating daily reports with Python file diff analysis
Project-URL: Homepage, https://github.com/your-username/f-work-mcp
Project-URL: Documentation, https://github.com/your-username/f-work-mcp#readme
Project-URL: Repository, https://github.com/your-username/f-work-mcp
Project-URL: Issues, https://github.com/your-username/f-work-mcp/issues
Project-URL: Changelog, https://github.com/your-username/f-work-mcp/blob/main/CHANGELOG.md
Author-email: F-Work MCP Team <contact@f-work-mcp.com>
Maintainer-email: F-Work MCP Team <contact@f-work-mcp.com>
License: MIT
License-File: LICENSE
Keywords: daily-report,git,mcp,productivity,python,work-tracking
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Topic :: Office/Business :: Scheduling
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: Software Development :: Version Control :: Git
Classifier: Topic :: Utilities
Requires-Python: >=3.10
Requires-Dist: mcp[cli]>=1.12.2
Requires-Dist: pydantic>=2.0.0
Requires-Dist: starlette>=0.27.0
Provides-Extra: dev
Requires-Dist: black>=23.0.0; extra == 'dev'
Requires-Dist: build>=1.0.0; extra == 'dev'
Requires-Dist: flake8>=6.0.0; extra == 'dev'
Requires-Dist: isort>=5.12.0; extra == 'dev'
Requires-Dist: mypy>=1.0.0; extra == 'dev'
Requires-Dist: pre-commit>=3.0.0; extra == 'dev'
Requires-Dist: pytest-asyncio>=0.21.0; extra == 'dev'
Requires-Dist: pytest>=7.0.0; extra == 'dev'
Requires-Dist: twine>=4.0.0; extra == 'dev'
Provides-Extra: test
Requires-Dist: pytest-asyncio>=0.21.0; extra == 'test'
Requires-Dist: pytest-cov>=4.0.0; extra == 'test'
Requires-Dist: pytest>=7.0.0; extra == 'test'
Description-Content-Type: text/markdown

# Work Daily Report MCP Server

ä¸€ä¸ªåŸºäº MCP (Model Context Protocol) çš„å·¥ä½œæ—¥æŠ¥ç”ŸæˆæœåŠ¡å™¨ï¼Œèƒ½å¤Ÿè‡ªåŠ¨è·Ÿè¸ªä»£ç å˜æ›´å¹¶ç”Ÿæˆè¯¦ç»†çš„å·¥ä½œæ—¥æŠ¥ã€‚**ç‰¹åˆ«å¢å¼ºäº†å¯¹Pythonæ–‡ä»¶çš„å·®å¼‚åˆ†æåŠŸèƒ½ï¼Œä¸ºå¤§è¯­è¨€æ¨¡å‹æä¾›è¯¦ç»†çš„ä»£ç å˜æ›´ä¿¡æ¯ã€‚**

## åŠŸèƒ½ç‰¹æ€§

### ğŸš€ æ ¸å¿ƒåŠŸèƒ½
- **ä¸Šç­å·¥å…·** (`work_start`): è®°å½•å·¥ä½œå¼€å§‹æ—¶çš„ä»£ç çŠ¶æ€
- **ä¸‹ç­å·¥å…·** (`work_end`): è®°å½•å·¥ä½œç»“æŸçŠ¶æ€å¹¶ç”Ÿæˆæ—¥æŠ¥
- **çŠ¶æ€æŸ¥è¯¢** (`get_work_status`): è·å–å½“å‰å·¥ä½œçŠ¶æ€
- **æ—¥æŠ¥æŸ¥è¯¢** (`get_daily_report`): è·å–æŒ‡å®šæ—¥æœŸçš„æ—¥æŠ¥
- **æ–‡ä»¶å·®å¼‚åˆ†æ** (`get_python_file_diff`): è·å–æŒ‡å®šPythonæ–‡ä»¶çš„è¯¦ç»†å·®å¼‚

### ğŸ“Š è·Ÿè¸ªå†…å®¹
- Git æäº¤è®°å½•å’ŒçŠ¶æ€
- æ–‡ä»¶ä¿®æ”¹ã€æ–°å¢ã€åˆ é™¤æƒ…å†µ
- **Pythonæ–‡ä»¶å†…å®¹å·®å¼‚åˆ†æ** â­
- å·¥ä½œæ—¶é•¿ç»Ÿè®¡
- ä»£ç å˜æ›´æ‘˜è¦
- åˆ†æ”¯ä¿¡æ¯

### ğŸ”§ æ‰©å±•åŠŸèƒ½
- è‡ªåŠ¨è¡¥å…¨æ”¯æŒ
- è‡ªå®šä¹‰ HTTP è·¯ç”±
- èµ„æºè®¿é—®æ¥å£
- æç¤ºè¯ç”Ÿæˆ

### ğŸ Pythonæ–‡ä»¶å·®å¼‚åŠŸèƒ½ â­
- **å®Œæ•´å†…å®¹è·Ÿè¸ª**: è®°å½•æ‰€æœ‰Pythonæ–‡ä»¶çš„å®Œæ•´å†…å®¹
- **ç²¾ç¡®å·®å¼‚åˆ†æ**: ä½¿ç”¨difflibç”Ÿæˆæ ‡å‡†åŒ–çš„å·®å¼‚æ ¼å¼
- **è¡Œæ•°ç»Ÿè®¡**: ç»Ÿè®¡æ–°å¢ã€åˆ é™¤ã€ä¿®æ”¹çš„ä»£ç è¡Œæ•°
- **å˜æ›´ç±»å‹è¯†åˆ«**: åŒºåˆ†æ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤çš„æ–‡ä»¶
- **LLMå‹å¥½æ ¼å¼**: æä¾›ç»“æ„åŒ–çš„å·®å¼‚æ•°æ®ï¼Œä¾¿äºå¤§è¯­è¨€æ¨¡å‹åˆ†æ

## å®‰è£…å’Œè¿è¡Œ

### 1. å®‰è£…ä¾èµ–
```bash
uv sync
```

### 2. è¿è¡ŒæœåŠ¡å™¨
```bash
uv run mcp dev main.py
```

### 3. ä½¿ç”¨ MCP Inspector
æœåŠ¡å™¨å¯åŠ¨åï¼Œä¼šæ‰“å¼€æµè§ˆå™¨è®¿é—® MCP Inspector ç•Œé¢ï¼Œä½ å¯ä»¥åœ¨é‚£é‡Œæµ‹è¯•æ‰€æœ‰åŠŸèƒ½ã€‚

## ä½¿ç”¨æ–¹æ³•

### ä¸Šç­æ—¶
```python
# è®°å½•å·¥ä½œå¼€å§‹çŠ¶æ€ï¼ˆåŒ…å«Pythonæ–‡ä»¶å†…å®¹ï¼‰
work_start(working_directory=".")
```

### ä¸‹ç­æ—¶
```python
# è®°å½•å·¥ä½œç»“æŸçŠ¶æ€å¹¶ç”Ÿæˆæ—¥æŠ¥ï¼ˆåŒ…å«ä»£ç å·®å¼‚ï¼‰
work_end(working_directory=".")
```

### æŸ¥è¯¢çŠ¶æ€
```python
# è·å–å½“å‰å·¥ä½œçŠ¶æ€
get_work_status(working_directory=".")

# è·å–æŒ‡å®šæ—¥æœŸçš„æ—¥æŠ¥
get_daily_report(date="2024-01-15")

# è·å–æŒ‡å®šPythonæ–‡ä»¶çš„è¯¦ç»†å·®å¼‚
get_python_file_diff(file_path="main.py")
```

## å·¥å…·è¯¦è§£

### 1. work_start
**åŠŸèƒ½**: è®°å½•å·¥ä½œå¼€å§‹çŠ¶æ€ï¼ˆåŒ…å«Pythonæ–‡ä»¶å†…å®¹ï¼‰

**å‚æ•°**:
- `working_directory` (str): å·¥ä½œç›®å½•è·¯å¾„ï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½•

**è¿”å›**:
```json
{
  "success": true,
  "message": "å·¥ä½œå¼€å§‹çŠ¶æ€å·²è®°å½•",
  "timestamp": "2024-01-15T09:00:00",
  "working_directory": "/path/to/project",
  "branch_name": "main",
  "total_files": 150,
  "modified_files_count": 5,
  "git_commits_count": 25,
  "python_files_count": 12
}
```

### 2. work_end
**åŠŸèƒ½**: è®°å½•å·¥ä½œç»“æŸçŠ¶æ€å¹¶ç”Ÿæˆæ—¥æŠ¥ï¼ˆåŒ…å«ä»£ç å·®å¼‚ï¼‰

**å‚æ•°**:
- `working_directory` (str): å·¥ä½œç›®å½•è·¯å¾„ï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½•

**è¿”å›**:
```json
{
  "success": true,
  "message": "å·¥ä½œç»“æŸçŠ¶æ€å·²è®°å½•ï¼Œæ—¥æŠ¥å·²ç”Ÿæˆ",
  "report": {
    "date": "2024-01-15",
    "work_start_time": "09:00",
    "work_end_time": "18:00",
    "working_hours": 9.0,
    "total_commits": 3,
    "modified_files_count": 5,
    "new_files_count": 2,
    "deleted_files_count": 1,
    "work_summary": "å®Œæˆäº† 3 æ¬¡ä»£ç æäº¤ï¼Œä¿®æ”¹äº† 5 ä¸ªæ–‡ä»¶ï¼Œæ–°å¢äº† 2 ä¸ªæ–‡ä»¶ï¼Œåˆ é™¤äº† 1 ä¸ªæ–‡ä»¶ã€‚",
    "code_changes_summary": "Pythonä»£ç å˜æ›´: ä¿®æ”¹æ–‡ä»¶ main.py (+15 -3 è¡Œ), æ–°å¢æ–‡ä»¶ utils.py (25 è¡Œ)ã€‚ æ€»è®¡: +40 -3 è¡Œä»£ç ã€‚",
    "report_path": ".work_tracker/reports/daily_report_2024-01-15.json"
  },
  "details": {
    "modified_files": ["main.py", "README.md"],
    "new_files": ["utils.py", "config.py"],
    "deleted_files": ["old_file.txt"],
    "commits": [...],
    "python_file_diffs": [
      {
        "file_path": "main.py",
        "diff_type": "modified",
        "added_lines": 15,
        "deleted_lines": 3,
        "changed_lines": 18,
        "diff_preview": [
          "@@ -10,6 +10,8 @@",
          " from mcp.server.fastmcp import FastMCP",
          "+from mcp.types import Completion, CompletionArgument",
          "+from mcp.types import PromptReference, ResourceTemplateReference",
          " ",
          " # Create an MCP server",
          " mcp = FastMCP(\"Demo\")",
          "+",
          "+# Add completion support",
          "+@mcp.completion()",
          "+async def handle_completion(ref, argument, context):",
          "+    return Completion(values=[\"option1\", \"option2\"])"
        ]
      }
    ]
  }
}
```

### 3. get_work_status
**åŠŸèƒ½**: è·å–å½“å‰å·¥ä½œçŠ¶æ€

**å‚æ•°**:
- `working_directory` (str): å·¥ä½œç›®å½•è·¯å¾„ï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½•

**è¿”å›**:
```json
{
  "success": true,
  "current_time": "2024-01-15T14:30:00",
  "working_directory": "/path/to/project",
  "branch_name": "main",
  "total_files": 150,
  "modified_files": ["main.py"],
  "modified_files_count": 1,
  "git_commits_count": 25,
  "python_files_count": 12,
  "today_work_sessions": 1,
  "has_work_start": true
}
```

### 4. get_daily_report
**åŠŸèƒ½**: è·å–æŒ‡å®šæ—¥æœŸçš„æ—¥æŠ¥

**å‚æ•°**:
- `date` (str): æ—¥æœŸæ ¼å¼ YYYY-MM-DDï¼Œé»˜è®¤ä¸ºä»Šå¤©

**è¿”å›**:
```json
{
  "success": true,
  "date": "2024-01-15",
  "report": {
    "date": "2024-01-15",
    "work_start_time": "09:00",
    "work_end_time": "18:00",
    "working_hours": 9.0,
    "total_commits": 3,
    "modified_files": ["main.py"],
    "new_files": ["utils.py"],
    "deleted_files": [],
    "python_file_diffs": [...],
    "commit_summary": [...],
    "work_summary": "å®Œæˆäº† 3 æ¬¡ä»£ç æäº¤ï¼Œä¿®æ”¹äº† 1 ä¸ªæ–‡ä»¶ï¼Œæ–°å¢äº† 1 ä¸ªæ–‡ä»¶ã€‚",
    "code_changes_summary": "Pythonä»£ç å˜æ›´: ä¿®æ”¹æ–‡ä»¶ main.py (+15 -3 è¡Œ), æ–°å¢æ–‡ä»¶ utils.py (25 è¡Œ)ã€‚ æ€»è®¡: +40 -3 è¡Œä»£ç ã€‚"
  }
}
```

### 5. get_python_file_diff â­
**åŠŸèƒ½**: è·å–æŒ‡å®šPythonæ–‡ä»¶çš„è¯¦ç»†å·®å¼‚ä¿¡æ¯

**å‚æ•°**:
- `file_path` (str): Pythonæ–‡ä»¶è·¯å¾„
- `working_directory` (str): å·¥ä½œç›®å½•è·¯å¾„ï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½•

**è¿”å›**:
```json
{
  "success": true,
  "file_path": "main.py",
  "diff_type": "modified",
  "added_lines": 15,
  "deleted_lines": 3,
  "changed_lines": 18,
  "diff_lines": [
    "@@ -10,6 +10,8 @@",
    " from mcp.server.fastmcp import FastMCP",
    "+from mcp.types import Completion, CompletionArgument",
    "+from mcp.types import PromptReference, ResourceTemplateReference",
    " ",
    " # Create an MCP server",
    " mcp = FastMCP(\"Demo\")",
    "+",
    "+# Add completion support",
    "+@mcp.completion()",
    "+async def handle_completion(ref, argument, context):",
    "+    return Completion(values=[\"option1\", \"option2\"])"
  ],
  "old_content": "åŸå§‹æ–‡ä»¶å†…å®¹...",
  "new_content": "æ–°æ–‡ä»¶å†…å®¹..."
}
```

## èµ„æºè®¿é—®

### å·¥ä½œçŠ¶æ€èµ„æº
```
work-status://{working_directory}
```

### æ—¥æŠ¥èµ„æº
```
daily-report://{date}
```

### Pythonæ–‡ä»¶å·®å¼‚èµ„æº â­
```
python-diff://{file_path}
```

## è‡ªå®šä¹‰è·¯ç”±

### å¥åº·æ£€æŸ¥
```
GET /health
```

### ç»Ÿè®¡ä¿¡æ¯
```
GET /stats
```

## æ•°æ®å­˜å‚¨

æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨ `.work_tracker` ç›®å½•ä¸‹ï¼š
- `work_states.json`: å·¥ä½œçŠ¶æ€è®°å½•
- `reports/`: æ—¥æŠ¥æ–‡ä»¶ç›®å½•
  - `daily_report_YYYY-MM-DD.json`: æ¯æ—¥æ—¥æŠ¥

## æŠ€æœ¯å®ç°

### æ ¸å¿ƒç»„ä»¶

1. **WorkTracker**: å·¥ä½œè·Ÿè¸ªå™¨ï¼Œè´Ÿè´£çŠ¶æ€ç®¡ç†å’Œæ—¥æŠ¥ç”Ÿæˆ
2. **WorkState**: å·¥ä½œçŠ¶æ€æ•°æ®ç»“æ„
3. **DailyReport**: æ—¥æŠ¥æ•°æ®ç»“æ„
4. **PythonFileContent**: Pythonæ–‡ä»¶å†…å®¹ç»“æ„ â­
5. **FileDiff**: æ–‡ä»¶å·®å¼‚ç»“æ„ â­

### è·Ÿè¸ªæœºåˆ¶

1. **æ–‡ä»¶å“ˆå¸Œ**: ä½¿ç”¨ SHA256 è®¡ç®—æ–‡ä»¶å“ˆå¸Œå€¼ï¼Œæ£€æµ‹æ–‡ä»¶å˜æ›´
2. **Git çŠ¶æ€**: è·Ÿè¸ª Git æäº¤è®°å½•å’ŒçŠ¶æ€å˜åŒ–
3. **æ—¶é—´ç»Ÿè®¡**: è®¡ç®—å·¥ä½œæ—¶é•¿å’Œæ•ˆç‡æŒ‡æ ‡
4. **Pythonæ–‡ä»¶å†…å®¹è·Ÿè¸ª**: è®°å½•æ‰€æœ‰Pythonæ–‡ä»¶çš„å®Œæ•´å†…å®¹ â­
5. **å·®å¼‚åˆ†æ**: ä½¿ç”¨difflibç”Ÿæˆæ ‡å‡†åŒ–çš„å·®å¼‚æ ¼å¼ â­

### å¿½ç•¥è§„åˆ™

è‡ªåŠ¨å¿½ç•¥ä»¥ä¸‹æ–‡ä»¶å’Œç›®å½•ï¼š
- `.git`, `__pycache__`, `.pytest_cache`
- `.venv`, `venv`, `node_modules`
- `.DS_Store`, `*.pyc`, `*.log`
- `.work_tracker` (æ•°æ®ç›®å½•)

## æ‰©å±•åŠŸèƒ½

### è‡ªåŠ¨è¡¥å…¨
- å·¥ä½œç›®å½•è¡¥å…¨
- æ—¥æœŸè¡¥å…¨
- Pythonæ–‡ä»¶è·¯å¾„è¡¥å…¨ â­

### æç¤ºè¯ç”Ÿæˆ
- å·¥ä½œæ‘˜è¦æç¤ºè¯
- æ”¯æŒä¸åŒé£æ ¼ï¼ˆä¸“ä¸šã€è½»æ¾ã€è¯¦ç»†ï¼‰
- é‡ç‚¹å…³æ³¨Pythonæ–‡ä»¶çš„ä¿®æ”¹å†…å®¹ â­

## ä½¿ç”¨åœºæ™¯

1. **ä¸ªäººå·¥ä½œè·Ÿè¸ª**: è®°å½•æ¯æ—¥ä»£ç å·¥ä½œå†…å®¹
2. **å›¢é˜Ÿåä½œ**: äº†è§£å›¢é˜Ÿæˆå‘˜çš„å·¥ä½œè¿›å±•
3. **é¡¹ç›®ç®¡ç†**: è·Ÿè¸ªé¡¹ç›®å¼€å‘è¿›åº¦
4. **ç»©æ•ˆè¯„ä¼°**: åŸºäºä»£ç å˜æ›´çš„å·¥ä½œé‡ç»Ÿè®¡
5. **ä»£ç å®¡æŸ¥**: åˆ†æä»£ç å˜æ›´çš„è¯¦ç»†å†…å®¹ â­
6. **LLMåˆ†æ**: ä¸ºå¤§è¯­è¨€æ¨¡å‹æä¾›ç»“æ„åŒ–çš„ä»£ç å˜æ›´æ•°æ® â­

## æ³¨æ„äº‹é¡¹

1. ç¡®ä¿å·¥ä½œç›®å½•æ˜¯ Git ä»“åº“
2. å»ºè®®æ¯å¤©ä¸Šç­æ—¶è¿è¡Œ `work_start`
3. å»ºè®®æ¯å¤©ä¸‹ç­æ—¶è¿è¡Œ `work_end`
4. æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ï¼Œæ³¨æ„å¤‡ä»½é‡è¦æ•°æ®
5. Pythonæ–‡ä»¶å†…å®¹å¯èƒ½è¾ƒå¤§ï¼Œæ³¨æ„å­˜å‚¨ç©ºé—´ â­

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Git å‘½ä»¤å¤±è´¥**: ç¡®ä¿å·¥ä½œç›®å½•æ˜¯æœ‰æ•ˆçš„ Git ä»“åº“
2. **æƒé™é”™è¯¯**: ç¡®ä¿æœ‰è¯»å†™å·¥ä½œç›®å½•çš„æƒé™
3. **æ–‡ä»¶è®¿é—®é”™è¯¯**: æ£€æŸ¥æ–‡ä»¶æ˜¯å¦è¢«å…¶ä»–ç¨‹åºå ç”¨
4. **å†…å­˜ä¸è¶³**: Pythonæ–‡ä»¶å†…å®¹è¾ƒå¤§æ—¶å¯èƒ½å ç”¨è¾ƒå¤šå†…å­˜ â­

### è°ƒè¯•æ¨¡å¼

å¯ä»¥é€šè¿‡æŸ¥çœ‹ `.work_tracker` ç›®å½•ä¸‹çš„æ—¥å¿—æ–‡ä»¶æ¥è°ƒè¯•é—®é¢˜ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

## è®¸å¯è¯

MIT License
