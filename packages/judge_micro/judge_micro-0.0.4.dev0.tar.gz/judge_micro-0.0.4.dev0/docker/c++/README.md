# é…ç½®é©…å‹• OJ å¾®æœå‹™ (C++ ç‰ˆæœ¬)

ä¸€å€‹ç¾ä»£åŒ–çš„ç·šä¸Šè©•æ¸¬ç³»çµ±ï¼ŒåŸºæ–¼ C++ å¯¦ç¾ï¼Œæ”¯æ´ç´”å‡½æ•¸å¼ä»‹é¢ï¼Œå®Œå…¨åŸºæ–¼é…ç½®æ–‡ä»¶é©…å‹•ï¼Œç„¡éœ€ä¿®æ”¹ä»»ä½•æ ¸å¿ƒä»£ç¢¼ã€‚

## âœ¨ ç‰¹è‰²

- ğŸš€ **é›¶ä»£ç¢¼ä¿®æ”¹**ï¼šharness.cpp æ°¸é ä¸éœ€è¦ä¿®æ”¹
- ğŸ¯ **ç´”å‡½æ•¸å¼**ï¼šç”¨æˆ¶å‡½æ•¸ç„¡éœ€è™•ç†å…¨å±€è®Šæ•¸
- ğŸ“ **é…ç½®é©…å‹•**ï¼šåªéœ€ä¿®æ”¹ config.json å³å¯å®šç¾©æ–°é¡Œç›®
- âš¡ **è‡ªå‹•ç·¨è­¯**ï¼šè‡ªå‹•ç”Ÿæˆæ¸¬è©¦ä»£ç¢¼ä¸¦ç·¨è­¯åŸ·è¡Œ
- ğŸ“Š **è©³ç´°å ±å‘Š**ï¼šåŒ…å«æ€§èƒ½æ¸¬é‡ã€éŒ¯èª¤æª¢æ¸¬ã€çµæœé©—è­‰
- ğŸ”§ **éˆæ´»åƒæ•¸**ï¼šæ”¯æ´ä»»æ„æ•¸é‡çš„å‡½æ•¸åƒæ•¸å’Œé¡å‹
- ğŸ’» **ç¾ä»£ C++**ï¼šä½¿ç”¨ C++17 æ¨™æº–ï¼Œé¡å‹å®‰å…¨ï¼ŒRAII ç®¡ç†
- ğŸ›¡ï¸ **éŒ¯èª¤è™•ç†**ï¼šå®Œå–„çš„ç•°å¸¸è™•ç†å’Œå ±å‘Šæ©Ÿåˆ¶
- ğŸ” **æ¨¡æ¿æ”¯æŒ**ï¼šæ”¯æ´æ³›å‹å‡½æ•¸å’Œé¡å‹æ¨å°

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ¶ä»£ç¢¼      â”‚    â”‚   é…ç½®æ–‡ä»¶      â”‚    â”‚   è©•æ¸¬å¼•æ“      â”‚
â”‚   user.cpp      â”‚    â”‚   config.json   â”‚    â”‚   harness.cpp   â”‚
â”‚   solve()å‡½æ•¸   â”‚ -> â”‚   solve_params  â”‚ -> â”‚   å‹•æ…‹ç”Ÿæˆ      â”‚
â”‚   ç´”å‡½æ•¸æ¥å£    â”‚    â”‚   types         â”‚    â”‚   ç·¨è­¯åŸ·è¡Œ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                       v
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚   çµæœå ±å‘Š      â”‚
                                              â”‚   result.json   â”‚
                                              â”‚   æ€§èƒ½çµ±è¨ˆ      â”‚
                                              â”‚   éŒ¯èª¤æª¢æ¸¬      â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ ç’°å¢ƒéœ€æ±‚

- **ç·¨è­¯å™¨**: GCC 7+ æˆ– Clang 5+ (æ”¯æ´ C++17 æ¨™æº–)
- **å‡½å¼åº«**: nlohmann/json å‡½å¼åº«
- **ç³»çµ±**: Linux/Unix ç’°å¢ƒ
- **å·¥å…·**: Make æˆ– CMake (ç”¨æ–¼è‡ªå‹•åŒ–)

### å®‰è£ä¾è³´

```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install g++ nlohmann-json3-dev make

# æˆ–è€…ä½¿ç”¨åŒ…å«çš„ single header ç‰ˆæœ¬
# ä¸éœ€è¦é¡å¤–å®‰è£ï¼Œé …ç›®å·²åŒ…å« json.hpp
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨æ¼”ç¤ºè…³æœ¬ï¼ˆæ¨è–¦æ–°æ‰‹ï¼‰

```bash
# é‹è¡Œå®Œæ•´æ¼”ç¤º
./demo.sh
```

### æ–¹æ³•äºŒï¼šæ‰‹å‹•æ­¥é©Ÿ

#### æ­¥é©Ÿ 1ï¼šç·¨è­¯ harness

```bash
# åŸºæœ¬ç·¨è­¯
g++ -std=c++17 harness.cpp -o harness

# æˆ–ä½¿ç”¨ Makefileï¼ˆæ¨è–¦ï¼‰
make build
```

#### æ­¥é©Ÿ 2ï¼šå‰µå»ºé…ç½®æ–‡ä»¶

å‰µå»º `config.json`ï¼ˆæ”¯æ´èªè¨€ç‰ˆæœ¬åƒæ•¸ï¼‰ï¼š

```json
{
  "solve_params": [
    {"name": "a", "type": "int", "input_value": 3},
    {"name": "b", "type": "int", "input_value": 4}
  ],
  "expected": {"a": 6, "b": 9},
  "function_type": "int",
  "cpp_standard": "c++20",
  "compiler_flags": "-Wall -Wextra -O2"
}
```

**æ–°å¢æ”¯æ´çš„èªè¨€ç‰ˆæœ¬åƒæ•¸ï¼š**
- `cpp_standard`ï¼šæŒ‡å®š C++ æ¨™æº– (c++11, c++14, c++17, c++20, c++23)
- `compiler_flags`ï¼šè‡ªå®šç¾©ç·¨è­¯å™¨æ¨™èªŒ

#### æ¸¬è©¦èªè¨€ç‰ˆæœ¬

```bash
# æ¸¬è©¦ä¸åŒ C++ æ¨™æº–
make test-cpp20   # ä½¿ç”¨ C++20
make test-cpp23   # ä½¿ç”¨ C++23

# ä½¿ç”¨è‡ªå®šç¾©é…ç½®
make test-config CONFIG_FILE=config_cpp20.json
```

#### æ­¥é©Ÿ 3ï¼šå¯¦ç¾ç”¨æˆ¶å‡½æ•¸

å‰µå»º `user.cpp`ï¼š

```cpp
#include <iostream>
#include "solve.hpp"

int solve(int &a, int &b) {
    std::cout << "Hello from user.cpp!" << std::endl;
    std::cout << "Input: a=" << a << ", b=" << b << std::endl;
    a = a * 2;    // a: 3 -> 6
    b = b + 5;    // b: 4 -> 9
    std::cout << "Output: a=" << a << ", b=" << b << std::endl;
    return 0;     // è¿”å› 0 è¡¨ç¤ºæˆåŠŸ
}
```

#### æ­¥é©Ÿ 4ï¼šé‹è¡Œè©•æ¸¬

```bash
./harness config.json result.json
```

#### æ­¥é©Ÿ 5ï¼šæŸ¥çœ‹çµæœ

```bash
cat result.json
```

## ğŸ“‹ é…ç½®æ–‡ä»¶è©³è§£

### åŸºæœ¬é…ç½®çµæ§‹

```json
{
  "solve_params": [
    {
      "name": "åƒæ•¸åç¨±",
      "type": "åƒæ•¸é¡å‹",
      "input_value": "åˆå§‹å€¼"
    }
  ],
  "expected": {
    "åƒæ•¸å": "æœŸæœ›å€¼"
  },
  "function_type": "è¿”å›é¡å‹",
  "timeout_ms": 5000,
  "memory_limit_mb": 512
}
```

### æ”¯æ´çš„æ•¸æ“šé¡å‹

- **æ•´æ•¸é¡å‹**: `int`, `long`, `long long`
- **æµ®é»é¡å‹**: `float`, `double`
- **å­—ç¬¦é¡å‹**: `char`, `string`
- **å¸ƒçˆ¾é¡å‹**: `bool`
- **å®¹å™¨é¡å‹**: `vector<int>`, `vector<string>` ç­‰
- **è‡ªå®šç¾©é¡å‹**: æ”¯æ´ç”¨æˆ¶å®šç¾©çš„çµæ§‹é«”

### é…ç½®ç¯„ä¾‹

#### ç¯„ä¾‹ 1ï¼šåŸºæœ¬æ•¸å­¸é‹ç®—
```json
{
  "solve_params": [
    {"name": "x", "type": "int", "input_value": 5},
    {"name": "y", "type": "int", "input_value": 3}
  ],
  "expected": {"x": 8, "y": 2},
  "function_type": "void"
}
```

å°æ‡‰çš„ç”¨æˆ¶å‡½æ•¸ï¼š
```cpp
void solve(int &x, int &y) {
    x = x + y;  // 5 + 3 = 8
    y = x - y;  // 8 - 3 = 5, ä½†æœŸæœ›æ˜¯ 2ï¼Œé€™æœƒé¡¯ç¤ºéŒ¯èª¤
}
```

#### ç¯„ä¾‹ 2ï¼šå­—ç¬¦ä¸²è™•ç†
```json
{
  "solve_params": [
    {"name": "str", "type": "string", "input_value": "hello"},
    {"name": "len", "type": "int", "input_value": 0}
  ],
  "expected": {"str": "HELLO", "len": 5},
  "function_type": "bool"
}
```

å°æ‡‰çš„ç”¨æˆ¶å‡½æ•¸ï¼š
```cpp
bool solve(std::string &str, int &len) {
    for (auto &c : str) {
        c = std::toupper(c);
    }
    len = str.length();
    return true;
}
```

#### ç¯„ä¾‹ 3ï¼šå®¹å™¨æ“ä½œ
```json
{
  "solve_params": [
    {"name": "nums", "type": "vector<int>", "input_value": [1, 2, 3, 4, 5]},
    {"name": "sum", "type": "int", "input_value": 0}
  ],
  "expected": {"nums": [2, 4, 6, 8, 10], "sum": 30},
  "function_type": "void"
}
```

å°æ‡‰çš„ç”¨æˆ¶å‡½æ•¸ï¼š
```cpp
void solve(std::vector<int> &nums, int &sum) {
    for (auto &num : nums) {
        num *= 2;
        sum += num;
    }
}
```

## ğŸ”§ é€²éšåŠŸèƒ½

### æ€§èƒ½æ¸¬é‡

ç³»çµ±è‡ªå‹•æ¸¬é‡ï¼š
- **åŸ·è¡Œæ™‚é–“**: æ¯«ç§’ç´šç²¾åº¦
- **CPU æ™‚é–“**: ç”¨æˆ¶æ…‹å’Œç³»çµ±æ…‹åˆ†åˆ¥çµ±è¨ˆ
- **å…§å­˜ä½¿ç”¨**: å³°å€¼è¨˜æ†¶é«”ä½¿ç”¨é‡
- **ç·¨è­¯æ™‚é–“**: ç·¨è­¯éšæ®µè€—æ™‚

### éŒ¯èª¤è™•ç†

æ”¯æ´å¤šç¨®éŒ¯èª¤æª¢æ¸¬ï¼š
- **ç·¨è­¯éŒ¯èª¤**: èªæ³•éŒ¯èª¤ã€å‹åˆ¥éŒ¯èª¤ç­‰
- **é‹è¡Œæ™‚éŒ¯èª¤**: åˆ†æ®µéŒ¯èª¤ã€ç•°å¸¸æ‹‹å‡ºç­‰
- **é‚è¼¯éŒ¯èª¤**: è¼¸å‡ºèˆ‡æœŸæœ›ä¸ç¬¦
- **è¶…æ™‚éŒ¯èª¤**: åŸ·è¡Œæ™‚é–“è¶…éé™åˆ¶
- **å…§å­˜éŒ¯èª¤**: å…§å­˜ä½¿ç”¨è¶…éé™åˆ¶

### çµæœè¼¸å‡ºæ ¼å¼

```json
{
  "status": "SUCCESS|COMPILE_ERROR|RUNTIME_ERROR|TIMEOUT|WRONG_ANSWER",
  "stdout": "ç¨‹åºè¼¸å‡º",
  "stderr": "éŒ¯èª¤ä¿¡æ¯",
  "time_ms": 123.45,
  "cpu_utime": 0.1,
  "cpu_stime": 0.05,
  "maxrss_mb": 15.2,
  "compile_time_ms": 567.89,
  "expected": {"a": 6, "b": 9},
  "actual": {"a": 6, "b": 8},
  "match": false
}
```

## ğŸ§ª ç¯„ä¾‹é¡Œç›®

é …ç›®åŒ…å«å¤šå€‹é è¨­ç¯„ä¾‹ï¼š

- **config_basic.json**: åŸºæœ¬æ•¸å­¸é‹ç®—
- **config_string.json**: å­—ç¬¦ä¸²è™•ç†
- **config_vector.json**: å®¹å™¨æ“ä½œ
- **config_advanced.json**: è¤‡é›œæ•¸æ“šçµæ§‹
- **config_algorithm.json**: æ¼”ç®—æ³•å¯¦ç¾

æ¯å€‹ç¯„ä¾‹éƒ½æœ‰å°æ‡‰çš„ç”¨æˆ¶ä»£ç¢¼å’ŒæœŸæœ›çµæœã€‚

## ğŸš§ ä½¿ç”¨é™åˆ¶

1. **å‡½æ•¸ç°½å**: ç”¨æˆ¶å‡½æ•¸å¿…é ˆç¬¦åˆé…ç½®æ–‡ä»¶å®šç¾©
2. **è¿”å›é¡å‹**: ç›®å‰æ”¯æ´åŸºæœ¬é¡å‹çš„è¿”å›å€¼
3. **åƒæ•¸é¡å‹**: åƒæ•¸å¿…é ˆæ˜¯å¼•ç”¨é¡å‹ä»¥æ”¯æ´ä¿®æ”¹
4. **æ¨™é ­æª”**: å¿…é ˆåŒ…å«å°æ‡‰çš„ C++ æ¨™æº–åº«é ­æ–‡ä»¶

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

1. **ç·¨è­¯å¤±è´¥**
   - æª¢æŸ¥ C++ æ¨™æº–ç‰ˆæœ¬ (éœ€è¦ C++17)
   - ç¢ºèªåŒ…å«æ­£ç¢ºçš„é ­æ–‡ä»¶
   - æª¢æŸ¥å‡½æ•¸ç°½åæ˜¯å¦èˆ‡é…ç½®åŒ¹é…

2. **é‹è¡Œæ™‚éŒ¯èª¤**
   - æª¢æŸ¥æ•¸çµ„é‚Šç•Œ
   - é¿å…ç©ºæŒ‡é‡è§£å¼•ç”¨
   - ç¢ºä¿ç•°å¸¸è™•ç†æ­£ç¢º

3. **çµæœä¸åŒ¹é…**
   - æª¢æŸ¥æ¼”ç®—æ³•é‚è¼¯
   - ç¢ºèªæ•¸æ“šé¡å‹è½‰æ›
   - æŸ¥çœ‹æ¨™æº–è¼¸å‡ºèª¿è©¦ä¿¡æ¯

### èª¿è©¦æŠ€å·§

```cpp
// ä½¿ç”¨æ¨™æº–è¼¸å‡ºé€²è¡Œèª¿è©¦
std::cout << "Debug: x = " << x << std::endl;

// ä½¿ç”¨æ–·è¨€æª¢æŸ¥æ¢ä»¶
#include <cassert>
assert(x > 0);

// ç•°å¸¸è™•ç†
try {
    // å¯èƒ½å‡ºéŒ¯çš„ä»£ç¢¼
} catch (const std::exception& e) {
    std::cerr << "Error: " << e.what() << std::endl;
}
```

## ğŸ¤ è²¢ç»æŒ‡å—

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork é …ç›®
2. å‰µå»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤è®Šæ›´
4. æ¨é€åˆ°åˆ†æ”¯
5. å‰µå»º Pull Request

## ğŸ“„ è¨±å¯è­‰

æœ¬é …ç›®æ¡ç”¨ MIT è¨±å¯è­‰ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è©³æƒ…ã€‚

## ğŸ”— ç›¸é—œé …ç›®

- [C èªè¨€ç‰ˆæœ¬](../c/README.md) - åŸå§‹ C èªè¨€å¯¦ç¾
- [Python ç‰ˆæœ¬](../python/README.md) - Python å¯¦ç¾ç‰ˆæœ¬
- [ç·šä¸Šè©•æ¸¬ç³»çµ±](https://github.com/example/oj-system) - å®Œæ•´çš„ OJ ç³»çµ±

---

**é…ç½®é©…å‹• OJ å¾®æœå‹™ C++ ç‰ˆæœ¬** - è®“ç¨‹å¼ç«¶è³½æ›´ç°¡å–®ã€æ›´å„ªé›…ï¼ ğŸ†
