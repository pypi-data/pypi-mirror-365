<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>数据集设计</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="chrome=1,IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0"/>
    <link rel="icon"  href="/static/smartui/img/favicon.ico">
    <link rel="stylesheet" href="/static/smartchart/editor/modal.css">
    <link rel="stylesheet" href="/static/smartchart/icon/iconfont.css?_=1">
    <link rel="stylesheet" href="/static/smartchart/editor/editor.css?_=1.5">
    <style>
      #preview .tbdiv{max-height: 200px;overflow: auto;border: 1px solid #ddd;}table{width:100%;}thead th{position:sticky;top:-1px;z-index:10;}
      #preview .iconfont{font-size: 12px;margin-right: 3px;cursor: pointer;user-select: none;}
      #tablelist{position:absolute;z-index:9990;top:0;right:0;padding:3px;width:25%;height:calc(100% - 5px);border-radius: 5px;background-color: #d9d4d4;display: none;overflow: auto;user-select: none}#tablelist span{color: white;margin-right:2px;border-radius:5px;font-size: 8px;padding: 2px;min-width: 50px;}.dfspan{background-color: #5c6470;cursor: pointer;}
    </style>
</head>

<body>
    <div class="editor_head">
        <div class="topclick"><a class="label" id="title"></a><ul class="ltbox2" style="margin-left:0" id="id_drill"></ul></div>
        <div class="topclick"> <a class="iconfont icondata-management" id="conn"></a><ul class="ltbox2" style="margin-left:-10px" id="id_data"></ul></div>
        <div class="topclick"><a class="iconfont iconcc-magic">工具</a><ul class="ltbox2" id="id_tool"></ul></div>
        <div class="topclick"><a class="iconfont iconzhinengti">AI</a><ul class="ltbox2" id="id_ai"></ul></div>
        <span class="devhead"><span class="iconfont icongongnengjiaosequanxianguanli"></span><select id="dsseq"></select></span>
        <span id="changedsseq"></span><a class="iconfont iconedit" title="切换调试界面" id="editorframe"></a>
        <a class="iconfont iconcopy" title="复制数据集" id="copyds"></a>
        <a class="submit-btn" id="submit">保存</a>
        <a class="iconfont iconchat"  id="id_gpt"></a>
        <a class="iconfont iconrun"  style="color: rgb(226, 207, 84);" id="runsql">执行</a>
        <span id="printlog"></span>
        <a class="iconfont iconed_setting"  style="float:right" id="editor_menu"></a>
        <a class="iconfont iconshare1" title="切换通用数据集状态" id="onoffcommon"  style="float:right"></a>
        <a class="iconfont iconShow" title="切换激活状态" id="onoff"  style="float:right"></a>
        <a class="iconfont iconhelp"  title="帮助" style="color: rgb(155, 205, 60);float:right" onclick="load_help('help_ds')"></a>
    </div>
    <div style="height: 75%;position: relative;float: left;width:100%" id="code-container">
        <div class="editor editords">
           <pre id="editor1" class="edit-area"></pre>
        </div>
    </div>
    <div id="v-handler" class="dshandler"></div>
    <div id="h-handler" class="dshandlerv"></div>
    <div  style="padding:0.5%;font-size: 10px;float: left;width:99%" id="preview"><div class="tbbt">预览执行默认限定条数200, 更多dataset使用方法,参考 <a
            href="https://www.smartchart.cn/blog/article/2019/7/9/10.html" target="_blank">数据集说明</a></div>
    </div>
<div class="modal modal-s" id="myModal">
    <div class="modal-content">
      <header class="modal-header"><span class="close" onclick="hideModal('#myModal')">×</span></header>
        <div class="modal-body">
            <pre id="preHelp" style="max-height:250px;"></pre>
        </div>
    </div>
</div>

<!-- 修改名称  -->
<div class="modal modal-s" id="modal_name">
    <div class="modal-content">
        <header class="modal-header"><span>联动钻取配置</span></header>
        <div class="modal-body">
            <div class="input-group">
                <span class="input-group-addon">数据集名称</span>
                <input type="text" class="form-control" value="" placeholder="数据集名称" id="dsname_input">
                <span class="input-group-addon" id="dsid_input">#</span>
            </div>
            <div class="input-group" id="dsdrill_label">
               <span class="input-group-addon">参数名</span>
                <input class="form-control" placeholder="目标接收参数名称" id="dsdrill_param">
               <span class="input-group-addon">联动序号</span>
                <input  class="form-control"  placeholder="1,2,3" id="dsdrill_child">
            </div>
            <div class="input-group" id="dsdrilldata_label">
                <span class="input-group-addon">传递值</span>
                <input class="form-control" style="width:380px" placeholder="data[0],seriesName,可使用F12然后点击图形查看. #代表filter" id="dsdrill_data">
            </div>
       </div>
    <div class="modal-footer">
        <button type="button" onclick="hideModal('#modal_name')">关闭</button>
        <button type="button" class="btn btn-primary" onclick="save_title()">提交</button>
    </div>
  </div>
</div>

<div class="modal" id="modal_conn">
    <div class="modal-content">
        <header class="modal-header"><span>修改数据集配置</span></header>
        <div class="modal-body">
            <div class="input-group">
            <span class="input-group-addon">数据源</span>
            <select class="form-control" id="connselect"></select>
            </div>
            <div class="input-group">
               <span class="input-group-addon" id="divtime_label">前端刷新(秒)</span>
                <input type="number" class="form-control" value=0 placeholder="大于3秒,0不刷新" id="divtime_input">
            </div>
            <div class="input-group">
               <span class="input-group-addon">缓存(分钟)(Pro)</span>
                <input type="number" class="form-control" value=30 placeholder="小于0按固定时点更新" id="dstime_input">
            </div>
             <div class="input-group">
               <span class="input-group-addon">刷新时点</span>
                <input  class="form-control" placeholder="" id="dsnexttime_input">
            </div>
       </div>
    <div class="modal-footer">
        <button type="button" onclick="hideModal('#modal_conn')">关闭</button>
        <button type="button" class="btn btn-primary" onclick="save_conn()">
            提交
        </button>
    </div>
  </div>
</div>
<script src="/static/smartchart/js/jquery-2.2.3.min.js"></script>
<script type="text/javascript" src="/static/ace/ace.js"></script>
<script type="text/javascript" src="/static/ace/ext-language_tools.js"></script>
<script type="text/javascript" src="/static/smartchart/editor/common.js?_=2.2.5"></script>
<script type="text/javascript" src="/static/smartchart/editor/ds_editor.js?_=6.8"></script>
</body>
</html>