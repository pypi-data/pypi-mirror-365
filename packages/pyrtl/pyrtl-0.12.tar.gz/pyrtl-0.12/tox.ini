[tox]
# When changing the following line, be sure to update 'python-version' in
# .github/workflows/python-test.yml
envlist = py{3.9,3.13}-test, ruff

[gh-actions]
# For GitHub Actions, this maps from Python version to tox environments to run
# with the Python version.
python =
    3.9: py3.9
    3.13: py3.13, ruff

[testenv]
deps = -rrequirements.txt
envdir = {toxworkdir}/{env_name}

setenv =
    PYTHONPATH = {toxinidir}

commands =
    pytest --cov=pyrtl --cov-report=xml -n auto {posargs}

# For ruff, override the test command and don't install PyRTL's Python package.
[testenv:ruff]
skip_install = true
commands =
    ruff check
    ruff format --diff
