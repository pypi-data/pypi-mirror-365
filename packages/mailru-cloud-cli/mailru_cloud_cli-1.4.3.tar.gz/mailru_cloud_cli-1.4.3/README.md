# Mailru Cloud CLI

[![CI](https://github.com/mueqee/mailrucloud/actions/workflows/ci.yml/badge.svg)](https://github.com/mueqee/mailrucloud/actions/workflows/ci.yml)
[![Publish](https://github.com/mueqee/mailrucloud/actions/workflows/publish.yml/badge.svg)](https://github.com/mueqee/mailrucloud/actions/workflows/publish.yml)
[![PyPI](https://img.shields.io/pypi/v/mailru-cloud-cli.svg)](https://pypi.org/project/mailru-cloud-cli/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

> –ù–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Python-CLI [Mail.ru –û–±–ª–∞–∫–∞](https://cloud.mail.ru) –∫–ª–∏–µ–Ω—Ç –¥–ª—è –º–∞–π–ª —Ä—É, —Ä–∞–±–æ—Ç–∞—é—â–∏–π —á–µ—Ä–µ–∑ WebDAV

`mailrucloud` –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–∞–π–ª–∞–º–∏ –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞: –∑–∞–≥—Ä—É–∂–∞—Ç—å, —Å–∫–∞—á–∏–≤–∞—Ç—å, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥–∏, –ø–æ–ª—É—á–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∞–π–ª–∞—Ö –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ. –ü—Ä–æ–µ–∫—Ç –≤–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω [gdrive](https://github.com/prasmussen/gdrive) –∏ —Å—Ç—Ä–µ–º–∏—Ç—Å—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–∞–∫–æ–π –∂–µ –ø—Ä–æ—Å—Ç–æ–π UX, –Ω–æ –¥–ª—è Mail.ru Cloud.

---

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
2. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
3. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
4. [–°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥](#-—Å–ø–∏—Å–æ–∫-–∫–æ–º–∞–Ω–¥)
5. [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#-–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
6. [–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è](#-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
7. [Roadmap](#-roadmap)
8. [–°–±–æ—Ä–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤](#-—Å–±–æ—Ä–∫–∞-–∏–∑-–∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤)
9. [Contributing](#-contributing)
10. [–õ–∏—Ü–µ–Ω–∑–∏—è](#-–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **–ø–∞—Ä–æ–ª–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π** Mail.ru (2FA friendly)
* –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –æ–±–ª–∞–∫–∞ (`ls`)
* –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (`upload`, `download`)
* –û–¥–Ω–æ/–¥–≤—É—Ö—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–æ–≤ (`sync push / pull / both`)
* –£–¥–∞–ª–µ–Ω–∏–µ, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ, –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ / –ø–∞–ø–æ–∫ (`rm`, `mv`)
* –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∞–π–ª–µ (`info`)
* –ß–∏—Å—Ç—ã–π –≤—ã–≤–æ–¥ –≤ CLI –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–µ emoji-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
* 100 % —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ fast-unit —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, CI –Ω–∞ GitHub Actions
* –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–æ–∑–¥–∞–Ω–∏–µ–º –≤—Å–µ—Ö –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–∞–ø–æ–∫ –≤ –æ–±–ª–∞–∫–µ (sync push)

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

> –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: Python ‚â• 3.10

### –í–∞—Ä–∏–∞–Ω—Ç 1: PyPI (—Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è)
```bash
pip install mailru-cloud-cli
```
> –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É "externally-managed-environment", –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
```bash
python3 -m venv .venv --upgrade-deps
source .venv/bin/activate
```
> –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
```
mailrucloud --help
```
### –í–∞—Ä–∏–∞–Ω—Ç 2: TestPyPI (—Ç–µ–∫—É—â–∏–µ –±–µ—Ç–∞-—Ä–µ–ª–∏–∑—ã)
```bash
python -m pip install --upgrade \
  -i https://test.pypi.org/simple \
  --extra-index-url https://pypi.org/simple \
  mailru-cloud-cli==1.4.0
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
```bash
git clone https://github.com/mueqee/mailrucloud.git
cd mailrucloud
python3 -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt
python main.py --help
```

## ‚ö°Ô∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (email + –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Mail.ru)
mailrucloud login

# 2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ—Ä–Ω—è
mailrucloud ls

# 3. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
mailrucloud upload ./photo.jpg /Photos/2024/

# 4. –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
mailrucloud download /Photos/2024/photo.jpg ./
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `~/.mailru_token.json`.

## üìö –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `login` | –í–æ–π—Ç–∏ –≤ –æ–±–ª–∞–∫–æ Mail.ru |
| `ls [REMOTE_DIR]` | –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤/–ø–∞–ø–æ–∫ (default `/`) |
| `upload <LOCAL_PATH> [--remote-path PATH]` | –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ |
| `download <REMOTE_PATH> [LOCAL_PATH]` | –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ |
| `sync [OPTIONS] <LOCAL_DIR> <REMOTE_DIR>` | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–æ–≤ |
| `rm <REMOTE_PATH>` | –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞/–ø–∞–ø–∫–∏ |
| `mv <SRC> <DST>` | –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ/–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ |
| `info <REMOTE_PATH>` | –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ |

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Ñ–ª–∞–≥ `--help` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π —Å–ø—Ä–∞–≤–∫–∏.

## üîç –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–≤–æ–¥ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞
mailrucloud ls /Documents

# –û–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –±—ç–∫–∞–ø (push)
mailrucloud sync ~/Projects /Backup --direction push

# –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∏ –¥–∞—Ç—É –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–∞
mailrucloud info /Backup/report.pdf

# –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª
mailrucloud rm /Backup/old.zip
```

## üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–æ–≤

`sync` —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π, –∫–æ–ø–∏—Ä—É—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∏–ª–∏ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã.
–£–¥–∞–ª–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ `both` –ø–æ–∫–∞ **–Ω–µ** –æ—Ç—Ä–∞–∂–∞–µ—Ç—Å—è (–±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º). –ê–ª–≥–æ—Ä–∏—Ç–º –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Ö—ç—à–µ–π –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫.

```bash
# –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
mailrucloud sync ~/Notes /CloudNotes

# –¢–æ–ª—å–∫–æ –∏–∑ –æ–±–ª–∞–∫–∞ ‚Üí –ª–æ–∫–∞–ª—å–Ω–æ
mailrucloud sync ~/Notes /CloudNotes -d pull

# –¢–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ ‚Üí –æ–±–ª–∞–∫–æ
mailrucloud sync ~/Notes /CloudNotes --direction push

# –ë—ã—Å—Ç—Ä–∞—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (8 –ø–æ—Ç–æ–∫–æ–≤)
mailrucloud sync ~/Notes /CloudNotes --direction push --threads 8

# –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ (–±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–º–µ—Ä–∞)
mailrucloud sync ~/Notes /CloudNotes --direction push --only-new

# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
mailrucloud sync ~/Notes /CloudNotes --direction push --threads 8 --only-new
```

## üõ£ Roadmap

- [x] –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–µ PyPI 
- [x] –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (sync push)
- [x] –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- [x] –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏, —Å—á—ë—Ç—á–∏–∫–æ–º —Ñ–∞–π–ª–æ–≤ –∏ –æ—Å—Ç–∞–≤—à–∏–º—Å—è –≤—Ä–µ–º–µ–Ω–µ–º
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–∏ –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ (md5) –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏/—Å–∫–∞—á–∏–≤–∞–Ω–∏—è
- [ ] –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è (–º—É–ª—å—Ç–∏—Ç—Ä–µ–¥) –∑–∞–≥—Ä—É–∑–∫–∞/—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
- [ ] –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π TUI-—Ä–µ–∂–∏–º (rich-console)
- [ ] Trusted Publishing –¥–ª—è TestPyPI –∏ PyPI (–±–µ–∑ API-—Ç–æ–∫–µ–Ω–æ–≤)
- [ ] –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Windows/macOS)
- [ ] –í—ã–≤–æ–¥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ–ø–µ—Ä–∞—Ü–∏–π —á–µ—Ä–µ–∑ `rich.progress`
- [ ] Docker-–æ–±—Ä–∞–∑ `mailrucloud` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- [ ] –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç–∞ Bash/Zsh/Fish –¥–ª—è CLI
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ —É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üõ† –°–±–æ—Ä–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **PEP 517** (setuptools). –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞:
```bash
python -m pip install --upgrade build
python -m build
```
–ò—Å—Ö–æ–¥–Ω–∏–∫–∏ –ø–∞–∫—É—é—Ç—Å—è –≤ `dist/`.

## ü§ù Contributing

Pull requests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è! –ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π:
1. –°–æ–∑–¥–∞–π—Ç–µ issue –∏–ª–∏ –æ–±—Å—É–¥–∏—Ç–µ –∏–¥–µ—é –≤ –¥–∏—Å–∫—É—Å—Å–∏–∏.
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `pytest -v` –ø—Ä–æ—Ö–æ–¥–∏—Ç –ª–æ–∫–∞–ª—å–Ω–æ.
3. –°–æ–±–ª—é–¥–∞–π—Ç–µ Conventional Commits –Ω–∞ —Ä—É—Å—Å–∫–æ–º.
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `flake8` / `mypy` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ü–∞–∫–µ—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π **MIT**. –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç ‚Äî –≤ —Ñ–∞–π–ª–µ [LICENSE](LICENSE).
