# EARS格式指南

## 介绍

EARS（Easy Approach to Requirements Syntax，需求语法简易方法）是一种用于编写清晰、可测试验收标准的结构化格式。它提供一致的模式，消除歧义并确保需求可以被验证。

## 核心EARS模式

### 1. 事件驱动需求（当...时）

**模式**：`当[触发事件]时，[系统]应当[响应]`

**用例**：由特定事件或用户操作触发的需求。

**示例**：
- 当用户点击登录按钮时，系统应当验证凭据
- 当文件上传完成时，系统应当显示成功消息
- 当会话过期时，系统应当重定向用户到登录页面
- 当提交无效数据时，系统应当显示验证错误

### 2. 条件需求（如果...那么）

**模式**：`如果[前置条件]，那么[系统]应当[响应]`

**用例**：依赖于特定条件或状态的需求。

**示例**：
- 如果用户未认证，那么系统应当拒绝访问受保护资源
- 如果文件大小超过10MB，那么系统应当拒绝上传
- 如果用户具有管理员权限，那么系统应当显示管理面板
- 如果数据库连接失败，那么系统应当显示错误消息

### 3. 状态基础需求（在...期间）

**模式**：`在[系统状态]期间，[系统]应当[响应]`

**用例**：适用于特定系统状态期间的需求。

**示例**：
- 在备份运行期间，系统应当显示进度指示器
- 在用户输入期间，系统应当显示自动建议
- 在数据加载期间，系统应当显示加载旋转器
- 在维护模式激活期间，系统应当显示维护消息

### 4. 功能特定需求（在...位置）

**模式**：`在[功能/位置]，[系统]应当[响应]`

**用例**：适用于特定功能或位置的需求。

**示例**：
- 在用户资料页面，系统应当显示用户信息
- 在搜索结果页面，系统应当高亮搜索词
- 在移动设备上，系统应当使用响应式布局
- 在管理仪表板，系统应当显示系统统计信息

## 编写指南

### 使用主动语态
- ✅ "系统应当验证输入"
- ❌ "输入应当被验证"

### 具体且可测量
- ✅ "系统应当在2秒内响应"
- ❌ "系统应当快速响应"
- ✅ "系统应当支持最多1000个并发用户"
- ❌ "系统应当处理许多用户"

### 包含可量化标准
- 响应时间："在X秒内"
- 容量限制："最多X个用户/项目/请求"
- 数据限制："文件最大X MB"
- 准确性要求："99%准确率"

### 涵盖所有场景
- **正常流程**：快乐路径场景
- **边界情况**：边界条件和限制
- **错误条件**：出错时会发生什么
- **替代流程**：实现相同目标的不同方式

## 高级EARS模式

### 组合条件
- `当[事件]且[条件]时，[系统]应当[响应]`
- `如果[条件1]且[条件2]，那么[系统]应当[响应]`

**示例**：
- 当用户提交表单且所有字段有效时，系统应当保存数据
- 如果用户已认证且具有写权限，那么系统应当允许编辑

### 否定条件
- `当[事件]且非[条件]时，[系统]应当[响应]`
- `如果非[条件]，那么[系统]应当[响应]`

**示例**：
- 当用户尝试登录且未认证时，系统应当请求凭据
- 如果用户没有管理员角色，那么系统应当隐藏管理功能

## 验证规则

### 结构验证
- 每个标准必须遵循EARS模式之一
- 使用一致的关键词（当/如果/在...期间/在...位置）
- 包含明确的系统响应

### 内容验证
- 条件必须具体且可验证
- 响应必须可测量且可观察
- 避免模糊或主观术语

### 完整性验证
- 涵盖正常和异常情况
- 包含所有相关的边界条件
- 考虑系统的所有状态

## 常见错误和修正

### 错误：模糊条件
❌ "当用户输入错误信息时，系统应当处理错误"
✅ "当用户输入无效邮箱格式时，系统应当显示'请输入有效邮箱地址'错误消息"

### 错误：不可测量响应
❌ "系统应当提供良好的用户体验"
✅ "系统应当在3秒内加载页面并显示内容"

### 错误：缺少具体条件
❌ "如果出现问题，系统应当显示错误"
✅ "如果网络连接超时，系统应当显示'连接超时，请重试'消息"

## 质量检查清单

### EARS格式合规性
- [ ] 每个标准使用正确的EARS关键词
- [ ] 条件清晰且具体
- [ ] 响应可测量且可验证
- [ ] 语法结构一致

### 内容质量
- [ ] 涵盖正常流程
- [ ] 包含错误处理
- [ ] 考虑边界情况
- [ ] 避免实现细节

### 可测试性
- [ ] 每个标准都可以编写测试
- [ ] 条件可以被设置或模拟
- [ ] 响应可以被观察和验证
- [ ] 包含明确的成功/失败标准

## 实际应用示例

### 用户认证功能
```markdown
#### 验收标准
1. 当用户输入有效用户名和密码时，系统应当在2秒内授予访问权限
2. 当用户输入无效凭据时，系统应当显示"用户名或密码错误"消息
3. 如果用户连续3次登录失败，那么系统应当锁定账户15分钟
4. 在账户锁定期间，系统应当显示"账户已锁定，请15分钟后重试"消息
5. 在登录页面，系统应当提供"忘记密码"链接
```

### 文件上传功能
```markdown
#### 验收标准
1. 当用户选择有效文件时，系统应当显示文件名和大小
2. 如果文件大小超过5MB，那么系统应当显示"文件大小不能超过5MB"错误
3. 在文件上传期间，系统应当显示进度条和百分比
4. 当上传完成时，系统应当显示"上传成功"确认消息
5. 如果上传失败，那么系统应当显示具体错误原因并提供重试选项
```

### 搜索功能
```markdown
#### 验收标准
1. 当用户输入搜索词时，系统应当在输入停止0.5秒后显示建议
2. 当用户点击搜索按钮时，系统应当在3秒内返回结果
3. 如果没有找到结果，那么系统应当显示"未找到相关结果"消息
4. 在搜索结果页面，系统应当高亮显示搜索词
5. 如果搜索词少于2个字符，那么系统应当显示"请输入至少2个字符"提示
```

## 最佳实践

1. **保持一致性**：在整个项目中使用相同的EARS模式
2. **具体化**：避免模糊或通用的描述
3. **可测试**：确保每个标准都可以编写自动化测试
4. **完整性**：涵盖所有重要的用户场景
5. **简洁性**：每个标准专注于单一行为
6. **可验证**：包含明确的成功标准

EARS格式为创建清晰、可测试的需求提供了强大的框架，确保开发团队和利益相关者对期望行为有共同理解。
