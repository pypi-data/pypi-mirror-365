[2025-07-30 09:03:52,908] INFO: 检查 Chrome 
[2025-07-30 09:03:52,909] INFO: 检测到已安装 Chrome,版本: 138.0.7204.169
[2025-07-30 09:03:52,910] INFO: Chrome 已安装，跳过安装。
[2025-07-30 09:03:52,911] INFO: 尝试连接 RabbitMQ 服务器
[2025-07-30 09:03:53,922] INFO: 建立 RabbitMQ 连接
[2025-07-30 09:03:54,172] INFO: 释放 RabbitMQ 资源
[2025-07-30 09:04:04,463] INFO: 检查 Chrome 
[2025-07-30 09:04:04,463] INFO: 检测到已安装 Chrome,版本: 138.0.7204.169
[2025-07-30 09:04:04,465] INFO: Chrome 已安装，跳过安装。
[2025-07-30 09:04:04,465] INFO: 尝试连接 RabbitMQ 服务器
[2025-07-30 09:04:05,475] INFO: 建立 RabbitMQ 连接
[2025-07-30 09:04:06,482] INFO: Pika version 1.3.2 connecting to ('106.52.213.169', 5672)
[2025-07-30 09:04:06,490] INFO: Socket connected: <socket.socket fd=1848, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('192.168.15.86', 12286), raddr=('106.52.213.169', 5672)>
[2025-07-30 09:04:06,491] INFO: Streaming transport linked up: (<pika.adapters.utils.io_services_utils._AsyncPlaintextTransport object at 0x000001A04E1A77C0>, _StreamingProtocolShim: <SelectConnection PROTOCOL transport=<pika.adapters.utils.io_services_utils._AsyncPlaintextTransport object at 0x000001A04E1A77C0> params=<ConnectionParameters host=106.52.213.169 port=5672 virtual_host=/ ssl=False>>).
[2025-07-30 09:04:07,722] INFO: AMQPConnector - reporting success: <SelectConnection OPEN transport=<pika.adapters.utils.io_services_utils._AsyncPlaintextTransport object at 0x000001A04E1A77C0> params=<ConnectionParameters host=106.52.213.169 port=5672 virtual_host=/ ssl=False>>
[2025-07-30 09:04:07,723] INFO: AMQPConnectionWorkflow - reporting success: <SelectConnection OPEN transport=<pika.adapters.utils.io_services_utils._AsyncPlaintextTransport object at 0x000001A04E1A77C0> params=<ConnectionParameters host=106.52.213.169 port=5672 virtual_host=/ ssl=False>>
[2025-07-30 09:04:07,724] INFO: Connection workflow succeeded: <SelectConnection OPEN transport=<pika.adapters.utils.io_services_utils._AsyncPlaintextTransport object at 0x000001A04E1A77C0> params=<ConnectionParameters host=106.52.213.169 port=5672 virtual_host=/ ssl=False>>
[2025-07-30 09:04:07,724] INFO: Created channel=1
[2025-07-30 09:04:08,469] INFO: 开始心跳
[2025-07-30 09:04:08,470] INFO: 连接成功，开始消费
[2025-07-30 09:04:08,470] INFO: 连接成功，开始消费心跳 ,1753837448470
[2025-07-30 09:04:09,485] INFO: 设置 RabbitMQ,并启动消费
[2025-07-30 09:04:09,485] INFO: 设置 RabbitMQ,并启动消费线程池活跃数：0 ,1753837448470
[2025-07-30 09:04:10,927] INFO: 开始消费任务
[2025-07-30 09:04:11,934] INFO: 线程池活跃数：0 ,1753837451934
[2025-07-30 09:04:12,940] INFO: 提交任务给线程池 ,1753837451934
[2025-07-30 09:04:12,942] INFO: data {"task_job": "command.tiktok.order.service.OrderService@getOrderList", "params": "{\"type_id\":5,\"task_id\":56439,\"shop_global_id\":3,\"shop_id\":10}"}
[2025-07-30 09:04:13,497] INFO: 心跳 ,1753837453497
[2025-07-30 09:04:13,948] INFO: 线程池活跃数：1 ,1753837453948
[2025-07-30 09:04:13,993] INFO: 获取任务 strat
[2025-07-30 09:04:14,503] INFO: 线程池活跃数：1 ,1753837453497
[2025-07-30 09:04:14,905] INFO: 获取任务 end {'status': 1, 'message': '获取成功', 'data': {'params': {'shop_id': '8651368964344416098', 'site': 'SG'}}, 'time': 1753837454, 'ip': '119.122.113.212'}
[2025-07-30 09:04:14,954] INFO: 提交任务给线程池 ,1753837453948
[2025-07-30 09:04:14,956] INFO: data {"task_job": "command.tiktok.product.service.ProductService@getShopProductList", "params": "{\"type_id\":3,\"task_id\":54725,\"shop_global_id\":5,\"shop_id\":20}"}
[2025-07-30 09:04:15,294] INFO: root_dir: D:\work\project\www\wwwroot\colordove\colordove_auto\colordove_auto
[2025-07-30 09:04:15,294] INFO: script_path: D:\work\project\www\wwwroot\colordove\colordove_auto\colordove_auto\mitmdump.py
[2025-07-30 09:04:15,295] INFO: log_file_path: D:\work\project\www\wwwroot\colordove\colordove_auto\colordove_auto\log\mitm_logs\mitmdump_62992.log
[2025-07-30 09:04:15,959] INFO: 线程池活跃数：2 ,1753837455959
[2025-07-30 09:04:16,004] INFO: 获取任务 strat
[2025-07-30 09:04:16,127] INFO: 获取任务 end {'status': 1, 'message': '获取成功', 'data': {'params': {'shop_id': '8651222570423190775', 'site': 'SG'}}, 'time': 1753837455, 'ip': '119.122.113.212'}
[2025-07-30 09:04:16,221] INFO: root_dir: D:\work\project\www\wwwroot\colordove\colordove_auto\colordove_auto
[2025-07-30 09:04:16,221] INFO: script_path: D:\work\project\www\wwwroot\colordove\colordove_auto\colordove_auto\mitmdump.py
[2025-07-30 09:04:16,222] INFO: log_file_path: D:\work\project\www\wwwroot\colordove\colordove_auto\colordove_auto\log\mitm_logs\mitmdump_29995.log
[2025-07-30 09:04:16,557] INFO: 释放 RabbitMQ 资源
[2025-07-30 09:04:17,569] INFO: 心跳停止，等待重连
[2025-07-30 09:04:17,580] INFO: Closing channel (0): 'Normal shutdown' on <Channel number=1 OPEN conn=<SelectConnection OPEN transport=<pika.adapters.utils.io_services_utils._AsyncPlaintextTransport object at 0x000001A04E1A77C0> params=<ConnectionParameters host=106.52.213.169 port=5672 virtual_host=/ ssl=False>>>
[2025-07-30 09:04:17,588] INFO: Received <Channel.CloseOk> on <Channel number=1 CLOSING conn=<SelectConnection OPEN transport=<pika.adapters.utils.io_services_utils._AsyncPlaintextTransport object at 0x000001A04E1A77C0> params=<ConnectionParameters host=106.52.213.169 port=5672 virtual_host=/ ssl=False>>>
[2025-07-30 09:04:17,588] INFO: Closing connection (200): Normal shutdown
[2025-07-30 09:04:17,588] INFO: Closing connection (200): 'Normal shutdown'
[2025-07-30 09:04:17,598] INFO: Aborting transport connection: state=1; <socket.socket fd=1848, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('192.168.15.86', 12286), raddr=('106.52.213.169', 5672)>
[2025-07-30 09:04:17,598] INFO: _AsyncTransportBase._initate_abort(): Initiating abrupt asynchronous transport shutdown: state=1; error=None; <socket.socket fd=1848, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('192.168.15.86', 12286), raddr=('106.52.213.169', 5672)>
[2025-07-30 09:04:17,602] INFO: Deactivating transport: state=1; <socket.socket fd=1848, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('192.168.15.86', 12286), raddr=('106.52.213.169', 5672)>
[2025-07-30 09:04:17,603] INFO: AMQP stack terminated, failed to connect, or aborted: opened=True, error-arg=None; pending-error=ConnectionClosedByClient: (200) 'Normal shutdown'
[2025-07-30 09:04:17,603] INFO: Stack terminated due to ConnectionClosedByClient: (200) 'Normal shutdown'
[2025-07-30 09:04:17,604] INFO: Closing transport socket and unlinking: state=3; <socket.socket fd=1848, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('192.168.15.86', 12286), raddr=('106.52.213.169', 5672)>
[2025-07-30 09:04:17,604] INFO: User-initiated close: result=BlockingConnection__OnClosedArgs(connection=<SelectConnection CLOSED transport=None params=<ConnectionParameters host=106.52.213.169 port=5672 virtual_host=/ ssl=False>>, error=ConnectionClosedByClient: (200) 'Normal shutdown')
[2025-07-30 09:04:18,319] INFO: ❌ mitmdump 启动失败，错误日志:
[2025-07-30 09:04:18,320] INFO: ✅ 参数加载成功： {'user_agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36', 'browser_major_version': '137', 'lang': {'browser': 'zh-CN,en-US,zh-HK', 'browser_interface': 'zh-CN', 'header': 'zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7,zh-HK;q=0.6'}, 'timezone': 'Asia/Shanghai', 'ip': {'http': {'ip': '47.112.14.29', 'port': 12457, 'account': 'auto', 'password': 'NHbvbCw14H4kmOtd'}}, 'screen_size': {'width': 1920, 'height': 1080}}
[2025-07-30 09:04:18,322] INFO: 
[2025-07-30 09:04:18,322] INFO: ✅ mitmproxy 已启动，本地监听 62992
[2025-07-30 09:04:18,324] INFO: user_data_dir C:\Users\ADMINI~1\AppData\Local\Temp\tmpf8szqnyi
[2025-07-30 09:04:18,324] INFO: 检测是否已经有该用户目录对应的 Chrome 在运行
[2025-07-30 09:04:18,371] INFO: HTTP 代理
[2025-07-30 09:04:18,372] INFO: proxy_server http://127.0.0.1:62992
[2025-07-30 09:04:18,373] INFO: 设置指纹信息
[2025-07-30 09:04:18,373] INFO: Windows
[2025-07-30 09:04:18,373] INFO: 获取驱动路径 start
[2025-07-30 09:04:18,374] INFO: Chrome Version: 138.0.7204.169
[2025-07-30 09:04:18,374] INFO: Windows driver_path 类型: <class 'pathlib.WindowsPath'>, 值: D:\work\project\www\wwwroot\colordove\colordove_auto\colordove_auto\drive\chrome\chromedriver\windows\138.exe
[2025-07-30 09:04:18,374] INFO: 最终的 driver_path: D:\work\project\www\wwwroot\colordove\colordove_auto\colordove_auto\drive\chrome\chromedriver\windows\138.exe
[2025-07-30 09:04:18,375] INFO: 获取驱动路径 end
[2025-07-30 09:04:18,375] INFO: 启动驱动，驱动路径: D:\work\project\www\wwwroot\colordove\colordove_auto\colordove_auto\drive\chrome\chromedriver\windows\138.exe
[2025-07-30 09:04:19,234] INFO: ❌ mitmdump 启动失败，错误日志:
[2025-07-30 09:04:19,247] INFO: 设置驱动指纹信息
[2025-07-30 09:04:19,248] INFO: 设置驱动语言
[2025-07-30 09:04:19,257] INFO: Traceback (most recent call last):
[2025-07-30 09:04:19,257] INFO:   File "c:\program files\python\lib\runpy.py", line 194, in _run_module_as_main
[2025-07-30 09:04:19,257] INFO:     return _run_code(code, main_globals, None,
[2025-07-30 09:04:19,258] INFO:   File "c:\program files\python\lib\runpy.py", line 87, in _run_code
[2025-07-30 09:04:19,258] INFO:     exec(code, run_globals)
[2025-07-30 09:04:19,258] INFO:   File "C:\Program Files\python\Scripts\mitmdump.exe\__main__.py", line 4, in <module>
[2025-07-30 09:04:19,259] INFO:   File "c:\program files\python\lib\site-packages\mitmproxy\tools\main.py", line 8, in <module>
[2025-07-30 09:04:19,259] INFO:     from mitmproxy import exceptions, master
[2025-07-30 09:04:19,259] INFO:   File "c:\program files\python\lib\site-packages\mitmproxy\master.py", line 7, in <module>
[2025-07-30 09:04:19,260] INFO:     from mitmproxy import eventsequence
[2025-07-30 09:04:19,260] INFO:   File "c:\program files\python\lib\site-packages\mitmproxy\eventsequence.py", line 5, in <module>
[2025-07-30 09:04:19,260] INFO:     from mitmproxy import http
[2025-07-30 09:04:19,261] INFO:   File "c:\program files\python\lib\site-packages\mitmproxy\http.py", line 25, in <module>
[2025-07-30 09:04:19,261] INFO:     from mitmproxy.websocket import WebSocketData
[2025-07-30 09:04:19,261] INFO:   File "c:\program files\python\lib\site-packages\mitmproxy\websocket.py", line 15, in <module>
[2025-07-30 09:04:19,262] INFO:     from wsproto.frame_protocol import Opcode
[2025-07-30 09:04:19,262] INFO:   File "c:\program files\python\lib\site-packages\wsproto\__init__.py", line 9, in <module>
[2025-07-30 09:04:19,263] INFO:     from .connection import Connection, ConnectionState, ConnectionType
[2025-07-30 09:04:19,263] INFO:   File "c:\program files\python\lib\site-packages\wsproto\connection.py", line 12, in <module>
[2025-07-30 09:04:19,263] INFO:     from .events import (
[2025-07-30 09:04:19,266] INFO:   File "c:\program files\python\lib\site-packages\wsproto\events.py", line 261, in <module>
[2025-07-30 09:04:19,267] INFO:     class Ping(Event):
[2025-07-30 09:04:19,267] INFO:   File "c:\program files\python\lib\dataclasses.py", line 1011, in wrap
[2025-07-30 09:04:19,267] INFO:     return _process_class(cls, init, repr, eq, order, unsafe_hash, frozen)
[2025-07-30 09:04:19,268] INFO:   File "c:\program files\python\lib\dataclasses.py", line 973, in _process_class
[2025-07-30 09:04:19,268] INFO:     for fn in _frozen_get_del_attr(cls, field_list, globals):
[2025-07-30 09:04:19,268] INFO:   File "c:\program files\python\lib\dataclasses.py", line 563, in _frozen_get_del_attr
[2025-07-30 09:04:19,268] INFO:     _create_fn('__delattr__',
[2025-07-30 09:04:19,269] INFO:   File "c:\program files\python\lib\dataclasses.py", line 398, in _create_fn
[2025-07-30 09:04:19,269] INFO:     exec(txt, globals, ns)
[2025-07-30 09:04:19,269] INFO:   File "<string>", line 1, in <module>
[2025-07-30 09:04:19,270] INFO: KeyboardInterrupt
[2025-07-30 09:04:19,270] INFO: 
[2025-07-30 09:04:19,271] INFO: ✅ mitmproxy 已启动，本地监听 29995
[2025-07-30 09:04:19,271] INFO: user_data_dir C:\Users\ADMINI~1\AppData\Local\Temp\tmp8mc9vil6
[2025-07-30 09:04:19,272] INFO: 检测是否已经有该用户目录对应的 Chrome 在运行
[2025-07-30 09:04:19,338] INFO: HTTP 代理
[2025-07-30 09:04:19,339] INFO: proxy_server http://127.0.0.1:29995
[2025-07-30 09:04:19,340] INFO: 设置指纹信息
[2025-07-30 09:04:19,341] INFO: Windows
[2025-07-30 09:04:19,341] INFO: 获取驱动路径 start
[2025-07-30 09:04:19,342] INFO: Chrome Version: 138.0.7204.169
[2025-07-30 09:04:19,343] INFO: Windows driver_path 类型: <class 'pathlib.WindowsPath'>, 值: D:\work\project\www\wwwroot\colordove\colordove_auto\colordove_auto\drive\chrome\chromedriver\windows\138.exe
[2025-07-30 09:04:19,343] INFO: Windows driver_path 类型: <class 'pathlib.WindowsPath'>, 值: D:\work\project\www\wwwroot\colordove\colordove_auto\colordove_auto\drive\chrome\chromedriver\windows\138.exe设置驱动屏幕尺寸
[2025-07-30 09:04:19,343] INFO: 最终的 driver_path: D:\work\project\www\wwwroot\colordove\colordove_auto\colordove_auto\drive\chrome\chromedriver\windows\138.exe
[2025-07-30 09:04:19,345] INFO: 获取驱动路径 end
[2025-07-30 09:04:19,345] INFO: 启动驱动，驱动路径: D:\work\project\www\wwwroot\colordove\colordove_auto\colordove_auto\drive\chrome\chromedriver\windows\138.exe
[2025-07-30 09:04:19,353] INFO: 设置驱动时间
[2025-07-30 09:04:19,392] INFO: 修改平台信息
[2025-07-30 09:04:19,446] INFO: 设置WebGPU
[2025-07-30 09:04:19,474] INFO: 设置触屏
[2025-07-30 09:04:19,479] INFO: 设置电池
[2025-07-30 09:04:19,482] INFO: 模拟内存，CPU
[2025-07-30 09:04:19,485] INFO: WebGL 伪装注入
[2025-07-30 09:04:19,487] INFO: Canvas 伪装注入
[2025-07-30 09:04:19,488] INFO: shop_global_id 3
[2025-07-30 09:04:19,488] INFO: seed 3972778110
[2025-07-30 09:04:19,539] INFO: module_path command.tiktok.order.service.OrderService
[2025-07-30 09:04:19,561] INFO: class_name OrderService
[2025-07-30 09:04:19,567] INFO: method_name getOrderList
[2025-07-30 09:04:19,584] INFO: 🌐 使用缓存尝试自动登录
[2025-07-30 09:04:19,673] WARNING: Connection pool is full, discarding connection: localhost. Connection pool size: 1
[2025-07-30 09:04:19,780] WARNING: Connection pool is full, discarding connection: localhost. Connection pool size: 1
[2025-07-30 09:04:19,887] WARNING: Connection pool is full, discarding connection: localhost. Connection pool size: 1
[2025-07-30 09:04:19,909] INFO: 注入缓存成功
[2025-07-30 09:04:20,271] INFO: 设置驱动指纹信息
[2025-07-30 09:04:20,271] INFO: 设置驱动语言
[2025-07-30 09:04:20,351] INFO: 设置驱动屏幕尺寸
[2025-07-30 09:04:20,389] INFO: 设置驱动时间
[2025-07-30 09:04:20,429] INFO: 修改平台信息
[2025-07-30 09:04:20,432] INFO: 设置WebGPU
[2025-07-30 09:04:20,435] INFO: 设置触屏
[2025-07-30 09:04:20,438] INFO: 设置电池
[2025-07-30 09:04:20,441] INFO: 模拟内存，CPU
[2025-07-30 09:04:20,444] INFO: WebGL 伪装注入
[2025-07-30 09:04:20,447] INFO: Canvas 伪装注入
[2025-07-30 09:04:20,448] INFO: shop_global_id 5
[2025-07-30 09:04:20,448] INFO: seed 3839507327
[2025-07-30 09:04:20,455] INFO: module_path command.tiktok.product.service.ProductService
[2025-07-30 09:04:20,460] INFO: class_name ProductService
[2025-07-30 09:04:20,460] INFO: method_name getShopProductList
[2025-07-30 09:04:22,073] WARNING: Connection pool is full, discarding connection: localhost. Connection pool size: 1
[2025-07-30 09:04:22,077] INFO: 任务用时：9.133577823638916秒
[2025-07-30 09:04:22,077] INFO: 任务失败 {"error_code": "99999", "error_msg": "未知异常", "error_response": "Message: unknown error: net::ERR_PROXY_CONNECTION_FAILED\n  (Session info: chrome=138.0.7204.169)\nStacktrace:\n\tGetHandleVerifier [0x0x7ff6bc596f95+76917]\n\tGetHandleVerifier [0x0x7ff6bc596ff0+77008]\n\t(No symbol) [0x0x7ff6bc349dea]\n\t(No symbol) [0x0x7ff6bc346ba5]\n\t(No symbol) [0x0x7ff6bc337879]\n\t(No symbol) [0x0x7ff6bc339631]\n\t(No symbol) [0x0x7ff6bc337b96]\n\t(No symbol) [0x0x7ff6bc3375f6]\n\t(No symbol) [0x0x7ff6bc3372ba]\n\t(No symbol) [0x0x7ff6bc334e8b]\n\t(No symbol) [0x0x7ff6bc33570c]\n\t(No symbol) [0x0x7ff6bc34dd9a]\n\t(No symbol) [0x0x7ff6bc3f143e]\n\t(No symbol) [0x0x7ff6bc3c846a]\n\t(No symbol) [0x0x7ff6bc3f065c]\n\t(No symbol) [0x0x7ff6bc3c8243]\n\t(No symbol) [0x0x7ff6bc391431]\n\t(No symbol) [0x0x7ff6bc3921c3]\n\tGetHandleVerifier [0x0x7ff6bc86d2cd+3051437]\n\tGetHandleVerifier [0x0x7ff6bc867923+3028483]\n\tGetHandleVerifier [0x0x7ff6bc8858bd+3151261]\n\tGetHandleVerifier [0x0x7ff6bc5b185e+185662]\n\tGetHandleVerifier [0x0x7ff6bc5b971f+218111]\n\tGetHandleVerifier [0x0x7ff6bc59fb14+112628]\n\tGetHandleVerifier [0x0x7ff6bc59fcc9+113065]\n\tGetHandleVerifier [0x0x7ff6bc586c98+10616]\n\tBaseThreadInitThunk [0x0x7ffdaa3a7034+20]\n\tRtlUserThreadStart [0x0x7ffdabf22651+33]\n", "error_file": "c:\\program files\\python\\lib\\site-packages\\selenium\\webdriver\\remote\\errorhandler.py", "error_line": 232, "run_duration": 9.133577823638916, "task_id": 56439}
[2025-07-30 09:04:22,078] INFO: 完成任务 strat
[2025-07-30 09:04:22,206] INFO: 完成任务 end
[2025-07-30 09:04:22,588] WARNING: Connection pool is full, discarding connection: localhost. Connection pool size: 1
[2025-07-30 09:04:22,588] INFO: 任务用时：7.631388425827026秒
[2025-07-30 09:04:22,590] INFO: 任务失败 {"error_code": "99999", "error_msg": "未知异常", "error_response": "Message: unknown error: net::ERR_PROXY_CONNECTION_FAILED\n  (Session info: chrome=138.0.7204.169)\nStacktrace:\n\tGetHandleVerifier [0x0x7ff6bc596f95+76917]\n\tGetHandleVerifier [0x0x7ff6bc596ff0+77008]\n\t(No symbol) [0x0x7ff6bc349dea]\n\t(No symbol) [0x0x7ff6bc346ba5]\n\t(No symbol) [0x0x7ff6bc337879]\n\t(No symbol) [0x0x7ff6bc339631]\n\t(No symbol) [0x0x7ff6bc337b96]\n\t(No symbol) [0x0x7ff6bc3375f6]\n\t(No symbol) [0x0x7ff6bc3372ba]\n\t(No symbol) [0x0x7ff6bc334e8b]\n\t(No symbol) [0x0x7ff6bc33570c]\n\t(No symbol) [0x0x7ff6bc34dd9a]\n\t(No symbol) [0x0x7ff6bc3f143e]\n\t(No symbol) [0x0x7ff6bc3c846a]\n\t(No symbol) [0x0x7ff6bc3f065c]\n\t(No symbol) [0x0x7ff6bc3c8243]\n\t(No symbol) [0x0x7ff6bc391431]\n\t(No symbol) [0x0x7ff6bc3921c3]\n\tGetHandleVerifier [0x0x7ff6bc86d2cd+3051437]\n\tGetHandleVerifier [0x0x7ff6bc867923+3028483]\n\tGetHandleVerifier [0x0x7ff6bc8858bd+3151261]\n\tGetHandleVerifier [0x0x7ff6bc5b185e+185662]\n\tGetHandleVerifier [0x0x7ff6bc5b971f+218111]\n\tGetHandleVerifier [0x0x7ff6bc59fb14+112628]\n\tGetHandleVerifier [0x0x7ff6bc59fcc9+113065]\n\tGetHandleVerifier [0x0x7ff6bc586c98+10616]\n\tBaseThreadInitThunk [0x0x7ffdaa3a7034+20]\n\tRtlUserThreadStart [0x0x7ffdabf22651+33]\n", "error_file": "c:\\program files\\python\\lib\\site-packages\\selenium\\webdriver\\remote\\errorhandler.py", "error_line": 232, "run_duration": 7.631388425827026, "task_id": 54725}
[2025-07-30 09:04:22,590] INFO: 完成任务 strat
[2025-07-30 09:04:22,720] INFO: 完成任务 end
[2025-07-30 09:04:23,392] INFO: 消息处理完成 ,1753837452942
[2025-07-30 09:04:23,890] INFO: 消息处理完成 ,1753837454956
[2025-07-30 09:04:25,317] ERROR: Exception ignored in: <module 'threading' from 'c:\\program files\\python\\lib\\threading.py'>
[2025-07-30 09:04:25,317] ERROR: Traceback (most recent call last):
[2025-07-30 09:04:25,319] ERROR:   File "c:\program files\python\lib\threading.py", line 1388, in _shutdown
[2025-07-30 09:04:25,321] ERROR:     lock.acquire()
[2025-07-30 09:04:25,321] ERROR: KeyboardInterrupt: 
[2025-07-30 09:09:01,020] INFO: 检查 Chrome 
[2025-07-30 09:09:01,020] INFO: 检测到已安装 Chrome,版本: 138.0.7204.169
[2025-07-30 09:09:01,022] INFO: Chrome 已安装，跳过安装。
[2025-07-30 09:09:01,023] INFO: 尝试连接 RabbitMQ 服务器
[2025-07-30 09:09:02,025] INFO: 建立 RabbitMQ 连接
[2025-07-30 09:09:03,032] INFO: Pika version 1.3.2 connecting to ('106.52.213.169', 5672)
[2025-07-30 09:09:03,040] INFO: Socket connected: <socket.socket fd=664, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('192.168.15.86', 12476), raddr=('106.52.213.169', 5672)>
[2025-07-30 09:09:03,041] INFO: Streaming transport linked up: (<pika.adapters.utils.io_services_utils._AsyncPlaintextTransport object at 0x000001EA31EA77F0>, _StreamingProtocolShim: <SelectConnection PROTOCOL transport=<pika.adapters.utils.io_services_utils._AsyncPlaintextTransport object at 0x000001EA31EA77F0> params=<ConnectionParameters host=106.52.213.169 port=5672 virtual_host=/ ssl=False>>).
[2025-07-30 09:09:03,128] INFO: AMQPConnector - reporting success: <SelectConnection OPEN transport=<pika.adapters.utils.io_services_utils._AsyncPlaintextTransport object at 0x000001EA31EA77F0> params=<ConnectionParameters host=106.52.213.169 port=5672 virtual_host=/ ssl=False>>
[2025-07-30 09:09:03,129] INFO: AMQPConnectionWorkflow - reporting success: <SelectConnection OPEN transport=<pika.adapters.utils.io_services_utils._AsyncPlaintextTransport object at 0x000001EA31EA77F0> params=<ConnectionParameters host=106.52.213.169 port=5672 virtual_host=/ ssl=False>>
[2025-07-30 09:09:03,130] INFO: Connection workflow succeeded: <SelectConnection OPEN transport=<pika.adapters.utils.io_services_utils._AsyncPlaintextTransport object at 0x000001EA31EA77F0> params=<ConnectionParameters host=106.52.213.169 port=5672 virtual_host=/ ssl=False>>
[2025-07-30 09:09:03,130] INFO: Created channel=1
[2025-07-30 09:09:03,154] INFO: 开始心跳
[2025-07-30 09:09:03,154] INFO: 连接成功，开始消费
[2025-07-30 09:09:03,154] INFO: 连接成功，开始消费心跳 ,1753837743154
[2025-07-30 09:09:04,157] INFO: 设置 RabbitMQ,并启动消费
[2025-07-30 09:09:04,157] INFO: 设置 RabbitMQ,并启动消费线程池活跃数：0 ,1753837743154
[2025-07-30 09:09:05,187] INFO: 开始消费任务
[2025-07-30 09:09:06,200] INFO: 线程池活跃数：0 ,1753837746200
[2025-07-30 09:09:07,207] INFO: 提交任务给线程池 ,1753837746200
[2025-07-30 09:09:07,209] INFO: data {"task_job": "command.tiktok.product.service.OptimizerService@getOptimizerTitle", "params": "{\"type_id\":7,\"task_id\":54860,\"shop_global_id\":4,\"shop_id\":14}"}
[2025-07-30 09:09:08,169] INFO: 心跳 ,1753837748169
[2025-07-30 09:09:08,214] INFO: 线程池活跃数：1 ,1753837748214
[2025-07-30 09:09:08,259] INFO: 获取任务 strat
[2025-07-30 09:09:09,174] INFO: 线程池活跃数：1 ,1753837748169
[2025-07-30 09:09:09,219] INFO: 提交任务给线程池 ,1753837748214
[2025-07-30 09:09:09,221] INFO: data {"task_job": "command.tiktok.product.service.OptimizerService@getOptimizerTitle", "params": "{\"type_id\":7,\"task_id\":54862,\"shop_global_id\":4,\"shop_id\":16}"}
[2025-07-30 09:09:09,500] INFO: 获取任务 end {'status': 1, 'message': '获取成功', 'data': {'params': {'shop_id': '8651222585325094411', 'site': 'PH'}}, 'time': 1753837749, 'ip': '119.122.113.212'}
[2025-07-30 09:09:10,226] INFO: 线程池活跃数：2 ,1753837750226
[2025-07-30 09:09:10,271] INFO: 获取任务 strat
[2025-07-30 09:09:10,532] INFO: 获取任务 end {'status': 1, 'message': '获取成功', 'data': {'params': {'shop_id': '7496295319872965131', 'site': 'TH'}}, 'time': 1753837750, 'ip': '119.122.113.212'}
[2025-07-30 09:09:11,231] INFO: 提交任务给线程池 ,1753837750226
[2025-07-30 09:09:11,233] INFO: data {"task_job": "command.tiktok.order.service.OrderService@getOrderList", "params": "{\"type_id\":5,\"task_id\":54699,\"shop_global_id\":5,\"shop_id\":21}"}
[2025-07-30 09:09:11,401] INFO: root_dir: c:\program files\python\lib\site-packages\colordove_auto
[2025-07-30 09:09:11,401] INFO: PYTHONPATH c:\program files\python\lib\site-packages\colordove_auto
[2025-07-30 09:09:11,402] INFO: script_path: c:\program files\python\lib\site-packages\colordove_auto\mitmdump.py
[2025-07-30 09:09:11,403] INFO: log_file_path: c:\program files\python\lib\site-packages\colordove_auto\log\mitm_logs\mitmdump_11174.log
[2025-07-30 09:09:11,910] INFO: root_dir: c:\program files\python\lib\site-packages\colordove_auto
[2025-07-30 09:09:11,911] INFO: PYTHONPATH c:\program files\python\lib\site-packages\colordove_auto
[2025-07-30 09:09:11,912] INFO: script_path: c:\program files\python\lib\site-packages\colordove_auto\mitmdump.py
[2025-07-30 09:09:11,914] INFO: log_file_path: c:\program files\python\lib\site-packages\colordove_auto\log\mitm_logs\mitmdump_29095.log
[2025-07-30 09:09:12,236] INFO: 线程池活跃数：3 ,1753837752236
[2025-07-30 09:09:12,296] INFO: 获取任务 strat
[2025-07-30 09:09:12,332] INFO: 获取任务 end {'status': 1, 'message': '获取成功', 'data': {'params': {'shop_id': '7496295621220796663', 'site': 'TH'}}, 'time': 1753837752, 'ip': '119.122.113.212'}
[2025-07-30 09:09:13,182] INFO: 心跳 ,1753837753182
[2025-07-30 09:09:13,242] INFO: 提交任务给线程池 ,1753837752236
[2025-07-30 09:09:13,243] INFO: data {"task_job": "command.tiktok.product.service.OptimizerService@getOptimizerTitle", "params": "{\"type_id\":7,\"task_id\":54867,\"shop_global_id\":5,\"shop_id\":19}"}
[2025-07-30 09:09:13,920] INFO: root_dir: c:\program files\python\lib\site-packages\colordove_auto
[2025-07-30 09:09:13,920] INFO: PYTHONPATH c:\program files\python\lib\site-packages\colordove_auto
[2025-07-30 09:09:13,922] INFO: script_path: c:\program files\python\lib\site-packages\colordove_auto\mitmdump.py
[2025-07-30 09:09:13,923] INFO: log_file_path: c:\program files\python\lib\site-packages\colordove_auto\log\mitm_logs\mitmdump_22125.log
[2025-07-30 09:09:14,187] INFO: 线程池活跃数：4 ,1753837753182
[2025-07-30 09:09:14,247] INFO: 线程池活跃数：4 ,1753837754247
[2025-07-30 09:09:14,292] INFO: 获取任务 strat
[2025-07-30 09:09:14,412] INFO: ✅ mitmdump 启动成功，进程ID: 77976
[2025-07-30 09:09:14,412] INFO: 日志文件: c:\program files\python\lib\site-packages\colordove_auto\log\mitm_logs\mitmdump_11174.log
[2025-07-30 09:09:14,414] INFO: ✅ mitmproxy 已启动，本地监听 11174
[2025-07-30 09:09:14,415] INFO: user_data_dir C:\Users\ADMINI~1\AppData\Local\Temp\tmpae79r_kt
[2025-07-30 09:09:14,416] INFO: 检测是否已经有该用户目录对应的 Chrome 在运行
[2025-07-30 09:09:14,467] INFO: HTTP 代理
[2025-07-30 09:09:14,467] INFO: proxy_server http://127.0.0.1:11174
[2025-07-30 09:09:14,468] INFO: 设置指纹信息
[2025-07-30 09:09:14,468] INFO: Windows
[2025-07-30 09:09:14,468] INFO: 获取驱动路径 start
[2025-07-30 09:09:14,469] INFO: Chrome Version: 138.0.7204.169
[2025-07-30 09:09:14,469] INFO: chrome_major: 138
[2025-07-30 09:09:14,469] INFO: driver_filename: 138.exe
[2025-07-30 09:09:14,937] INFO: ✅ mitmdump 启动成功，进程ID: 76956
[2025-07-30 09:09:14,937] INFO: 日志文件: c:\program files\python\lib\site-packages\colordove_auto\log\mitm_logs\mitmdump_29095.log
[2025-07-30 09:09:14,940] INFO: ✅ mitmproxy 已启动，本地监听 29095
[2025-07-30 09:09:14,944] INFO: user_data_dir C:\Users\ADMINI~1\AppData\Local\Temp\tmpyd9lush3
[2025-07-30 09:09:14,944] INFO: 检测是否已经有该用户目录对应的 Chrome 在运行
[2025-07-30 09:09:15,000] INFO: HTTP 代理
[2025-07-30 09:09:15,001] INFO: HTTP 代理获取任务 end {'status': 1, 'message': '获取成功', 'data': {'params': {'shop_id': '8651222609185244407', 'site': 'PH'}}, 'time': 1753837754, 'ip': '119.122.113.212'}
[2025-07-30 09:09:15,001] INFO: proxy_server http://127.0.0.1:29095
[2025-07-30 09:09:15,003] INFO: 设置指纹信息
[2025-07-30 09:09:15,005] INFO: Windows
[2025-07-30 09:09:15,005] INFO: 获取驱动路径 start
[2025-07-30 09:09:15,006] INFO: Chrome Version: 138.0.7204.169
[2025-07-30 09:09:15,006] INFO: chrome_major: 138
[2025-07-30 09:09:15,006] INFO: driver_filename: 138.exe
[2025-07-30 09:09:15,252] INFO: 提交任务给线程池 ,1753837754247
[2025-07-30 09:09:15,254] INFO: data {"task_job": "command.tiktok.order.service.OrderService@getOrderList", "params": "{\"type_id\":5,\"task_id\":54751,\"shop_global_id\":5,\"shop_id\":22}"}
[2025-07-30 09:09:15,302] INFO: root_dir: c:\program files\python\lib\site-packages\colordove_auto
[2025-07-30 09:09:15,304] INFO: 任务用时：8.093704462051392秒
[2025-07-30 09:09:15,304] INFO: 任务失败 {"error_code": "99999", "error_msg": "未知异常", "error_response": "'str' object has no attribute 'exists'", "error_file": "c:\\program files\\python\\lib\\site-packages\\colordove_auto\\common\\library\\Chrome.py", "error_line": 499, "run_duration": 8.093704462051392, "task_id": 54860}
[2025-07-30 09:09:15,304] INFO: 完成任务 strat
[2025-07-30 09:09:15,360] INFO: 完成任务 end
[2025-07-30 09:09:15,816] INFO: root_dir: c:\program files\python\lib\site-packages\colordove_auto
[2025-07-30 09:09:15,816] INFO: 任务用时：6.592968463897705秒
[2025-07-30 09:09:15,817] INFO: 任务失败 {"error_code": "99999", "error_msg": "未知异常", "error_response": "'str' object has no attribute 'exists'", "error_file": "c:\\program files\\python\\lib\\site-packages\\colordove_auto\\common\\library\\Chrome.py", "error_line": 499, "run_duration": 6.592968463897705, "task_id": 54862}
[2025-07-30 09:09:15,818] INFO: 完成任务 strat
[2025-07-30 09:09:15,860] INFO: 完成任务 end
[2025-07-30 09:09:15,869] INFO: root_dir: c:\program files\python\lib\site-packages\colordove_auto
[2025-07-30 09:09:15,869] INFO: PYTHONPATH c:\program files\python\lib\site-packages\colordove_auto
[2025-07-30 09:09:15,870] INFO: script_path: c:\program files\python\lib\site-packages\colordove_auto\mitmdump.py
[2025-07-30 09:09:15,870] INFO: log_file_path: c:\program files\python\lib\site-packages\colordove_auto\log\mitm_logs\mitmdump_29020.log
[2025-07-30 09:09:16,257] INFO: 线程池活跃数：5 ,1753837756257
[2025-07-30 09:09:16,317] INFO: 获取任务 strat
[2025-07-30 09:09:16,358] INFO: 获取任务 end {'status': 1, 'message': '获取成功', 'data': {'params': {'shop_id': '8651223465590293751', 'site': 'VN'}}, 'time': 1753837756, 'ip': '119.122.113.212'}
[2025-07-30 09:09:16,390] INFO: 消息处理完成 ,1753837747209
[2025-07-30 09:09:16,901] INFO: 消息处理完成 ,1753837749221
[2025-07-30 09:09:16,933] INFO: ✅ mitmdump 启动成功，进程ID: 67104
[2025-07-30 09:09:16,933] INFO: 日志文件: c:\program files\python\lib\site-packages\colordove_auto\log\mitm_logs\mitmdump_22125.log
[2025-07-30 09:09:16,934] INFO: ✅ mitmproxy 已启动，本地监听 22125
[2025-07-30 09:09:16,934] INFO: user_data_dir C:\Users\ADMINI~1\AppData\Local\Temp\tmp2cvio9b4
[2025-07-30 09:09:16,934] INFO: 检测是否已经有该用户目录对应的 Chrome 在运行
[2025-07-30 09:09:16,991] INFO: HTTP 代理
[2025-07-30 09:09:16,991] INFO: proxy_server http://127.0.0.1:22125
[2025-07-30 09:09:16,992] INFO: 设置指纹信息
[2025-07-30 09:09:16,992] INFO: Windows
[2025-07-30 09:09:16,993] INFO: 获取驱动路径 start
[2025-07-30 09:09:16,993] INFO: Chrome Version: 138.0.7204.169
[2025-07-30 09:09:16,993] INFO: chrome_major: 138
[2025-07-30 09:09:16,993] INFO: driver_filename: 138.exe
[2025-07-30 09:09:17,233] INFO: root_dir: c:\program files\python\lib\site-packages\colordove_auto
[2025-07-30 09:09:17,233] INFO: PYTHONPATH c:\program files\python\lib\site-packages\colordove_auto
[2025-07-30 09:09:17,237] INFO: script_path: c:\program files\python\lib\site-packages\colordove_auto\mitmdump.py
[2025-07-30 09:09:17,239] INFO: log_file_path: c:\program files\python\lib\site-packages\colordove_auto\log\mitm_logs\mitmdump_48768.log
[2025-07-30 09:09:17,253] INFO: 释放 RabbitMQ 资源
[2025-07-30 09:09:17,414] INFO: 未找到 colordove-auto 包的安装路径
[2025-07-30 09:09:17,415] INFO: root_dir: 
[2025-07-30 09:09:17,416] INFO: 任务用时：6.181668996810913秒
[2025-07-30 09:09:17,416] INFO: 任务失败 {"error_code": "99999", "error_msg": "未知异常", "error_response": "'str' object has no attribute 'exists'", "error_file": "c:\\program files\\python\\lib\\site-packages\\colordove_auto\\common\\library\\Chrome.py", "error_line": 499, "run_duration": 6.181668996810913, "task_id": 54699}
[2025-07-30 09:09:17,416] INFO: 完成任务 strat
[2025-07-30 09:09:17,905] INFO: 完成任务 end
[2025-07-30 09:09:18,196] INFO: 线程池活跃数：3 ,1753837758196
[2025-07-30 09:09:18,887] INFO: ❌ mitmdump 启动失败，错误日志:
[2025-07-30 09:09:18,889] INFO: ✅ 参数加载成功： {'user_agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36', 'browser_major_version': '137', 'lang': {'browser': 'zh-CN,en-US,zh-HK', 'browser_interface': 'zh-CN', 'header': 'zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7,zh-HK;q=0.6'}, 'timezone': 'Asia/Shanghai', 'ip': {'http': {'ip': '47.112.14.63', 'port': 12457, 'account': 'auto', 'password': 'NHbvbCw14H4kmOtd'}}, 'screen_size': {'width': 1920, 'height': 1080}}
[2025-07-30 09:09:18,890] INFO: 
[2025-07-30 09:09:18,891] INFO: ✅ mitmproxy 已启动，本地监听 29020
[2025-07-30 09:09:18,892] INFO: user_data_dir C:\Users\ADMINI~1\AppData\Local\Temp\tmp8568y6p_
[2025-07-30 09:09:18,892] INFO: 检测是否已经有该用户目录对应的 Chrome 在运行
[2025-07-30 09:09:18,940] INFO: HTTP 代理
[2025-07-30 09:09:18,940] INFO: proxy_server http://127.0.0.1:29020
[2025-07-30 09:09:18,966] INFO: 设置指纹信息
[2025-07-30 09:09:18,967] INFO: 设置指纹信息消息处理完成 ,1753837751233
[2025-07-30 09:09:18,967] INFO: Windows
[2025-07-30 09:09:18,967] INFO: 获取驱动路径 start
[2025-07-30 09:09:18,968] INFO: Chrome Version: 138.0.7204.169
[2025-07-30 09:09:18,968] INFO: chrome_major: 138
[2025-07-30 09:09:18,968] INFO: driver_filename: 138.exe
[2025-07-30 09:09:18,995] INFO: 未找到 colordove-auto 包的安装路径
[2025-07-30 09:09:18,995] INFO: root_dir: 
[2025-07-30 09:09:18,996] INFO: 任务用时：5.752394199371338秒
[2025-07-30 09:09:18,996] INFO: 任务失败 {"error_code": "99999", "error_msg": "未知异常", "error_response": "'str' object has no attribute 'exists'", "error_file": "c:\\program files\\python\\lib\\site-packages\\colordove_auto\\common\\library\\Chrome.py", "error_line": 499, "run_duration": 5.752394199371338, "task_id": 54867}
[2025-07-30 09:09:18,997] INFO: 完成任务 strat
[2025-07-30 09:09:19,034] INFO: 完成任务 end
[2025-07-30 09:09:19,062] INFO: 消息处理完成 ,1753837753243
[2025-07-30 09:09:19,202] INFO: 提交任务给线程池 ,1753837758196
[2025-07-30 09:09:19,204] INFO: data {"task_job": "command.tiktok.product.service.OptimizerService@getOptimizerTitle", "params": "{\"type_id\":7,\"task_id\":54863,\"shop_global_id\":4,\"shop_id\":17}"}
[2025-07-30 09:09:20,074] ERROR: Exception ignored in: <module 'threading' from 'c:\\program files\\python\\lib\\threading.py'>
[2025-07-30 09:09:20,074] ERROR: Traceback (most recent call last):
[2025-07-30 09:09:20,075] ERROR:   File "c:\program files\python\lib\threading.py", line 1388, in _shutdown
[2025-07-30 09:09:20,076] ERROR:     lock.acquire()
[2025-07-30 09:09:20,076] ERROR: KeyboardInterrupt: 
