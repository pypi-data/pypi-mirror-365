Metadata-Version: 2.4
Name: rs_audio_stats
Version: 1.1.9
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Rust
Classifier: Topic :: Multimedia :: Sound/Audio :: Analysis
Summary: Professional-grade audio analysis tool with EBU R128 loudness measurement
Keywords: audio,loudness,ebu-r128,analysis,normalization
Author: Hiroshi Tamura
License: MIT
Requires-Python: >=3.10
Description-Content-Type: text/markdown; charset=UTF-8; variant=GFM
Project-URL: Homepage, https://github.com/hiroshi-tamura/rs_audio_stats
Project-URL: Repository, https://github.com/hiroshi-tamura/rs_audio_stats

# rs_audio_stats

Professional-grade audio analysis tool with EBU R128 loudness measurement for Python.

## æ¦‚è¦

rs_audio_statsã¯ã€EBU R128æ¨™æº–ï¼ˆITU-R BS.1770-4ï¼‰ã«æº–æ‹ ã—ãŸãƒ©ã‚¦ãƒ‰ãƒã‚¹æ¸¬å®šã€çœŸã®ãƒ”ãƒ¼ã‚¯æ¤œå‡ºã€RMSè¨ˆç®—ã€éŸ³å£°æ­£è¦åŒ–æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹åŒ…æ‹¬çš„ãªéŸ³å£°è§£æãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install rs_audio_stats
```

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

```python
import rs_audio_stats as ras

# éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è§£æ
info, results = ras.analyze_audio("audio.wav", True, False, False, False, True, False, False)
print(f"çµ±åˆãƒ©ã‚¦ãƒ‰ãƒã‚¹: {results.integrated_loudness:.1f} LUFS")
print(f"çœŸã®ãƒ”ãƒ¼ã‚¯: {results.true_peak:.1f} dBFS")

# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸€æ‹¬è§£æ
results = ras.batch_analyze_directory("audio_folder/", True, False, False, False, True, False, False)
for file_path, (info, analysis) in results.items():
    print(f"{file_path}: {analysis.integrated_loudness:.1f} LUFS")
```

## ğŸ“– å®Œå…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

å…¨æ©Ÿèƒ½ã®è©³ç´°ãªä½¿ç”¨æ–¹æ³•ã¨ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ **[GitHubãƒªãƒã‚¸ãƒˆãƒª](https://github.com/hiroshi-tamura/rs_audio_stats/blob/master/lib_python/COMPLETE_API_REFERENCE.md)** ã§ã”è¦§ã„ãŸã ã‘ã¾ã™ã€‚

## ğŸ“Š éŸ³å£°æƒ…å ±ã®å–å¾—

### ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ãƒ¼ãƒˆã€ãƒãƒ£ãƒ³ãƒãƒ«ã€ãƒ“ãƒƒãƒˆæ·±åº¦ã®å–å¾— (-sr, -ch, -bt)

```python
import rs_audio_stats as ras

# éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±ã‚’å–å¾—
info = ras.get_audio_info_py("audio.wav")

print(f"ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ãƒ¼ãƒˆ: {info.sample_rate} Hz")        # 44100 Hz
print(f"ãƒãƒ£ãƒ³ãƒãƒ«æ•°: {info.channels}")                 # 2
print(f"ãƒ“ãƒƒãƒˆæ·±åº¦: {info.bit_depth} bit")              # 16 bit
print(f"ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: {info.sample_format}")      # PCM
```

### å†ç”Ÿæ™‚é–“ã®å–å¾— (-du, -tm)

```python
import rs_audio_stats as ras

info = ras.get_audio_info_py("audio.wav")

print(f"å†ç”Ÿæ™‚é–“ï¼ˆç§’ï¼‰: {info.duration_seconds:.2f} ç§’")     # 183.45 ç§’
print(f"å†ç”Ÿæ™‚é–“ï¼ˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¸ˆã¿ï¼‰: {info.duration_formatted}")  # 03:03.45
```

### ç·ã‚µãƒ³ãƒ—ãƒ«æ•°ã¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¤œå‡º (-f, -fe, -fea)

```python
import rs_audio_stats as ras

info = ras.get_audio_info_py("audio.wav")

print(f"ç·ã‚µãƒ³ãƒ—ãƒ«æ•°: {info.total_samples:,} ã‚µãƒ³ãƒ—ãƒ«")  # 8,088,000 ã‚µãƒ³ãƒ—ãƒ«

# ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºè¨ˆç®—
file_size = info.total_samples * info.channels * (info.bit_depth // 8)
print(f"è¨ˆç®—ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: {file_size:,} ãƒã‚¤ãƒˆ")       # 32,352,000 ãƒã‚¤ãƒˆ
```

## ğŸšï¸ EBU R128 ãƒ©ã‚¦ãƒ‰ãƒã‚¹è§£æ

### çµ±åˆãƒ©ã‚¦ãƒ‰ãƒã‚¹æ¸¬å®š (-i)

```python
import rs_audio_stats as ras

# çµ±åˆãƒ©ã‚¦ãƒ‰ãƒã‚¹ã‚’æ¸¬å®š
info, results = ras.analyze_audio("audio.wav", integrated_loudness=True)

print(f"çµ±åˆãƒ©ã‚¦ãƒ‰ãƒã‚¹: {results.integrated_loudness:.1f} LUFS")

# æ”¾é€åŸºæº–ãƒã‚§ãƒƒã‚¯
if results.integrated_loudness >= -23.0:
    print("âœ… EBU R128æ”¾é€åŸºæº–ï¼ˆ-23 LUFSï¼‰ã‚’æº€ãŸã—ã¦ã„ã¾ã™")
else:
    print(f"âš ï¸ åŸºæº–ã‚ˆã‚Šä½ã„ã§ã™")
```

### çŸ­æœŸãƒ»ãƒ¢ãƒ¼ãƒ¡ãƒ³ã‚¿ãƒªãƒ©ã‚¦ãƒ‰ãƒã‚¹æ¸¬å®š (-s, -m)

```python
import rs_audio_stats as ras

# çŸ­æœŸï¼ˆ3ç§’ï¼‰ãƒ»ãƒ¢ãƒ¼ãƒ¡ãƒ³ã‚¿ãƒªï¼ˆ400msï¼‰ãƒ©ã‚¦ãƒ‰ãƒã‚¹ã‚’æ¸¬å®š
info, results = ras.analyze_audio("audio.wav", 
    short_term_loudness=True, momentary_loudness=True)

print(f"çŸ­æœŸãƒ©ã‚¦ãƒ‰ãƒã‚¹: {results.short_term_loudness:.1f} LUFS")
print(f"ãƒ¢ãƒ¼ãƒ¡ãƒ³ã‚¿ãƒªãƒ©ã‚¦ãƒ‰ãƒã‚¹: {results.momentary_loudness:.1f} LUFS")
```

### ãƒ©ã‚¦ãƒ‰ãƒã‚¹ç¯„å›²ã¨ãƒ”ãƒ¼ã‚¯æ¸¬å®š (-l, -tp)

```python
import rs_audio_stats as ras

# ãƒ©ã‚¦ãƒ‰ãƒã‚¹ç¯„å›²ï¼ˆLRAï¼‰ã¨çœŸã®ãƒ”ãƒ¼ã‚¯ã‚’æ¸¬å®š
info, results = ras.analyze_audio("audio.wav", 
    loudness_range=True, true_peak=True)

print(f"ãƒ©ã‚¦ãƒ‰ãƒã‚¹ç¯„å›²: {results.loudness_range:.1f} LU")
print(f"çœŸã®ãƒ”ãƒ¼ã‚¯: {results.true_peak:.1f} dBFS")

# ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒ¬ãƒ³ã‚¸è©•ä¾¡
if results.loudness_range > 15.0:
    print("ğŸµ é«˜ã„ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒ¬ãƒ³ã‚¸")
elif results.loudness_range > 7.0:
    print("ğŸ¶ é©åº¦ãªãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒ¬ãƒ³ã‚¸")
else:
    print("ğŸ“» åœ§ç¸®ã•ã‚ŒãŸéŸ³æº")
```

### RMSæ¸¬å®š (-rm, -ra)

```python
import rs_audio_stats as ras

# RMSæœ€å¤§å€¤ãƒ»å¹³å‡å€¤ã‚’æ¸¬å®š
info, results = ras.analyze_audio("audio.wav", 
    rms_max=True, rms_average=True)

print(f"RMSæœ€å¤§å€¤: {results.rms_max:.1f} dBFS")
print(f"RMSå¹³å‡å€¤: {results.rms_average:.1f} dBFS")
print(f"RMSãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒ¬ãƒ³ã‚¸: {results.rms_max - results.rms_average:.1f} dB")
```

### å…¨ãƒ©ã‚¦ãƒ‰ãƒã‚¹æŒ‡æ¨™ã®ä¸€æ‹¬æ¸¬å®š

```python
import rs_audio_stats as ras

# ã™ã¹ã¦ã®æŒ‡æ¨™ã‚’ä¸€åº¦ã«æ¸¬å®š
info, results = ras.analyze_audio_all("audio.wav")

print("=== å…¨ãƒ©ã‚¦ãƒ‰ãƒã‚¹æŒ‡æ¨™ ===")
print(f"çµ±åˆãƒ©ã‚¦ãƒ‰ãƒã‚¹: {results.integrated_loudness:.1f} LUFS")
print(f"çŸ­æœŸãƒ©ã‚¦ãƒ‰ãƒã‚¹: {results.short_term_loudness:.1f} LUFS") 
print(f"ãƒ¢ãƒ¼ãƒ¡ãƒ³ã‚¿ãƒªãƒ©ã‚¦ãƒ‰ãƒã‚¹: {results.momentary_loudness:.1f} LUFS")
print(f"ãƒ©ã‚¦ãƒ‰ãƒã‚¹ç¯„å›²: {results.loudness_range:.1f} LU")
print(f"çœŸã®ãƒ”ãƒ¼ã‚¯: {results.true_peak:.1f} dBFS")
print(f"RMSæœ€å¤§å€¤: {results.rms_max:.1f} dBFS")
print(f"RMSå¹³å‡å€¤: {results.rms_average:.1f} dBFS")
```

## ğŸ›ï¸ éŸ³å£°æ­£è¦åŒ–

### çœŸã®ãƒ”ãƒ¼ã‚¯æ­£è¦åŒ– (-norm-tp)

```python
import rs_audio_stats as ras

# çœŸã®ãƒ”ãƒ¼ã‚¯ã‚’-1.0 dBFSã«æ­£è¦åŒ–
ras.normalize_true_peak("input.wav", -1.0, "output_peak.wav")

# ä¾¿åˆ©ãªãƒ©ãƒƒãƒ‘ãƒ¼é–¢æ•°
ras.normalize_to_dbfs("input.wav", -1.0)  # è‡ªå‹•ã§ input_peaked.wav ã‚’ç”Ÿæˆ
```

### çµ±åˆãƒ©ã‚¦ãƒ‰ãƒã‚¹æ­£è¦åŒ– (-norm-i)

```python
import rs_audio_stats as ras

# æ”¾é€ç”¨ï¼ˆ-23 LUFSï¼‰ã«æ­£è¦åŒ–
ras.normalize_integrated_loudness("input.wav", -23.0, "broadcast.wav")

# ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆç”¨ï¼ˆ-16 LUFSï¼‰ã«æ­£è¦åŒ–  
ras.normalize_integrated_loudness("input.wav", -16.0, "podcast.wav")

# ä¾¿åˆ©ãªãƒ©ãƒƒãƒ‘ãƒ¼é–¢æ•°
ras.normalize_to_lufs("input.wav", -23.0)  # è‡ªå‹•ã§ input_normalized.wav ã‚’ç”Ÿæˆ
```

### çŸ­æœŸãƒ»ãƒ¢ãƒ¼ãƒ¡ãƒ³ã‚¿ãƒªãƒ©ã‚¦ãƒ‰ãƒã‚¹æ­£è¦åŒ– (-norm-s, -norm-m)

```python
import rs_audio_stats as ras

# çŸ­æœŸãƒ©ã‚¦ãƒ‰ãƒã‚¹æ­£è¦åŒ–
ras.normalize_short_term_loudness("input.wav", -18.0, "short_term.wav")

# ãƒ¢ãƒ¼ãƒ¡ãƒ³ã‚¿ãƒªãƒ©ã‚¦ãƒ‰ãƒã‚¹æ­£è¦åŒ–
ras.normalize_momentary_loudness("input.wav", -16.0, "momentary.wav")
```

### RMSæ­£è¦åŒ– (-norm-rm, -norm-ra)

```python
import rs_audio_stats as ras

# RMSæœ€å¤§å€¤æ­£è¦åŒ–
ras.normalize_rms_max("input.wav", -12.0, "rms_max.wav")

# RMSå¹³å‡å€¤æ­£è¦åŒ–
ras.normalize_rms_average("input.wav", -20.0, "rms_avg.wav")
```

## ğŸ”„ ãƒãƒƒãƒå‡¦ç†

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸€æ‹¬è§£æ

```python
import rs_audio_stats as ras

# ãƒ•ã‚©ãƒ«ãƒ€å†…ã®å…¨éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è§£æ
results = ras.batch_analyze_directory("audio_folder/", 
    integrated_loudness=True, true_peak=True, loudness_range=True)

print(f"è§£æãƒ•ã‚¡ã‚¤ãƒ«æ•°: {len(results)}")

# çµ±è¨ˆæƒ…å ±
loudness_values = []
for file_path, (info, analysis) in results.items():
    filename = file_path.split("\\")[-1]  # ãƒ•ã‚¡ã‚¤ãƒ«åã®ã¿
    print(f"{filename}: {analysis.integrated_loudness:.1f} LUFS")
    loudness_values.append(analysis.integrated_loudness)

avg_loudness = sum(loudness_values) / len(loudness_values)
print(f"å¹³å‡ãƒ©ã‚¦ãƒ‰ãƒã‚¹: {avg_loudness:.1f} LUFS")
```

### çµæœã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ (-csv, -tsv, -xml, -json)

```python
import rs_audio_stats as ras

# ãƒãƒƒãƒè§£æå®Ÿè¡Œ
results = ras.batch_analyze_directory("audio_folder/", 
    integrated_loudness=True, true_peak=True, loudness_range=True)

# å„å½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
ras.export_to_csv(results, "analysis_results.csv")
ras.export_to_tsv(results, "analysis_results.tsv") 
ras.export_to_xml(results, "analysis_results.xml")
ras.export_to_json(results, "analysis_results.json")

print("âœ… å…¨å½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå®Œäº†")
```

## ğŸ¯ å®Ÿç”¨ä¾‹

### æ”¾é€ç”¨å“è³ªãƒã‚§ãƒƒã‚¯

```python
import rs_audio_stats as ras

def broadcast_check(file_path):
    info, results = ras.analyze_audio_all(file_path)
    
    issues = []
    if results.integrated_loudness < -24.0 or results.integrated_loudness > -22.0:
        issues.append(f"ãƒ©ã‚¦ãƒ‰ãƒã‚¹åŸºæº–å¤–: {results.integrated_loudness:.1f} LUFS")
    if results.true_peak > -1.0:
        issues.append(f"ãƒ”ãƒ¼ã‚¯éå¤§: {results.true_peak:.1f} dBFS")
    
    if not issues:
        print("âœ… æ”¾é€åŸºæº–é©åˆ")
    else:
        for issue in issues:
            print(f"âŒ {issue}")

broadcast_check("broadcast_content.wav")
```

### éŸ³æ¥½ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ç”¨æœ€é©åŒ–

```python
import rs_audio_stats as ras

def optimize_for_streaming(input_file, platform="spotify"):
    targets = {
        "spotify": -14.0,    # LUFS
        "apple_music": -16.0,
        "youtube": -14.0
    }
    
    target_lufs = targets.get(platform, -14.0)
    output_file = f"{input_file.split('.')[0]}_{platform}.wav"
    
    # ãƒ”ãƒ¼ã‚¯æ­£è¦åŒ– â†’ ãƒ©ã‚¦ãƒ‰ãƒã‚¹æ­£è¦åŒ–
    temp_file = "temp_peak.wav"
    ras.normalize_true_peak(input_file, -1.0, temp_file)
    ras.normalize_integrated_loudness(temp_file, target_lufs, output_file)
    
    import os
    os.remove(temp_file)  # ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤
    
    print(f"âœ… {platform}ç”¨æœ€é©åŒ–å®Œäº†: {output_file}")

optimize_for_streaming("my_song.wav", "spotify")
```

### ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆç”¨ãƒãƒƒãƒå‡¦ç†

```python
import rs_audio_stats as ras
import os

def process_podcast_episodes(episodes_folder, output_folder):
    os.makedirs(output_folder, exist_ok=True)
    
    for file in os.listdir(episodes_folder):
        if file.endswith(('.wav', '.mp3', '.flac')):
            input_path = os.path.join(episodes_folder, file)
            output_path = os.path.join(output_folder, f"podcast_{file}")
            
            # ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆæ¨å¥¨è¨­å®šï¼ˆ-16 LUFS, -3 dBFSï¼‰
            temp_file = os.path.join(output_folder, f"temp_{file}")
            ras.normalize_true_peak(input_path, -3.0, temp_file)
            ras.normalize_integrated_loudness(temp_file, -16.0, output_path)
            os.remove(temp_file)
            
            print(f"âœ… å‡¦ç†å®Œäº†: {file}")

process_podcast_episodes("raw_episodes/", "ready_episodes/")
```

## ğŸ“‹ ä¾¿åˆ©ãªé–¢æ•°

```python
import rs_audio_stats as ras

# ç°¡å˜ã«ãƒ©ã‚¦ãƒ‰ãƒã‚¹ã®ã¿å–å¾—
loudness = ras.get_loudness("audio.wav")
print(f"ãƒ©ã‚¦ãƒ‰ãƒã‚¹: {loudness:.1f} LUFS")

# ç°¡å˜ã«çœŸã®ãƒ”ãƒ¼ã‚¯ã®ã¿å–å¾—  
peak = ras.get_true_peak("audio.wav")
print(f"çœŸã®ãƒ”ãƒ¼ã‚¯: {peak:.1f} dBFS")
```

## å¯¾å¿œãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

- **ãƒ­ã‚¹ãƒ¬ã‚¹**: WAV, FLAC, WavPack, Monkey's Audio
- **éå¯é€†åœ§ç¸®**: MP3, AAC/M4A, OGG/Vorbis, Opus
- **ãã®ä»–**: Symphoniaãƒ‡ã‚³ãƒ¼ãƒ€ãƒ¼çµŒç”±ã§å¤šæ•°å¯¾å¿œ

## å‹•ä½œç’°å¢ƒ

- **Python**: 3.10ä»¥ä¸Š
- **OS**: Windows, macOS, Linux
- **ä¾å­˜é–¢ä¿‚**: ãªã—ï¼ˆãƒã‚¤ãƒŠãƒªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼‰

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License
