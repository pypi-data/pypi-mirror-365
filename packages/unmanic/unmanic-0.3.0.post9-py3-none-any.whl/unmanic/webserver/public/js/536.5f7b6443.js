"use strict";(globalThis["webpackChunkunmanic_frontend"]=globalThis["webpackChunkunmanic_frontend"]||[]).push([[536],{7652:(e,l,n)=>{n.r(l),n.d(l,{default:()=>ce});var t=n(2444);const o={class:"q-pa-none"},i={class:"row"},a={class:"col q-ma-sm"};function s(e,l,n,s,c,r){const u=(0,t.E1)("PluginsInstalledTable"),d=(0,t.E1)("MobileSettingsQuickNav"),p=(0,t.E1)("q-page");return(0,t.Wz)(),(0,t.Az)(p,{padding:""},{default:(0,t.Ql)((()=>[(0,t.QD)("div",o,[(0,t.QD)("div",i,[(0,t.QD)("div",a,[(0,t.K2)(u)])]),(0,t.K2)(d,{prevEnabled:!0,prevLabel:e.$t("navigation.workers"),prevPath:"/ui/settings-workers",nextEnabled:!0,nextLabel:e.$t("navigation.link"),nextPath:"/ui/settings-link"},null,8,["prevLabel","nextLabel"])])])),_:1})}var c=n(4044);const r={class:"row q-gutter-xs q-mt-xs justify-between"},u={class:"col-auto"},d={class:"row no-wrap q-pa-md"},p={class:"column"},g={class:"col-auto",style:{"max-width":"200px"}},f={class:"q-gutter-sm"},m=["innerHTML"],v={class:"row"},h=(0,t.QD)("div",{class:"col-6 text-right"},[(0,t.QD)("span",{class:"text-weight-medium"},"Author")],-1),Q={class:"col-6 q-px-sm"},_={class:"row"},b=(0,t.QD)("div",{class:"col-6 text-right"},[(0,t.QD)("span",{class:"text-weight-medium"},"Version")],-1),w={class:"col-6 q-px-sm"},P={class:"text-grey-8 q-gutter-xs q-mr-lg"},k={key:0},K={key:1},x={class:"text-grey-8 q-gutter-xs"};function y(e,l,n,o,i,a){const s=(0,t.E1)("q-btn"),y=(0,t.E1)("q-uploader"),q=(0,t.E1)("q-btn-dropdown"),A=(0,t.E1)("q-btn-group"),I=(0,t.E1)("q-icon"),z=(0,t.E1)("q-input"),W=(0,t.E1)("q-card-section"),D=(0,t.E1)("q-img"),C=(0,t.E1)("q-item-section"),S=(0,t.E1)("q-item-label"),$=(0,t.E1)("q-tooltip"),E=(0,t.E1)("q-separator"),L=(0,t.E1)("q-item"),U=(0,t.E1)("q-list"),F=(0,t.E1)("q-card"),N=(0,t.iS)("close-popup");return(0,t.Wz)(),(0,t.Az)(F,{flat:""},{default:(0,t.Ql)((()=>[(0,t.K2)(W,{class:(0,c.WN)(e.$q.platform.is.mobile?"q-px-none":"")},{default:(0,t.Ql)((()=>[(0,t.QD)("div",r,[(0,t.QD)("div",u,[(0,t.K2)(A,null,{default:(0,t.Ql)((()=>[(0,t.K2)(s,{onClick:o.openPluginInstaller,class:"",color:"secondary","icon-right":"add",label:e.$t("components.plugins.installPluginFromRepo")},null,8,["onClick","label"]),(0,t.K2)(q,{color:"secondary",label:e.$t("components.plugins.installPluginFromFile")},{default:(0,t.Ql)((()=>[(0,t.QD)("div",null,[(0,t.QD)("div",d,[(0,t.QD)("div",p,[(0,t.K2)(y,{style:{"max-width":"300px"},url:o.getUploadUrl(),label:"Upload ZIP file...",color:"secondary",accept:".zip, application/zip","auto-upload":"",onRejected:o.onRejectedPluginUpload,onFailed:o.onFailedPluginUploadAndInstall,onUploaded:o.onSuccessfulPluginUploadAndInstall},null,8,["url","onRejected","onFailed","onUploaded"])])])])])),_:1},8,["label"])])),_:1})]),(0,t.QD)("div",g,[(0,t.K2)(z,{filled:"",dense:"",class:"shadow-1",debounce:"300",color:"primary",modelValue:o.filter,"onUpdate:modelValue":l[0]||(l[0]=e=>o.filter=e),placeholder:e.$t("navigation.search")},{append:(0,t.Ql)((()=>[(0,t.K2)(I,{name:"search"})])),_:1},8,["modelValue","placeholder"])])])])),_:1},8,["class"]),(0,t.K2)(W,{class:(0,c.WN)(e.$q.platform.is.mobile?"q-px-none":"")},{default:(0,t.Ql)((()=>[(0,t.QD)("div",f,[(0,t.K2)(U,{bordered:"",separator:"",class:"rounded-borders"},{default:(0,t.Ql)((()=>[((0,t.Wz)(!0),(0,t.An)(t.ae,null,(0,t.mi)(o.listedPlugins,((l,n)=>((0,t.Wz)(),(0,t.Az)(L,{key:n,class:(0,c.WN)(l.status.update_available?"bg-warning":"")},{default:(0,t.Ql)((()=>[(0,t.K2)(C,{avatar:""},{default:(0,t.Ql)((()=>[(0,t.K2)(D,{src:l.icon},null,8,["src"])])),_:2},1024),(0,t.K2)(C,{top:"",class:""},{default:(0,t.Ql)((()=>[(0,t.K2)(S,null,{default:(0,t.Ql)((()=>[(0,t.mY)((0,c.WA)(l.name),1)])),_:2},1024),(0,t.K2)(S,{caption:"",lines:"3"},{default:(0,t.Ql)((()=>[(0,t.QD)("span",{innerHTML:l.description},null,8,m)])),_:2},1024)])),_:2},1024),(0,t.K2)(C,{top:"",class:"gt-xs col-2"},{default:(0,t.Ql)((()=>[(0,t.K2)(S,{lines:"1"},{default:(0,t.Ql)((()=>[(0,t.QD)("div",v,[h,(0,t.QD)("div",Q,[(0,t.QD)("span",{class:(0,c.WN)(e.$q.dark.isActive&&!l.status.update_available?"text-grey-5":"text-grey-8")},(0,c.WA)(l.author),3)])])])),_:2},1024),(0,t.K2)(S,{lines:"1"},{default:(0,t.Ql)((()=>[(0,t.QD)("div",_,[b,(0,t.QD)("div",w,[(0,t.QD)("span",{class:(0,c.WN)(e.$q.dark.isActive&&!l.status.update_available?"text-grey-5":"text-grey-8")},(0,c.WA)(l.version),3)])])])),_:2},1024)])),_:2},1024),(0,t.K2)(C,{center:"",side:""},{default:(0,t.Ql)((()=>[(0,t.QD)("div",P,[l.status.update_available?((0,t.Wz)(),(0,t.Az)(s,{key:0,flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"info",icon:"update",onClick:e=>o.updateSinglePlugin(l.id)},null,8,["onClick"])):((0,t.Wz)(),(0,t.Az)(s,{key:1,disable:"",flat:"",dense:"",round:"",class:"gt-xs no-pointer-events",size:"12px",color:"positive",icon:"download_done"}))]),(0,t.K2)($,{class:"bg-white text-primary"},{default:(0,t.Ql)((()=>[l.status.update_available?((0,t.Wz)(),(0,t.An)("span",k,(0,c.WA)(e.$t("components.plugins.clickToUpdatePlugin")),1)):((0,t.Wz)(),(0,t.An)("span",K,(0,c.WA)(e.$t("components.plugins.pluginUpToDate")),1))])),_:2},1024)])),_:2},1024),(0,t.K2)(E,{inset:"",vertical:"",class:"q-mx-sm"}),(0,t.K2)(C,{center:"",side:""},{default:(0,t.Ql)((()=>[(0,t.QD)("div",x,[(0,t.K2)(q,{flat:"",dense:"",rounded:"",class:"lt-sm",size:"12px","no-icon-animation":"","dropdown-icon":"more_vert"},{default:(0,t.Ql)((()=>[(0,t.K2)(U,null,{default:(0,t.Ql)((()=>[(0,t.wt)(((0,t.Wz)(),(0,t.Az)(L,{clickable:"",onClick:e=>o.openPluginInfo(l.id)},{default:(0,t.Ql)((()=>[(0,t.K2)(C,{avatar:""},{default:(0,t.Ql)((()=>[(0,t.K2)(I,{color:"info",name:"info"})])),_:1}),(0,t.K2)(C,null,{default:(0,t.Ql)((()=>[(0,t.K2)(S,null,{default:(0,t.Ql)((()=>[(0,t.mY)((0,c.WA)(e.$t("headers.pluginInfo")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[N]]),l.has_config?(0,t.wt)(((0,t.Wz)(),(0,t.Az)(L,{key:0,clickable:"",onClick:e=>o.openPluginInfo(l.id,"settings")},{default:(0,t.Ql)((()=>[(0,t.K2)(C,{avatar:""},{default:(0,t.Ql)((()=>[(0,t.K2)(I,{color:"grey-8",name:"tune"})])),_:1}),(0,t.K2)(C,null,{default:(0,t.Ql)((()=>[(0,t.K2)(S,null,{default:(0,t.Ql)((()=>[(0,t.mY)((0,c.WA)(e.$t("components.plugins.globalConfiguration")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[N]]):(0,t.g1)("",!0),l.status.update_available?(0,t.wt)(((0,t.Wz)(),(0,t.Az)(L,{key:1,clickable:"",onClick:e=>o.updateSinglePlugin(l.id)},{default:(0,t.Ql)((()=>[(0,t.K2)(C,{avatar:""},{default:(0,t.Ql)((()=>[(0,t.K2)(I,{color:"warning",name:"update"})])),_:1}),(0,t.K2)(C,null,{default:(0,t.Ql)((()=>[(0,t.K2)(S,null,{default:(0,t.Ql)((()=>[(0,t.mY)((0,c.WA)(e.$t("components.plugins.updatePlugin")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[N]]):(0,t.g1)("",!0),(0,t.wt)(((0,t.Wz)(),(0,t.Az)(L,{clickable:"",onClick:e=>o.removeSinglePlugin(l.id)},{default:(0,t.Ql)((()=>[(0,t.K2)(C,{avatar:""},{default:(0,t.Ql)((()=>[(0,t.K2)(I,{color:"negative",name:"delete"})])),_:1}),(0,t.K2)(C,null,{default:(0,t.Ql)((()=>[(0,t.K2)(S,null,{default:(0,t.Ql)((()=>[(0,t.mY)((0,c.WA)(e.$t("components.plugins.removePlugin")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[N]])])),_:2},1024)])),_:2},1024),(0,t.K2)(s,{flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"secondary",icon:"info",onClick:e=>o.openPluginInfo(l.id)},{default:(0,t.Ql)((()=>[(0,t.K2)($,{class:"bg-white text-primary"},{default:(0,t.Ql)((()=>[(0,t.mY)((0,c.WA)(e.$t("headers.pluginInfo")),1)])),_:1})])),_:2},1032,["onClick"]),(0,t.K2)(s,{disable:!l.has_config,flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"grey-8",icon:"tune",onClick:e=>o.openPluginInfo(l.id,"settings")},{default:(0,t.Ql)((()=>[(0,t.K2)($,{class:"bg-white text-primary"},{default:(0,t.Ql)((()=>[(0,t.mY)((0,c.WA)(e.$t("components.plugins.globalConfiguration")),1)])),_:1})])),_:2},1032,["disable","onClick"]),(0,t.K2)(s,{flat:"",dense:"",round:"",class:"gt-xs",size:"12px",color:"negative",icon:"delete",onClick:e=>o.removeSinglePlugin(l.id)},{default:(0,t.Ql)((()=>[(0,t.K2)($,{class:"bg-white text-primary"},{default:(0,t.Ql)((()=>[(0,t.mY)((0,c.WA)(e.$t("components.plugins.removePlugin")),1)])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024),l.status.update_available?((0,t.Wz)(),(0,t.Az)($,{key:0,class:"bg-white text-primary"},{default:(0,t.Ql)((()=>[(0,t.mY)((0,c.WA)(e.$t("components.plugins.updateAvailable")),1)])),_:1})):(0,t.g1)("",!0)])),_:2},1032,["class"])))),128))])),_:1})])])),_:1},8,["class"])])),_:1})}var q=n(5836),A=n(7928),I=n(1416),z=n(6728),W=n(4776),D=n(3160),C=n(1172),S=n(216);const $={components:{},setup(){const e=(0,I.c)(),{t:l}=(0,D.gd)(),n=(0,q.IL)([]),o=(0,q.IL)(""),i=(0,q.IL)(!1),a=(0,q.IL)({sortBy:"name",descending:!1,page:1,rowsPerPage:50,rowsNumber:10}),s=(0,q.IL)([]),c=(0,q.IL)([]),r=(0,q.IL)(0);function u(){let e="";return 0!==s.value.length&&(e=`${s.value.length} record${s.value.length>1?"s":""} selected of ${n.value.length}`),e}function d(){if(0!==s.value.length){let l=[];for(let e=0;e<s.value.length;e++){let n=s.value[e];l[l.length]=n.id}let n={id_list:l};(0,z.c)({method:"post",url:(0,A.S)("v2","plugins/disable"),data:n}).then((e=>{h({pagination:a.value,filter:o.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be disabled",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}else e.notify({color:"warning",position:"top",message:"Nothing selected",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}function p(l){let n={id_list:l};(0,z.c)({method:"post",url:(0,A.S)("v2","plugins/update"),data:n}).then((e=>{h({pagination:a.value,filter:o.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be updated",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}function g(e){p([e])}function f(l){let n={id_list:l};(0,z.c)({method:"delete",url:(0,A.S)("v2","plugins/remove"),data:n}).then((e=>{h({pagination:a.value,filter:o.value})})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the selected plugins be removed",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}function m(e){f([e])}function v(e){return e.length>280&&(e=e.substring(0,277)+"..."),e=e.split("\n")[0],(0,W.Yv)(e)}function h(l){const{page:t,rowsPerPage:o,sortBy:s,descending:r}=l.pagination,u=l.filter;i.value=!0;const d=0===o?a.value.rowsNumber:o,p=(t-1)*o;let g={start:p,length:d,search_value:u,order_by:s,order_direction:r?"desc":"asc"};(0,z.c)({method:"post",url:(0,A.S)("v2","plugins/installed"),data:g}).then((e=>{a.value.rowsNumber=e.data.recordsFiltered,c.value=[];for(let l=0;l<e.data.results.length;l++){let n=e.data.results[l];c.value[l]={id:n.id,plugin_id:n.plugin_id,icon:n.icon,name:n.name,description:v(n.description),tags:n.tags,author:n.author,version:n.version,status:n.status,has_config:n.has_config}}n.value.splice(0,n.value.length,...c.value),a.value.page=t,a.value.rowsPerPage=o,a.value.sortBy=s,a.value.descending=r,i.value=!1})).catch((()=>{e.notify({color:"negative",position:"top",message:"An error was encountered while requesting the installed plugins list",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}))}const Q=(0,q.IL)(""),_=(0,q.IL)("");function b(l,n){let t="";for(let e=0;e<c.value.length;e++){let n=c.value[e];n.id===l&&(t=n.plugin_id)}""!==t?e.dialog({component:C.c,componentProps:{pluginId:t,startTab:"settings"===n?"settings":"info"}}).onOk((e=>{})).onDismiss((()=>{})):e.notify({color:"negative",position:"top",message:"An error was encountered while attempting to open plugin info",icon:"report_problem",actions:[{icon:"close",color:"white"}]})}function w(){Q.value="",_.value=""}function P(){e.dialog({component:S.c,componentProps:{header:l("headers.pluginInstaller"),componentName:"PluginInstallerForm",width:"2000px",componentProps:{}}}).onOk((e=>{})).onDismiss((()=>{h({pagination:a.value,filter:o.value})}))}function k(){return(0,A.S)("v2","upload/plugin/file")}function K(n){e.notify({color:"negative",position:"top",message:l("components.plugins.invalidZipFile"),icon:"report_problem",actions:[{icon:"close",color:"white"}]})}function x(){e.notify({color:"negative",position:"top",message:l("components.plugins.failedToInstallPluginFromZip"),icon:"check_circle",actions:[{icon:"close",color:"white"}]}),h({pagination:a.value,filter:void 0})}function y(){e.notify({color:"positive",position:"top",message:l("components.plugins.installedPluginFromZip"),icon:"check_circle",actions:[{icon:"close",color:"white"}]}),h({pagination:a.value,filter:void 0})}return(0,t.u2)((()=>{h({pagination:a.value,filter:void 0})})),(0,t.Kg)(o,((e,l)=>{h({pagination:a.value,filter:o.value})})),{selected:s,filter:o,loading:i,pagination:a,rows:n,listedPlugins:c,itemOffset:r,getSelectedString:u,onRequest:h,disableSelected:d,updateSinglePlugin:g,removeSinglePlugin:m,openPluginInfo:b,showPluginInfo:Q,showPluginSettings:_,closePluginInfo:w,openPluginInstaller:P,getUploadUrl:k,onRejectedPluginUpload:K,onFailedPluginUploadAndInstall:x,onSuccessfulPluginUploadAndInstall:y}}};var E=n(8716),L=n(608),U=n(1008),F=n(2572),N=n(9140),T=n(2764),Y=n(9600),B=n(540),R=n(8120),j=n(9588),M=n(4884),V=n(1032),Z=n(6616),O=n(2992),H=n(111),G=n(880),J=n(1020),X=n(5252),ee=n.n(X);const le=(0,E.c)($,[["render",y]]),ne=le;ee()($,"components",{QCard:L.c,QCardSection:U.c,QBtnGroup:F.c,QBtn:N.c,QBtnDropdown:T.c,QUploader:Y.c,QInput:B.c,QIcon:R.c,QList:j.c,QItem:M.c,QItemSection:V.c,QImg:Z.c,QItemLabel:O.c,QTooltip:H.c,QSeparator:G.c}),ee()($,"directives",{ClosePopup:J.c});var te=n(8564),oe=n(1156);const ie={components:{MobileSettingsQuickNav:oe.c,PluginsInstalledTable:ne},setup(){const{t:e}=(0,D.gd)();let l=null,n=(0,te.k)(e);function o(){l=n.init()}function i(){n.close()}(0,t.u2)((()=>{o()})),(0,t.wx)((()=>{i()}))}};var ae=n(7059);const se=(0,E.c)(ie,[["render",s]]),ce=se;ee()(ie,"components",{QPage:ae.c})}}]);